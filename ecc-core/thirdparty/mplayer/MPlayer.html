<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>MPlayer - The Movie Player</title><link rel="stylesheet" type="text/css" href="default.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book"><div class="titlepage"><div><div><h1 class="title"><a name="index"></a><span class="application">MPlayer</span> - The Movie Player</h1></div><div><h2 class="subtitle"><a class="ulink" href="http://www.mplayerhq.hu" target="_top">http://www.mplayerhq.hu</a></h2></div><div><p class="copyright">Copyright © 2000-2018 MPlayer team</p></div><div><div class="legalnotice"><a name="idp2757954256"></a><p class="legalnotice-title"><b>License</b></p><p>MPlayer is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License version 2 as
  published by the Free Software Foundation.</p><p>MPlayer is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
  for more details.</p><p>You should have received a copy of the GNU General Public License
  along with MPlayer; if not, write to the Free Software Foundation,
  Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</p></div></div></div><hr></div><div class="toc"><dl class="toc"><dt><span class="preface"><a href="#howtoread">How to read this documentation</a></span></dt><dt><span class="chapter"><a href="#intro">1. Introduction</a></span></dt><dt><span class="chapter"><a href="#install">2. Installation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#softreq">2.1. Software requirements</a></span></dt><dt><span class="sect1"><a href="#features">2.2. Features</a></span></dt><dt><span class="sect1"><a href="#gui">2.3. What about the GUI?</a></span></dt><dt><span class="sect1"><a href="#fonts-osd">2.4. Fonts and OSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#truetype-fonts">2.4.1. TrueType fonts</a></span></dt><dt><span class="sect2"><a href="#bitmap-fonts">2.4.2. bitmap fonts</a></span></dt><dt><span class="sect2"><a href="#osdmenu">2.4.3. OSD menu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#codec-installation">2.5. Codec installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xvid">2.5.1. Xvid</a></span></dt><dt><span class="sect2"><a href="#x264">2.5.2. <code class="systemitem">x264</code></a></span></dt><dt><span class="sect2"><a href="#amr">2.5.3. AMR</a></span></dt><dt><span class="sect2"><a href="#xmms">2.5.4. XMMS</a></span></dt></dl></dd><dt><span class="sect1"><a href="#rtc">2.6. RTC</a></span></dt></dl></dd><dt><span class="chapter"><a href="#usage">3. Usage</a></span></dt><dd><dl><dt><span class="sect1"><a href="#commandline">3.1. Command line</a></span></dt><dt><span class="sect1"><a href="#subosd">3.2. Subtitles and OSD</a></span></dt><dt><span class="sect1"><a href="#control">3.3. Control</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ctrl-cfg">3.3.1. Controls configuration</a></span></dt><dt><span class="sect2"><a href="#lirc">3.3.2. Control from LIRC</a></span></dt><dt><span class="sect2"><a href="#slave-mode">3.3.3. Slave mode</a></span></dt></dl></dd><dt><span class="sect1"><a href="#streaming">3.4. Streaming from network or pipes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#streaming-save">3.4.1. Saving streamed content</a></span></dt></dl></dd><dt><span class="sect1"><a href="#dvd">3.5. DVD playback</a></span></dt><dd><dl><dt><span class="sect2"><a href="#region_code">3.5.1. region code</a></span></dt></dl></dd><dt><span class="sect1"><a href="#vcd">3.6. VCD playback</a></span></dt><dt><span class="sect1"><a href="#edl">3.7. Edit Decision Lists (EDL)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#edl_using">3.7.1. Using an EDL file</a></span></dt><dt><span class="sect2"><a href="#edl_making">3.7.2. Making an EDL file</a></span></dt></dl></dd><dt><span class="sect1"><a href="#networksync">3.8. Synchronized playback over a network</a></span></dt><dt><span class="sect1"><a href="#advaudio-surround">3.9. Surround/Multichannel playback</a></span></dt><dd><dl><dt><span class="sect2"><a href="#advaudio-surround-DVD">3.9.1. DVDs</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-stereoinfour">3.9.2. Playing stereo files to four speakers</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-passthrough">3.9.3. AC-3/DTS Passthrough</a></span></dt><dt><span class="sect2"><a href="#hwmpa-surround-passthrough">3.9.4. MPEG audio Passthrough</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-matrix">3.9.5. Matrix-encoded audio</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-hrtf">3.9.6. Surround emulation in headphones</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-troubleshooting">3.9.7. Troubleshooting</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advaudio-channels">3.10. Channel manipulation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#advaudio-channels-general">3.10.1. General information</a></span></dt><dt><span class="sect2"><a href="#advaudio-channels-mono">3.10.2. Playing mono with two speakers</a></span></dt><dt><span class="sect2"><a href="#advaudio-channels-copying">3.10.3. Channel copying/moving</a></span></dt><dt><span class="sect2"><a href="#advaudio-channels-mixing">3.10.4. Channel mixing</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advaudio-volume">3.11. Software Volume adjustment</a></span></dt><dt><span class="sect1"><a href="#tv-input">3.12. TV input</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tv-tips">3.12.1. Usage tips</a></span></dt><dt><span class="sect2"><a href="#tv-examples">3.12.2. Examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tv-teletext">3.13. Teletext</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tv-teletext-implementation-notes">3.13.1. Implementation notes</a></span></dt><dt><span class="sect2"><a href="#tv-teletext-usage">3.13.2. Using teletext</a></span></dt></dl></dd><dt><span class="sect1"><a href="#radio">3.14. Radio</a></span></dt><dd><dl><dt><span class="sect2"><a href="#radio-tips">3.14.1. Usage tips</a></span></dt><dt><span class="sect2"><a href="#radio-examples">3.14.2. Examples</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#video">4. Video output devices</a></span></dt><dd><dl><dt><span class="sect1"><a href="#xv">4.1. Xv</a></span></dt><dt><span class="sect1"><a href="#dga">4.2. DGA</a></span></dt><dt><span class="sect1"><a href="#svgalib">4.3. SVGAlib</a></span></dt><dt><span class="sect1"><a href="#fbdev">4.4. Framebuffer output (FBdev)</a></span></dt><dt><span class="sect1"><a href="#mga_vid">4.5. Matrox framebuffer (mga_vid)</a></span></dt><dt><span class="sect1"><a href="#tdfxfb">4.6. 3Dfx YUV support</a></span></dt><dt><span class="sect1"><a href="#tdfx_vid">4.7. tdfx_vid</a></span></dt><dt><span class="sect1"><a href="#opengl">4.8. OpenGL output</a></span></dt><dt><span class="sect1"><a href="#aalib">4.9. AAlib – text mode displaying</a></span></dt><dt><span class="sect1"><a href="#caca">4.10. 
<code class="systemitem">libcaca</code> – Color ASCII Art library
</a></span></dt><dt><span class="sect1"><a href="#vesa">4.11. VESA - output to VESA BIOS</a></span></dt><dt><span class="sect1"><a href="#x11">4.12. X11</a></span></dt><dt><span class="sect1"><a href="#vidix">4.13. VIDIX</a></span></dt><dd><dl><dt><span class="sect2"><a href="#svgalib_helper">4.13.1. svgalib_helper</a></span></dt><dt><span class="sect2"><a href="#vidix-ati">4.13.2. ATI cards</a></span></dt><dt><span class="sect2"><a href="#vidix-mga">4.13.3. Matrox cards</a></span></dt><dt><span class="sect2"><a href="#vidix-trident">4.13.4. Trident cards</a></span></dt><dt><span class="sect2"><a href="#vidix-3dlabs">4.13.5. 3DLabs cards</a></span></dt><dt><span class="sect2"><a href="#vidix-nvidia">4.13.6. nVidia cards</a></span></dt><dt><span class="sect2"><a href="#vidix-sis">4.13.7. SiS cards</a></span></dt></dl></dd><dt><span class="sect1"><a href="#directfb">4.14. DirectFB</a></span></dt><dt><span class="sect1"><a href="#dfbmga">4.15. DirectFB/Matrox (dfbmga)</a></span></dt><dt><span class="sect1"><a href="#mpeg_decoders">4.16. MPEG decoders</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dvb">4.16.1. DVB output and input</a></span></dt><dt><span class="sect2"><a href="#dxr2">4.16.2. DXR2</a></span></dt><dt><span class="sect2"><a href="#dxr3">4.16.3. DXR3/Hollywood+</a></span></dt></dl></dd><dt><span class="sect1"><a href="#zr">4.17. Zr</a></span></dt><dt><span class="sect1"><a href="#blinkenlights">4.18. Blinkenlights</a></span></dt><dt><span class="sect1"><a href="#tvout">4.19. TV-out support</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tvout-mga-g400">4.19.1. Matrox G400 cards</a></span></dt><dt><span class="sect2"><a href="#tv-out_matrox_g450">4.19.2. Matrox G450/G550 cards</a></span></dt><dt><span class="sect2"><a href="#tv-out_matrox_cable">4.19.3. Building a Matrox TV-out cable</a></span></dt><dt><span class="sect2"><a href="#tvout-ati">4.19.4. ATI cards</a></span></dt><dt><span class="sect2"><a href="#tvout-nvidia">4.19.5. nVidia</a></span></dt><dt><span class="sect2"><a href="#tvout-neomagic">4.19.6. NeoMagic</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ports">5. Ports</a></span></dt><dd><dl><dt><span class="sect1"><a href="#linux">5.1. Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#debian">5.1.1. Debian packaging</a></span></dt><dt><span class="sect2"><a href="#rpm">5.1.2. RPM packaging</a></span></dt><dt><span class="sect2"><a href="#arm_linux">5.1.3. ARM Linux</a></span></dt></dl></dd><dt><span class="sect1"><a href="#bsd">5.2. *BSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#freebsd">5.2.1. FreeBSD</a></span></dt><dt><span class="sect2"><a href="#openbsd">5.2.2. OpenBSD</a></span></dt><dt><span class="sect2"><a href="#darwin">5.2.3. Darwin</a></span></dt></dl></dd><dt><span class="sect1"><a href="#unix">5.3. Commercial Unix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#solaris">5.3.1. Solaris</a></span></dt><dt><span class="sect2"><a href="#hp-ux">5.3.2. HP-UX</a></span></dt><dt><span class="sect2"><a href="#aix">5.3.3. AIX</a></span></dt><dt><span class="sect2"><a href="#qnx">5.3.4. QNX</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windows">5.4. Windows</a></span></dt><dd><dl><dt><span class="sect2"><a href="#cygwin">5.4.1. <span class="application">Cygwin</span></a></span></dt><dt><span class="sect2"><a href="#mingw">5.4.2. <span class="application">MinGW</span></a></span></dt></dl></dd><dt><span class="sect1"><a href="#macos">5.5. Mac OS</a></span></dt><dd><dl><dt><span class="sect2"><a href="#osx_gui">5.5.1. MPlayer OS X GUI</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#mencoder">6. Basic usage of <span class="application">MEncoder</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#menc-feat-selecting-codec">6.1. Selecting codecs and container formats</a></span></dt><dt><span class="sect1"><a href="#menc-feat-selecting-input">6.2. Selecting input file or device</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg4">6.3. Encoding two pass MPEG-4 ("DivX")</a></span></dt><dt><span class="sect1"><a href="#menc-feat-handheld-psp">6.4. Encoding to Sony PSP video format</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg">6.5. Encoding to MPEG format</a></span></dt><dt><span class="sect1"><a href="#menc-feat-rescale">6.6. Rescaling movies</a></span></dt><dt><span class="sect1"><a href="#menc-feat-streamcopy">6.7. Stream copying</a></span></dt><dt><span class="sect1"><a href="#menc-feat-enc-images">6.8. Encoding from multiple input image files (JPEG, PNG, TGA, etc.)</a></span></dt><dt><span class="sect1"><a href="#menc-feat-extractsub">6.9. Extracting DVD subtitles to VOBsub file</a></span></dt><dt><span class="sect1"><a href="#aspect">6.10. Preserving aspect ratio</a></span></dt></dl></dd><dt><span class="chapter"><a href="#encoding-guide">7. Encoding with <span class="application">MEncoder</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#menc-feat-dvd-mpeg4">7.1. Making a high quality MPEG-4 ("DivX")
  rip of a DVD movie</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-preparing-encode">7.1.1. Preparing to encode: Identifying source material and framerate</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-fps">7.1.1.1. Identifying source framerate</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-material">7.1.1.2. Identifying source material</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-2pass">7.1.2. Constant quantizer vs. multipass</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-constraints">7.1.3. Constraints for efficient encoding</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-crop">7.1.4. Cropping and Scaling</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate">7.1.5. Choosing resolution and bitrate</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate-compute">7.1.5.1. Computing the resolution</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-filtering">7.1.6. Filtering</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-interlacing">7.1.7. Interlacing and Telecine</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-encoding-interlaced">7.1.8. Encoding interlaced video</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-av-sync">7.1.9. Notes on Audio/Video synchronization</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-codec">7.1.10. Choosing the video codec</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-audio">7.1.11. Audio</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-muxing">7.1.12. Muxing</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-filter-issues">7.1.12.1. Improving muxing and A/V sync reliability</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-avi-limitations">7.1.12.2. Limitations of the AVI container</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-matroska">7.1.12.3. Muxing into the Matroska container</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#menc-feat-telecine">7.2. How to deal with telecine and interlacing within NTSC DVDs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-telecine-intro">7.2.1. Introduction</a></span></dt><dt><span class="sect2"><a href="#menc-feat-telecine-ident">7.2.2. How to tell what type of video you have</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-ident-progressive">7.2.2.1. Progressive</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-telecined">7.2.2.2. Telecined</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-interlaced">7.2.2.3. Interlaced</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpt">7.2.2.4. Mixed progressive and telecine</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpi">7.2.2.5. Mixed progressive and interlaced</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-encode">7.2.3. How to encode each category</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-encode-progressive">7.2.3.1. Progressive</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-telecined">7.2.3.2. Telecined</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-interlaced">7.2.3.3. Interlaced</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpt">7.2.3.4. Mixed progressive and telecine</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpi">7.2.3.5. Mixed progressive and interlaced</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-footnotes">7.2.4. Footnotes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-enc-libavcodec">7.3. Encoding with the <code class="systemitem">libavcodec</code>
  codec family</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-video-codecs">7.3.1. <code class="systemitem">libavcodec</code>'s
  video codecs</a></span></dt><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-audio-codecs">7.3.2. <code class="systemitem">libavcodec</code>'s
  audio codecs</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-enc-libavcodec-audio-codecs-pcmadpcm">7.3.2.1. PCM/ADPCM format supplementary table</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-lavc-encoding-options">7.3.3. Encoding options of libavcodec</a></span></dt><dt><span class="sect2"><a href="#menc-feat-mpeg4-lavc-example-settings">7.3.4. Encoding setting examples</a></span></dt><dt><span class="sect2"><a href="#custommatrices">7.3.5. Custom inter/intra matrices</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-example">7.3.6. Example</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-xvid">7.4. Encoding with the <code class="systemitem">Xvid</code>
  codec</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-xvid-intro">7.4.1. What options should I use to get the best results?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-options">7.4.2. Encoding options of <code class="systemitem">Xvid</code></a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-profiles">7.4.3. Encoding profiles</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-example-settings">7.4.4. Encoding setting examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-x264">7.5. Encoding with the
  <code class="systemitem">x264</code> codec</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-x264-encoding-options">7.5.1. Encoding options of x264</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-intro">7.5.1.1. Introduction</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-speedvquality">7.5.1.2. Options which primarily affect speed and quality</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-misc-preferences">7.5.1.3. Options pertaining to miscellaneous preferences</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-x264-example-settings">7.5.2. Encoding setting examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-video-for-windows">7.6. 
  Encoding with the <code class="systemitem">Video For Windows</code>
  codec family
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-vfw-video-codecs">7.6.1. Video for Windows supported codecs</a></span></dt><dt><span class="sect2"><a href="#menc-feat-video-for-windows-bitrate-settings">7.6.2. Using vfw2menc to create a codec settings file.</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-quicktime-7">7.7. Using <span class="application">MEncoder</span> to create
<span class="application">QuickTime</span>-compatible files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-quicktime-7-why-use-it">7.7.1. Why would one want to produce <span class="application">QuickTime</span>-compatible Files?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-constraints">7.7.2. <span class="application">QuickTime</span> 7 limitations</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-crop">7.7.3. Cropping</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-scale">7.7.4. Scaling</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-avsync">7.7.5. A/V sync</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-bitrate">7.7.6. Bitrate</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-example">7.7.7. Encoding example</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-remux">7.7.8. Remuxing as MP4</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-metadata">7.7.9. Adding metadata tags</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-vcd-dvd">7.8. Using <span class="application">MEncoder</span>
  to create VCD/SVCD/DVD-compliant files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-constraints">7.8.1. Format Constraints</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-resolution">7.8.1.1. Format Constraints</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-gop">7.8.1.2. GOP Size Constraints</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-bitrate">7.8.1.3. Bitrate Constraints</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-output">7.8.2. Output Options</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-aspect">7.8.2.1. Aspect Ratio</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-a-v-sync">7.8.2.2. Maintaining A/V sync</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-srate">7.8.2.3. Sample Rate Conversion</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-lavc">7.8.3. Using libavcodec for VCD/SVCD/DVD Encoding</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-intro">7.8.3.1. Introduction</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-options">7.8.3.2. lavcopts</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-examples">7.8.3.3. Examples</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-advanced">7.8.3.4. Advanced Options</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-audio">7.8.4. Encoding Audio</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-toolame">7.8.4.1. toolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-twolame">7.8.4.2. twolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-lavc">7.8.4.3. libavcodec</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-all">7.8.5. Putting it all Together</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-dvd">7.8.5.1. PAL DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-dvd">7.8.5.2. NTSC DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-ac3-copy">7.8.5.3. PAL AVI Containing AC-3 Audio to DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-ac3-copy">7.8.5.4. NTSC AVI Containing AC-3 Audio to DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-svcd">7.8.5.5. PAL SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-svcd">7.8.5.6. NTSC SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-vcd">7.8.5.7. PAL VCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-vcd">7.8.5.8. NTSC VCD</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#faq">8. Frequently Asked Questions</a></span></dt><dt><span class="appendix"><a href="#bugreports">A. How to report bugs</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bugreports_security">A.1. Report security related bugs</a></span></dt><dt><span class="sect1"><a href="#bugreports_fix">A.2. How to fix bugs</a></span></dt><dt><span class="sect1"><a href="#bugreports_regression_test">A.3. How to do regression testing using Subversion</a></span></dt><dt><span class="sect1"><a href="#bugreports_report">A.4. How to report bugs</a></span></dt><dt><span class="sect1"><a href="#bugreports_where">A.5. Where to report bugs</a></span></dt><dt><span class="sect1"><a href="#bugreports_what">A.6. What to report</a></span></dt><dd><dl><dt><span class="sect2"><a href="#bugreports_system">A.6.1. System Information</a></span></dt><dt><span class="sect2"><a href="#bugreports_hardware">A.6.2. Hardware and drivers</a></span></dt><dt><span class="sect2"><a href="#bugreports_configure">A.6.3. Configure problems</a></span></dt><dt><span class="sect2"><a href="#bugreports_compilation">A.6.4. Compilation problems</a></span></dt><dt><span class="sect2"><a href="#bugreports_playback">A.6.5. Playback problems</a></span></dt><dt><span class="sect2"><a href="#bugreports_crash">A.6.6. Crashes</a></span></dt><dd><dl><dt><span class="sect3"><a href="#bugreports_debug">A.6.6.1. How to conserve information about a reproducible crash</a></span></dt><dt><span class="sect3"><a href="#bugreports_core">A.6.6.2. How to extract meaningful information from a core dump</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#bugreports_advusers">A.7. I know what I am doing...</a></span></dt></dl></dd><dt><span class="appendix"><a href="#skin">B. <span class="application">MPlayer</span> skin format</a></span></dt><dd><dl><dt><span class="sect1"><a href="#skin-overview">B.1. Overview</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-overview-components">B.1.1. Skin components</a></span></dt><dt><span class="sect2"><a href="#skin-overview-formats">B.1.2. Image formats</a></span></dt><dt><span class="sect2"><a href="#skin-files">B.1.3. Files</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-file">B.2. The skin file</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-file-main">B.2.1. Main window and playbar</a></span></dt><dt><span class="sect2"><a href="#skin-file-subwindow">B.2.2. Video window</a></span></dt><dt><span class="sect2"><a href="#skin-file-menu">B.2.3. Skin menu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-fonts">B.3. Fonts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-fonts-symbols">B.3.1. Symbols</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-gui">B.4. GUI messages</a></span></dt><dt><span class="sect1"><a href="#skin-quality">B.5. Creating quality skins</a></span></dt></dl></dd></dl></div><div class="preface"><div class="titlepage"><div><div><h1 class="title"><a name="howtoread"></a>How to read this documentation</h1></div></div></div><p>
If you are a first-time installer: be sure to read everything from here to
the end of the Installation section, and follow the links you will find. If
you have any other questions, return to the <a class="link" href="#toc">Table of
Contents</a> and search for the topic, read the <a class="xref" href="#faq" title="Chapter 8. Frequently Asked Questions">FAQ</a>,
or try grepping through the files. Most questions should be answered somewhere
here and the rest has probably already been asked on our
<a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">mailing lists</a>.
Check the
<a class="ulink" href="https://lists.mplayerhq.hu/mailman/listinfo" target="_top">archives</a>, there
is a lot of valuable information to be found there.
</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="intro"></a>Chapter 1. Introduction</h1></div></div></div><p>
<span class="application">MPlayer</span> is a movie player for Linux (runs on
many other Unices, and non-x86 CPUs, see <a class="xref" href="#ports" title="Chapter 5. Ports">Ports</a>).
It plays most MPEG, VOB, AVI, Ogg/OGM, VIVO, ASF/WMA/WMV, QT/MOV/MP4, FLI, RM,
NuppelVideo, yuv4mpeg, FILM, RoQ, PVA, Matroska files, supported by
many native, XAnim, RealPlayer, and Win32 DLL codecs. You can watch
Video CD, SVCD, DVD, 3ivx, RealMedia, Sorenson, Theora,
and MPEG-4 (DivX) movies, too. Another big
feature of <span class="application">MPlayer</span> is the wide range of
supported output drivers. It works with X11, Xv, DGA, OpenGL, SVGAlib,
fbdev, AAlib, libcaca, DirectFB, but you can use GGI and SDL (and this way all
their drivers) and some low level card-specific drivers (for Matrox, 3Dfx and
Radeon, Mach64, Permedia3) too! Most of them support software or hardware
scaling, so you can enjoy movies in fullscreen.
<span class="application">MPlayer</span> supports displaying through some
hardware MPEG decoder boards, such as the <a class="link" href="#dvb" title="4.16.1. DVB output and input">DVB</a> and
<a class="link" href="#dxr3" title="4.16.3. DXR3/Hollywood+">DXR3/Hollywood+</a>. And what about the nice big
antialiased shaded subtitles (14 supported types)
with European/ISO 8859-1,2 (Hungarian, English, Czech, etc), Cyrillic, Korean
fonts, and the onscreen display (OSD)?
</p><p>
The player is rock solid playing damaged MPEG files (useful for some VCDs),
and it plays bad AVI files which are unplayable with the famous
<span class="application">Windows Media Player</span>.
Even AVI files without index chunk are playable, and you can
temporarily rebuild their indexes with the <tt class="option">-idx</tt> option, or
permanently with <span class="application">MEncoder</span>, thus enabling
seeking!  As you see, stability and quality are the most important things,
but the speed is also amazing. There is also a powerful filter system for
video and audio manipulation.
</p><p>
<span class="application">MEncoder</span> (<span class="application">MPlayer</span>'s Movie
Encoder) is a simple movie encoder, designed to encode
<span class="application">MPlayer</span>-playable movies
AVI/ASF/OGG/DVD/VCD/VOB/MPG/MOV/VIV/FLI/RM/NUV/NET/PVA
to other <span class="application">MPlayer</span>-playable formats (see below).
It can encode with various codecs, like MPEG-4 (DivX4)
(one or two passes), <code class="systemitem">libavcodec</code>,
PCM/MP3/VBR MP3 audio.
</p><div class="itemizedlist"><p class="title"><b><span class="application">MEncoder</span> features</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Encoding from the wide range of file formats and decoders of
  <span class="application">MPlayer</span>
</p></li><li class="listitem"><p>
  Encoding to all the codecs of FFmpeg's
  <code class="systemitem">libavcodec</code>
</p></li><li class="listitem"><p>
  Video encoding from V4L compatible TV tuners
</p></li><li class="listitem"><p>
  Encoding/multiplexing to interleaved AVI files with proper index
</p></li><li class="listitem"><p>
  Creating files from external audio stream
</p></li><li class="listitem"><p>
  1, 2 or 3 pass encoding
</p></li><li class="listitem"><p>
  VBR MP3 audio
</p></li><li class="listitem"><p>
  PCM audio
</p></li><li class="listitem"><p>
  Stream copying
</p></li><li class="listitem"><p>
  Input A/V synchronizing (pts-based, can be disabled with
  <tt class="option">-mc 0</tt> option)
</p></li><li class="listitem"><p>
  fps correction with <tt class="option">-ofps</tt> option (useful when encoding
  30000/1001 fps VOB to 24000/1001 fps AVI)
</p></li><li class="listitem"><p>
  Using our very powerful filter system (crop, expand, flip, postprocess,
  rotate, scale, RGB/YUV conversion)
</p></li><li class="listitem"><p>
  Can encode DVD/VOBsub and text subtitles
  into the output file
</p></li><li class="listitem"><p>
  Can rip DVD subtitles to VOBsub format
</p></li></ul></div><p>
<span class="application">MPlayer</span> and <span class="application">MEncoder</span>
can be distributed under the terms of the GNU General Public License Version 2.
</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="install"></a>Chapter 2. Installation</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect1"><a href="#softreq">2.1. Software requirements</a></span></dt><dt><span class="sect1"><a href="#features">2.2. Features</a></span></dt><dt><span class="sect1"><a href="#gui">2.3. What about the GUI?</a></span></dt><dt><span class="sect1"><a href="#fonts-osd">2.4. Fonts and OSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#truetype-fonts">2.4.1. TrueType fonts</a></span></dt><dt><span class="sect2"><a href="#bitmap-fonts">2.4.2. bitmap fonts</a></span></dt><dt><span class="sect2"><a href="#osdmenu">2.4.3. OSD menu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#codec-installation">2.5. Codec installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xvid">2.5.1. Xvid</a></span></dt><dt><span class="sect2"><a href="#x264">2.5.2. <code class="systemitem">x264</code></a></span></dt><dt><span class="sect2"><a href="#amr">2.5.3. AMR</a></span></dt><dt><span class="sect2"><a href="#xmms">2.5.4. XMMS</a></span></dt></dl></dd><dt><span class="sect1"><a href="#rtc">2.6. RTC</a></span></dt></dl></div><p>
A quick installation guide can be found in the <tt class="filename">README</tt>
file. Please read it first and then come back here for the rest of the gory
details.
</p><p>
In this section you will be guided through the compilation and configuration
process of <span class="application">MPlayer</span>. It's not easy, but it won't
necessarily be hard. If you experience a behavior different from this
description, please search through this documentation and you'll find your
answers.
</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="softreq"></a>2.1. Software requirements</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>POSIX system</strong></span> - You need a POSIX-compatible
  shell and POSIX-compatible system tools like grep, sed, awk, etc. in your
  path.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>GNU make</strong></span> 3.81 or later
</p></li><li class="listitem"><p>
  <span class="bold"><strong>binutils</strong></span> - GNU binutils 2.11 or later
  is known to work.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>compiler</strong></span> - We mostly use gcc, the
  recommended versions on x86 are 2.95 and 3.4+. On PowerPC, use 4.x+.
  icc 10.1+ is also known to work.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Xorg/XFree86</strong></span> - recommended version is
  4.3 or later. Make sure the
  <span class="bold"><strong>development packages</strong></span> are installed,
  too, otherwise it won't work.
  You don't absolutely need X, some video output drivers work without it.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>FreeType</strong></span> - 2.0.9 or later is required
  for the OSD and subtitles
</p></li><li class="listitem"><p>
  <span class="bold"><strong>ALSA</strong></span> - optional, for ALSA audio output
  support. At least 0.9.0rc4 is required.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libjpeg</strong></span> -
  required for the optional JPEG video output driver
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libpng</strong></span> -
  required for the optional PNG video output driver
</p></li><li class="listitem"><p>
  <span class="bold"><strong>directfb</strong></span> - optional, 0.9.22 or later
  required for the directfb/dfbmga video output drivers
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lame</strong></span> - 3.98.3 or later,
  necessary for encoding MP3 audio with <span class="application">MEncoder</span>
</p></li><li class="listitem"><p>
  <span class="bold"><strong>zlib</strong></span> - recommended, many codecs use it.
</p></li><li class="listitem"><p>
  <span class="bold"><strong><a class="ulink" href="http://www.live555.com/mplayer/" target="_top">LIVE555 Streaming Media</a></strong></span>
  - optional, needed for some RTSP/RTP streams
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cdparanoia</strong></span> - optional, for CDDA support
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libxmms</strong></span> - optional, for XMMS input plugin
  support. At least 1.2.7 is required.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libsmb</strong></span> - optional, for SMB networking support
</p></li><li class="listitem"><p>
  <span class="bold"><strong><a class="ulink" href="http://www.underbit.com/products/mad/" target="_top">libmad</a></strong></span>
  - optional, for fast integer-only MP3 decoding on FPU-less platforms
</p></li></ul></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="features"></a>2.2. Features</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Decide if you need GUI. If you do, see the <a class="link" href="#gui" title="2.3. What about the GUI?">GUI</a>
  section before compiling.
</p></li><li class="listitem"><p>
  If you want to install <span class="application">MEncoder</span> (our great
  all-purpose encoder), see the
  <a class="link" href="#mencoder" title="Chapter 6. Basic usage of MEncoder"><span class="application">MEncoder</span></a> section.
</p></li><li class="listitem"><p>
  If you have a V4L compatible <span class="bold"><strong>TV tuner</strong></span> card,
  and wish to watch/grab and encode movies with
  <span class="application">MPlayer</span>,
  read the <a class="link" href="#tv-input" title="3.12. TV input">TV input</a> section.
</p></li><li class="listitem"><p>
  If you have a V4L compatible <span class="bold"><strong>radio tuner</strong></span>
  card, and wish to listen and capture sound with
  <span class="application">MPlayer</span>,
  read the <a class="link" href="#radio" title="3.14. Radio">radio</a> section.
</p></li><li class="listitem"><p>
  There is a neat <span class="bold"><strong>OSD Menu</strong></span> support ready to be
  used. Check the <a class="link" href="#subosd" title="3.2. Subtitles and OSD">OSD menu</a> section.
</p></li></ul></div><p>
Then build <span class="application">MPlayer</span>:
</p><pre class="screen">
./configure
make
make install
</pre><p>
</p><p>
At this point, <span class="application">MPlayer</span> is ready to use.
Check if you have a <tt class="filename">codecs.conf</tt> file in your home
directory at (<tt class="filename">~/.mplayer/codecs.conf</tt>) left from old
<span class="application">MPlayer</span> versions. If you find one, remove it.
</p><p>
Debian users can build a .deb package for themselves, it's very simple.
Just exec
</p><pre class="screen">fakeroot debian/rules binary</pre><p>
in <span class="application">MPlayer</span>'s root directory. See
<a class="link" href="#debian" title="5.1.1. Debian packaging">Debian packaging</a> for detailed instructions.
</p><p>
<span class="bold"><strong>Always browse the output of</strong></span>
<tt class="filename">./configure</tt>, and the
<tt class="filename">config.log</tt> file, they contain information about
what will be built, and what will not. You may also want to view
<tt class="filename">config.h</tt> and <tt class="filename">config.mak</tt> files.
If you have some libraries installed, but not detected by
<tt class="filename">./configure</tt>, then check if you also have the proper
header files (usually the -dev packages) and their version matches. The
<tt class="filename">config.log</tt> file usually tells you what is missing.
</p><p>
Though not mandatory, the fonts should be installed in order to gain OSD,
and subtitle functionality. The recommended method is installing a TTF
font file and telling <span class="application">MPlayer</span> to use it.
See the <a class="link" href="#subosd" title="3.2. Subtitles and OSD">Subtitles and OSD</a> section for details.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gui"></a>2.3. What about the GUI?</h2></div></div></div><p>
The GUI needs GTK 1.2.x or GTK 2.0 (it isn't fully GTK, but the panels are),
so <code class="systemitem">GTK</code> (and the devel stuff, usually
called <code class="systemitem">gtk-dev</code>) has to be installed.
You can build it by specifying <tt class="option">--enable-gui</tt> during
<tt class="filename">./configure</tt>. Then, to turn on GUI mode, you have to
execute the <span class="command"><strong>gmplayer</strong></span> binary.
</p><p>
As <span class="application">MPlayer</span> doesn't have a skin included, you
have to download at least one if you want to use the GUI. See Skins at the <a class="ulink" href="http://www.mplayerhq.hu/dload.html" target="_top">download page</a>.
A skin should be extracted to the usual system-wide directory <tt class="filename">$PREFIX/share/mplayer/skins</tt> or to the user
specific directory <tt class="filename">$HOME/.mplayer/skins</tt>
and resides as a subdirectory there.
<span class="application">MPlayer</span> by default first looks in the user specific
directory, then the system-wide directory for a subdirectory named
<tt class="filename">default</tt> (which
simply can be a link to your favourite skin) to load the skin, but
you can use the <tt class="option">-skin <em class="replaceable"><code>myskin</code></em></tt>
option, or the <code class="literal">skin=myskin</code> config file directive to use
a different skin from the <tt class="filename">skins</tt>
directories.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="fonts-osd"></a>2.4. Fonts and OSD</h2></div></div></div><p>
You need to tell <span class="application">MPlayer</span> which font to use to
enjoy OSD and subtitles. Any TrueType font or special bitmap fonts will
work. However, TrueType fonts are recommended as they look far better,
can be properly scaled to the movie size and cope better with different
encodings.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="truetype-fonts"></a>2.4.1. TrueType fonts</h3></div></div></div><p>
There are two ways to get TrueType fonts to work. The first is to pass
the <tt class="option">-font</tt> option to specify a TrueType font file on
the command line. This option will be a good candidate to put in your
configuration file (see the manual page for details).
The second is to create a symlink called <tt class="filename">subfont.ttf</tt>
to the font file of your choice. Either
</p><pre class="screen">
ln -s <em class="replaceable"><code>/path/to/sample_font.ttf</code></em> ~/.mplayer/subfont.ttf
</pre><p>
for each user individually or a system-wide one:
</p><pre class="screen">
ln -s <em class="replaceable"><code>/path/to/sample_font.ttf</code></em> $PREFIX/share/mplayer/subfont.ttf
</pre><p>
</p><p>
If <span class="application">MPlayer</span> was compiled with
<code class="systemitem">fontconfig</code> support, the above methods
won't work, instead <tt class="option">-font</tt> expects a
<code class="systemitem">fontconfig</code> font name
and defaults to the sans-serif font. Example:
</p><pre class="screen">
mplayer -font <em class="replaceable"><code>'Bitstream Vera Sans'</code></em> <em class="replaceable"><code>anime.mkv</code></em>
</pre><p>
</p><p>
To get a list of fonts known to
<code class="systemitem">fontconfig</code>,
use <span class="command"><strong>fc-list</strong></span>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="bitmap-fonts"></a>2.4.2. bitmap fonts</h3></div></div></div><p>
If for some reason you wish or need to employ bitmap fonts, download a set
from our homepage. You can choose between various
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/fonts/" target="_top">ISO fonts</a>
and some sets of fonts
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/fonts/" target="_top">contributed by users</a>
in various encodings.
</p><p>
Uncompress the file you downloaded to
<tt class="filename">~/.mplayer</tt> or
<tt class="filename">$PREFIX/share/mplayer</tt>.
Then rename or symlink one of the extracted directories to
<tt class="filename">font</tt>, for example:
</p><pre class="screen">
ln -s <em class="replaceable"><code>~/.mplayer/arial-24</code></em> ~/.mplayer/font
</pre><p>
</p><pre class="screen">
ln -s <em class="replaceable"><code>$PREFIX/share/mplayer/arial-24</code></em> $PREFIX/share/mplayer/font
</pre><p>
</p><p>
Fonts should have an appropriate <tt class="filename">font.desc</tt> file
which maps Unicode font positions to the actual code page of the
subtitle text. Another solution is to have UTF-8-encoded subtitles
and use the <tt class="option">-utf8</tt> option or give the subtitles
file the same name as your video file with a <tt class="filename">.utf</tt>
extension and have it in the same directory as the video file.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="osdmenu"></a>2.4.3. OSD menu</h3></div></div></div><p>
<span class="application">MPlayer</span> has a completely user-definable
OSD Menu interface.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
the Preferences menu is currently UNIMPLEMENTED!
</p></div><div class="orderedlist"><p class="title"><b>Installation</b></p><ol class="orderedlist" type="1"><li class="listitem"><p>
  compile <span class="application">MPlayer</span> by passing the
  <tt class="option">--enable-menu</tt> to <tt class="filename">./configure</tt>
</p></li><li class="listitem"><p>
  make sure you have an OSD font installed
</p></li><li class="listitem"><p>
  copy <tt class="filename">etc/menu.conf</tt> to your
  <tt class="filename">.mplayer</tt> directory
</p></li><li class="listitem"><p>
  copy <tt class="filename">etc/input.conf</tt> to your
  <tt class="filename">.mplayer</tt> directory, or to the
  system-wide <span class="application">MPlayer</span> config dir (default:
  <tt class="filename">/usr/local/etc/mplayer</tt>)
</p></li><li class="listitem"><p>
  check and edit <tt class="filename">input.conf</tt> to enable menu movement keys
  (it is described there).
</p></li><li class="listitem"><p>
  start <span class="application">MPlayer</span> by the following example:
  </p><pre class="screen">mplayer -menu <em class="replaceable"><code>file.avi</code></em></pre><p>
  </p></li><li class="listitem"><p>
  push any menu key you defined
</p></li></ol></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="codec-installation"></a>2.5. Codec installation</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="xvid"></a>2.5.1. Xvid</h3></div></div></div><p>
<a class="ulink" href="http://www.xvid.org" target="_top">Xvid</a> is a free software MPEG-4 ASP
compliant video codec. Note that Xvid is not necessary to decode Xvid-encoded
video. <code class="systemitem">libavcodec</code> is used by
default as it offers better speed.
</p><div class="procedure"><a name="idp2762821424"></a><p class="title"><b>Installing <code class="systemitem">Xvid</code></b></p><p>
  Like most open source software, it is available in two flavors:
  <a class="ulink" href="http://www.xvid.org/downloads.html" target="_top">official releases</a>
  and the CVS version.
  The CVS version is usually stable enough to use, as most of the time it
  features fixes for bugs that exist in releases.
  Here is what to do to make <code class="systemitem">Xvid</code>
  CVS work with <span class="application">MEncoder</span>:
</p><ol class="procedure" type="1"><li class="step"><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@cvs.xvid.org:/xvid login</pre><p>
</p></li><li class="step"><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@cvs.xvid.org:/xvid co xvidcore</pre><p>
</p></li><li class="step"><p>
  </p><pre class="screen">cd xvidcore/build/generic</pre><p>
</p></li><li class="step"><p>
  </p><pre class="screen">./bootstrap.sh &amp;&amp; ./configure</pre><p>
  You may have to add some options (examine the output of
  <span class="command"><strong>./configure --help</strong></span>).
</p></li><li class="step"><p>
  </p><pre class="screen">make &amp;&amp; make install</pre><p>
</p></li><li class="step"><p>
  Recompile <span class="application">MPlayer</span>.
</p></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="x264"></a>2.5.2. <code class="systemitem">x264</code></h3></div></div></div><p>
<a class="ulink" href="http://developers.videolan.org/x264.html" target="_top"><code class="systemitem">x264</code></a>
is a library for creating H.264 video.
<span class="application">MPlayer</span> sources are updated whenever
an <code class="systemitem">x264</code> API change
occurs, so it is always suggested to use
<span class="application">MPlayer</span> from Subversion.
</p><p>
If you have a GIT client installed, the latest x264
sources can be gotten with this command:
</p><pre class="screen">git clone git://git.videolan.org/x264.git</pre><p>

Then build and install in the standard way:
</p><pre class="screen">./configure &amp;&amp; make &amp;&amp; make install</pre><p>

Now rerun <tt class="filename">./configure</tt> for
<span class="application">MPlayer</span> to pick up
<code class="systemitem">x264</code> support.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="amr"></a>2.5.3. AMR</h3></div></div></div><p>
MPlayer can use the OpenCORE AMR libraries through FFmpeg.
Download the libraries for AMR-NB and AMR-WB from the
<a class="ulink" href="http://sourceforge.net/projects/opencore-amr/" target="_top">opencore-amr</a>
project and install them according to the instructions on that page.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="xmms"></a>2.5.4. XMMS</h3></div></div></div><p>
<span class="application">MPlayer</span> can use <span class="application">XMMS</span> input
plugins to play many file formats. There are plugins for SNES game tunes, SID
tunes (from Commodore 64), many Amiga formats, .xm, .it, VQF, Musepack, Bonk,
shorten and many others. You can find them at the
<a class="ulink" href="http://www.xmms.org/plugins.php?category=input" target="_top">XMMS input plugin page</a>.
</p><p>
For this feature you need to have <span class="application">XMMS</span> and compile
<span class="application">MPlayer</span> with
<tt class="filename">./configure --enable-xmms</tt>.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rtc"></a>2.6. RTC</h2></div></div></div><p>
There are three timing methods in <span class="application">MPlayer</span>.

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>To use the old method</strong></span>, you don't have to do
  anything. It uses <code class="systemitem">usleep()</code> to tune
  A/V sync, with +/- 10ms accuracy. However sometimes the sync has to be
  tuned even finer.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>The new timer</strong></span> code uses the RTC (RealTime
  Clock) for this task, because it has precise 1ms timers.
  The <tt class="option">-rtc</tt> option enables it,
  but a properly set up kernel is required.
  If you are running kernel 2.4.19pre8 or later you can adjust the maximum RTC
  frequency for normal users through the <code class="systemitem">/proc
  </code> file system. Use one of the following two commands to
  enable RTC for normal users:
  </p><pre class="screen">echo 1024 &gt; /proc/sys/dev/rtc/max-user-freq</pre><p>
  </p><pre class="screen">sysctl dev/rtc/max-user-freq=1024</pre><p>
  You can make this setting permanent by adding the latter to
  <tt class="filename">/etc/sysctl.conf</tt>.
  </p><p>
  You can see the new timer's efficiency in the status line.
  The power management functions of some notebook BIOSes with speedstep CPUs
  interact badly with RTC. Audio and video may get out of sync. Plugging the
  external power connector in before you power up your notebook seems to help.
  In some hardware combinations (confirmed during usage of non-DMA DVD drive
  on an ALi1541 board) usage of the RTC timer causes skippy playback. It's
  recommended to use the third method in these cases.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>The third timer code</strong></span> is turned on with the
  <tt class="option">-softsleep</tt> option. It has the efficiency of the RTC, but it
  doesn't use RTC. On the other hand, it requires more CPU.
</p></li></ul></div><p>
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="usage"></a>Chapter 3. Usage</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect1"><a href="#commandline">3.1. Command line</a></span></dt><dt><span class="sect1"><a href="#subosd">3.2. Subtitles and OSD</a></span></dt><dt><span class="sect1"><a href="#control">3.3. Control</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ctrl-cfg">3.3.1. Controls configuration</a></span></dt><dt><span class="sect2"><a href="#lirc">3.3.2. Control from LIRC</a></span></dt><dt><span class="sect2"><a href="#slave-mode">3.3.3. Slave mode</a></span></dt></dl></dd><dt><span class="sect1"><a href="#streaming">3.4. Streaming from network or pipes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#streaming-save">3.4.1. Saving streamed content</a></span></dt></dl></dd><dt><span class="sect1"><a href="#dvd">3.5. DVD playback</a></span></dt><dd><dl><dt><span class="sect2"><a href="#region_code">3.5.1. region code</a></span></dt></dl></dd><dt><span class="sect1"><a href="#vcd">3.6. VCD playback</a></span></dt><dt><span class="sect1"><a href="#edl">3.7. Edit Decision Lists (EDL)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#edl_using">3.7.1. Using an EDL file</a></span></dt><dt><span class="sect2"><a href="#edl_making">3.7.2. Making an EDL file</a></span></dt></dl></dd><dt><span class="sect1"><a href="#networksync">3.8. Synchronized playback over a network</a></span></dt><dt><span class="sect1"><a href="#advaudio-surround">3.9. Surround/Multichannel playback</a></span></dt><dd><dl><dt><span class="sect2"><a href="#advaudio-surround-DVD">3.9.1. DVDs</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-stereoinfour">3.9.2. Playing stereo files to four speakers</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-passthrough">3.9.3. AC-3/DTS Passthrough</a></span></dt><dt><span class="sect2"><a href="#hwmpa-surround-passthrough">3.9.4. MPEG audio Passthrough</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-matrix">3.9.5. Matrix-encoded audio</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-hrtf">3.9.6. Surround emulation in headphones</a></span></dt><dt><span class="sect2"><a href="#advaudio-surround-troubleshooting">3.9.7. Troubleshooting</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advaudio-channels">3.10. Channel manipulation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#advaudio-channels-general">3.10.1. General information</a></span></dt><dt><span class="sect2"><a href="#advaudio-channels-mono">3.10.2. Playing mono with two speakers</a></span></dt><dt><span class="sect2"><a href="#advaudio-channels-copying">3.10.3. Channel copying/moving</a></span></dt><dt><span class="sect2"><a href="#advaudio-channels-mixing">3.10.4. Channel mixing</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advaudio-volume">3.11. Software Volume adjustment</a></span></dt><dt><span class="sect1"><a href="#tv-input">3.12. TV input</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tv-tips">3.12.1. Usage tips</a></span></dt><dt><span class="sect2"><a href="#tv-examples">3.12.2. Examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tv-teletext">3.13. Teletext</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tv-teletext-implementation-notes">3.13.1. Implementation notes</a></span></dt><dt><span class="sect2"><a href="#tv-teletext-usage">3.13.2. Using teletext</a></span></dt></dl></dd><dt><span class="sect1"><a href="#radio">3.14. Radio</a></span></dt><dd><dl><dt><span class="sect2"><a href="#radio-tips">3.14.1. Usage tips</a></span></dt><dt><span class="sect2"><a href="#radio-examples">3.14.2. Examples</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="commandline"></a>3.1. Command line</h2></div></div></div><p>
<span class="application">MPlayer</span> utilizes a complex playtree. Options passed
on the command line can apply to all files/URLs or just to specific ones
depending on their position. For example
</p><pre class="screen">mplayer -vfm ffmpeg movie1.avi movie2.avi</pre><p>
will use FFmpeg decoders for both files, but
</p><pre class="screen">
mplayer -vfm ffmpeg <em class="replaceable"><code>movie1.avi</code></em> <em class="replaceable"><code>movie2.avi</code></em> -vfm dmo
</pre><p>
will play the second file with a DMO decoder.
</p><p>
You can group filenames/URLs together using <code class="literal">{</code> and
<code class="literal">}</code>. It is useful with option <tt class="option">-loop</tt>:
</p><pre class="screen">mplayer { 1.avi -loop 2 2.avi } -loop 3</pre><p>
The above command will play files in this order: 1, 1, 2, 1, 1, 2, 1, 1, 2.
</p><p>
Playing a file:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>options</code></em>] [<em class="replaceable"><code>path</code></em>/]<em class="replaceable"><code>filename</code></em>
</pre><p>
</p><p>
Another way to play a file:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>options</code></em>] <em class="replaceable"><code>file:///uri-escaped-path</code></em>
</pre><p>
</p><p>
Playing more files:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>default options</code></em>] [<em class="replaceable"><code>path</code></em>/]<em class="replaceable"><code>filename1</code></em> [<em class="replaceable"><code>options for filename1</code></em>] <em class="replaceable"><code>filename2</code></em> [<em class="replaceable"><code>options for filename2</code></em>] ...
</pre><p>
</p><p>
Playing VCD:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>options</code></em>] vcd://<em class="replaceable"><code>trackno</code></em> [-cdrom-device <em class="replaceable"><code>/dev/cdrom</code></em>]
</pre><p>
</p><p>
Playing DVD:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>options</code></em>] dvd://<em class="replaceable"><code>titleno</code></em> [-dvd-device <em class="replaceable"><code>/dev/dvd</code></em>]
</pre><p>
</p><p>
Playing from the WWW:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>options</code></em>] http://<em class="replaceable"><code>site.com/file.asf</code></em>
</pre><p>
(playlists can be used, too)
</p><p>
Playing from RTSP:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>options</code></em>] rtsp://<em class="replaceable"><code>server.example.com/streamName</code></em>
</pre><p>
</p><p>
Examples:
</p><pre class="screen">
mplayer -vo x11 <em class="replaceable"><code>/mnt/Films/Contact/contact2.mpg</code></em>
mplayer vcd://<em class="replaceable"><code>2</code></em> -cdrom-device <em class="replaceable"><code>/dev/hdc</code></em>
mplayer -afm 3 <em class="replaceable"><code>/mnt/DVDtrailers/alien4.vob</code></em>
mplayer dvd://<em class="replaceable"><code>1</code></em> -dvd-device <em class="replaceable"><code>/dev/hdc</code></em>
mplayer -abs 65536 -delay -0.4 -nobps <em class="replaceable"><code>~/movies/test.avi</code></em></pre><p>
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="subosd"></a>3.2. Subtitles and OSD</h2></div></div></div><p>
<span class="application">MPlayer</span> can display subtitles along with movie files.
Currently the following formats are supported:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>VOBsub</p></li><li class="listitem"><p>OGM</p></li><li class="listitem"><p>CC (closed caption)</p></li><li class="listitem"><p>MicroDVD</p></li><li class="listitem"><p>SubRip</p></li><li class="listitem"><p>SubViewer</p></li><li class="listitem"><p>Sami</p></li><li class="listitem"><p>VPlayer</p></li><li class="listitem"><p>RT</p></li><li class="listitem"><p>SSA</p></li><li class="listitem"><p>PJS (Phoenix Japanimation Society)</p></li><li class="listitem"><p>MPsub</p></li><li class="listitem"><p>AQTitle</p></li><li class="listitem"><p>
    <a class="ulink" href="http://unicorn.us.com/jacosub/" target="_top">JACOsub</a>
  </p></li></ul></div><p>
</p><p>
<span class="application">MPlayer</span> can dump the previously listed subtitle
formats (<span class="bold"><strong>except the three first</strong></span>) into the
following destination formats, with the given options:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>MPsub: <tt class="option">-dumpmpsub</tt></p></li><li class="listitem"><p>SubRip: <tt class="option">-dumpsrtsub</tt></p></li><li class="listitem"><p>MicroDVD: <tt class="option">-dumpmicrodvdsub</tt></p></li><li class="listitem"><p>JACOsub: <tt class="option">-dumpjacosub</tt></p></li><li class="listitem"><p>Sami: <tt class="option">-dumpsami</tt></p></li></ul></div><p>
</p><p>
<span class="application">MEncoder</span> can dump DVD subtitles into
<a class="link" href="#menc-feat-extractsub" title="6.9. Extracting DVD subtitles to VOBsub file">VOBsub</a> format.
</p><p>
The command line options differ slightly for the different formats:
</p><p><b>VOBsub subtitles. </b>
VOBsub subtitles consist of a big (some megabytes) <tt class="filename">.SUB</tt>
file, and optional <tt class="filename">.IDX</tt> and/or <tt class="filename">.IFO</tt>
files. If you have files like
<tt class="filename"><em class="replaceable"><code>sample.sub</code></em></tt>,
<tt class="filename"><em class="replaceable"><code>sample.ifo</code></em></tt> (optional),
<tt class="filename"><em class="replaceable"><code>sample.idx</code></em></tt> - you have to pass
<span class="application">MPlayer</span> the <tt class="option">-vobsub sample
[-vobsubid <em class="replaceable"><code>id</code></em>]</tt> options
(full path optional). The <tt class="option">-vobsubid</tt> option is like
<tt class="option">-sid</tt> for DVDs, you can choose between subtitle tracks
(languages) with it. In case that <tt class="option">-vobsubid</tt> is omitted,
<span class="application">MPlayer</span> will try to use the languages given by the
<tt class="option">-slang</tt> option and fall back to the
<code class="systemitem">langidx</code> in the <tt class="filename">.IDX</tt> file to set
the subtitle language. If it fails, there will be no subtitles.
</p><p><b>Other subtitles. </b>
The other formats consist of a single text file containing timing,
placement and text information. Usage: If you have a file like
<tt class="filename"><em class="replaceable"><code>sample.txt</code></em></tt>,
you have to pass the option <tt class="option">-sub
<em class="replaceable"><code>sample.txt</code></em></tt> (full path optional).
</p><div class="variablelist"><p class="title"><b>Adjusting subtitle timing and placement:</b></p><dl class="variablelist"><dt><span class="term"><tt class="option">-subdelay <em class="replaceable"><code>sec</code></em></tt></span></dt><dd><p>
    Delays subtitles by <tt class="option"><em class="replaceable"><code>sec</code></em></tt> seconds.
    Can be negative. The value is added to movie's time position counter.
  </p></dd><dt><span class="term"><tt class="option">-subfps <em class="replaceable"><code>RATE</code></em></tt></span></dt><dd><p>
    Specify frame/sec rate of subtitle file (float number).
  </p></dd><dt><span class="term"><tt class="option">-subpos <em class="replaceable"><code>0-100</code></em></tt></span></dt><dd><p>
    Specify the position of subtitles.
  </p></dd></dl></div><p>
If you experience a growing delay between the movie and the subtitles when
using a MicroDVD subtitle file, most likely the framerate of the movie and
the subtitle file are different. Please note that the MicroDVD subtitle
format uses absolute frame numbers for its timing, but there is no fps
information in it, and therefore the <tt class="option">-subfps</tt> option should
be used with this format. If you like to solve this problem permanently,
you have to manually convert the subtitle file framerate.
<span class="application">MPlayer</span> can do this
conversion for you:

</p><pre class="screen">
mplayer -dumpmicrodvdsub -fps <em class="replaceable"><code>subtitles_fps</code></em> -subfps <em class="replaceable"><code>avi_fps</code></em> \
    -sub <em class="replaceable"><code>subtitle_filename</code></em> <em class="replaceable"><code>dummy.avi</code></em>
</pre><p>
</p><p>
About DVD subtitles, read the <a class="link" href="#dvd" title="3.5. DVD playback">DVD</a> section.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="control"></a>3.3. Control</h2></div></div></div><p>
<span class="application">MPlayer</span> has a fully configurable, command
driven, control layer which lets you control
<span class="application">MPlayer</span> with keyboard, mouse, joystick or remote
control (using LIRC). See the man page for the complete list of keyboard controls.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ctrl-cfg"></a>3.3.1. Controls configuration</h3></div></div></div><p>
<span class="application">MPlayer</span> allows you bind any key/button to any
<span class="application">MPlayer</span> command using a simple config file.
The syntax consist of a key name followed by a command. The default config file location is
<tt class="filename">$HOME/.mplayer/input.conf</tt> but it can be overridden
using the <tt class="option">-input <em class="replaceable"><code>conf</code></em></tt> option
(relative path are relative to <tt class="filename">$HOME/.mplayer</tt>).
</p><p>
You can get a full list of supported key names by running
<span class="command"><strong>mplayer -input keylist</strong></span>
and a full list of available commands by running
<span class="command"><strong>mplayer -input cmdlist</strong></span>.
</p><div class="example"><a name="input_control_file"></a><p class="title"><b>Example 3.1. A simple input control file</b></p><div class="example-contents"><pre class="programlisting">
##
## MPlayer input control file
##

RIGHT seek +10
LEFT seek -10
- audio_delay 0.100
+ audio_delay -0.100
q quit
&gt; pt_step 1
&lt; pt_step -1
ENTER pt_step 1 1</pre></div></div><br class="example-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="lirc"></a>3.3.2. Control from LIRC</h3></div></div></div><p>
Linux Infrared Remote Control - use an easy to build home-brewed IR-receiver,
an (almost) arbitrary remote control and control your Linux box with it!
More about it on the <a class="ulink" href="http://www.lirc.org" target="_top">LIRC homepage</a>.
</p><p>
If you have the LIRC package installed, <tt class="filename">configure</tt> will
autodetect it. If everything went fine, <span class="application">MPlayer</span>
will print "<code class="systemitem">Setting up LIRC support...</code>"
on startup. If an error occurs it will tell you. If there is no message about
LIRC there is no support compiled in. That's it :-)
</p><p>
The application name for <span class="application">MPlayer</span> is - surprise -
<tt class="filename">mplayer</tt>. You can use any <span class="application">MPlayer</span>
commands and even pass more than one command by separating them with
<code class="literal">\n</code>.
Do not forget to enable the repeat flag in <tt class="filename">.lircrc</tt> when
it makes sense (seek, volume, etc). Here is an excerpt from a sample
<tt class="filename">.lircrc</tt>:
</p><pre class="programlisting">
begin
     button = VOLUME_PLUS
     prog = mplayer
     config = volume 1
     repeat = 1
end

begin
    button = VOLUME_MINUS
    prog = mplayer
    config = volume -1
    repeat = 1
end

begin
    button = CD_PLAY
    prog = mplayer
    config = pause
end

begin
    button = CD_STOP
    prog = mplayer
    config = seek 0 1\npause
end</pre><p>
If you do not like the standard location for the lirc-config file
(<tt class="filename">~/.lircrc</tt>) use the <tt class="option">-lircconf
<em class="replaceable"><code>filename</code></em></tt> switch to specify another
file.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="slave-mode"></a>3.3.3. Slave mode</h3></div></div></div><p>
The slave mode allows you to build simple frontends to
<span class="application">MPlayer</span>. When run with the
<tt class="option">-slave</tt> option <span class="application">MPlayer</span> will
read commands separated by a newline (\n) from stdin.
The commands are documented in the
<a class="ulink" href="../../tech/slave.txt" target="_top">slave.txt</a> file.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="streaming"></a>3.4. Streaming from network or pipes</h2></div></div></div><p>
<span class="application">MPlayer</span> can play files from the network, using the
HTTP, FTP, MMS or RTSP/RTP protocol.
</p><p>
Playing works simply by passing the URL on the command line.
<span class="application">MPlayer</span> honors the <code class="envar">http_proxy</code>
environment variable, using a proxy if available. Proxies can also be forced:
</p><pre class="screen">
mplayer <em class="replaceable"><code>http_proxy://proxy.micorsops.com:3128/http://micorsops.com:80/stream.asf</code></em>
</pre><p>
</p><p>
<span class="application">MPlayer</span> can read from stdin
(<span class="emphasis"><em>not</em></span> named pipes). This can for example be used to
play from FTP:
</p><pre class="screen">
wget <em class="replaceable"><code>ftp://micorsops.com/something.avi</code></em> -O - | mplayer -
</pre><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
It is also recommended to enable <tt class="option">-cache</tt> when playing
from the network:
</p><pre class="screen">
wget <em class="replaceable"><code>ftp://micorsops.com/something.avi</code></em> -O - | mplayer -cache 8192 -
</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="streaming-save"></a>3.4.1. Saving streamed content</h3></div></div></div><p>
Once you succeed in making <span class="application">MPlayer</span> play
your favorite internet stream, you can use the option
<tt class="option">-dumpstream</tt> to save the stream into a file.
For example:
</p><pre class="screen">
mplayer <em class="replaceable"><code>http://217.71.208.37:8006</code></em> -dumpstream -dumpfile <em class="replaceable"><code>stream.asf</code></em>
</pre><p>
will save the content streamed from
<em class="replaceable"><code>http://217.71.208.37:8006</code></em> into
<em class="replaceable"><code>stream.asf</code></em>.
This works with all protocols supported by
<span class="application">MPlayer</span>, like MMS, RTSP, and so forth.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dvd"></a>3.5. DVD playback</h2></div></div></div><p>
For the complete list of available options, please read the man page.
The syntax to play a standard DVD is as follows:
</p><pre class="screen">
mplayer dvd://<em class="replaceable"><code>&lt;track&gt;</code></em> [-dvd-device <em class="replaceable"><code>&lt;device&gt;</code></em>]
</pre><p>
</p><p>
Example:
</p><pre class="screen">mplayer dvd://1 -dvd-device /dev/hdc</pre><p>
</p><p>
If you have compiled <span class="application">MPlayer</span> with dvdnav support, the
syntax is the same, except that you need to use dvdnav:// instead of dvd://.
</p><p>
The default DVD device is <tt class="filename">/dev/dvd</tt>. If your setup
differs, make a symlink or specify the correct device on the command
line with the <tt class="option">-dvd-device</tt> option.
</p><p>
<span class="application">MPlayer</span> uses <code class="systemitem">libdvdread</code> and
<code class="systemitem">libdvdcss</code> for DVD playback and decryption. These two
libraries are contained in the
<span class="application">MPlayer</span> source tree, you do not have
to install them separately. You can also use system-wide versions of the two
libraries, but this solution is not recommended, as it can result in bugs,
library incompatibilities and slower speed.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
In case of DVD decoding problems, try disabling supermount, or any other such
facilities. Some RPC-2 drives may also require setting the region code.
</p></div><p><b>DVD decryption. </b>
DVD decryption is done by <code class="systemitem">libdvdcss</code>. The method
can be specified through the <code class="envar">DVDCSS_METHOD</code> environment
variable, see the manual page for details.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="region_code"></a>3.5.1. region code</h3></div></div></div><p>
DVD drives nowadays come with a nonsensical restriction labeled
<a class="ulink" href="http://en.wikipedia.org/wiki/DVD_region_code" target="_top">region code</a>.
This is a scheme to force DVD drives to only accept DVDs produced for one of
the six different regions into which the world was partitioned. How a group
of people can sit around a table, come up with such an idea and expect the
world of the 21st century to bow to their will is beyond anyone's guess.
</p><p>
Drives that enforce region settings through software only are also known as
RPC-1 drives, those that do it in hardware as RPC-2. RPC-2 drives allow
changing the region code five times before it remains fixed.
Under Linux you can use the
<a class="ulink" href="http://linvdr.org/projects/regionset/" target="_top">regionset</a> tool
to set the region code of your DVD drive.
</p><p>
Thankfully, it is possible to convert RPC-2 drives into RPC-1 drives through
a firmware upgrade. Feed the model number of your DVD drive into your favorite
search engine or have a look at the forum and download sections of
<a class="ulink" href="http://www.rpc1.org/" target="_top">"The firmware page"</a>.
While the usual caveats for firmware upgrades apply, experience with
getting rid of region code enforcement is generally positive.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vcd"></a>3.6. VCD playback</h2></div></div></div><p>
For the complete list of available options, please read the man page. The
Syntax for a standard Video CD (VCD) is as follows:
</p><pre class="screen">mplayer vcd://<em class="replaceable"><code>&lt;track&gt;</code></em> [-cdrom-device <em class="replaceable"><code>&lt;device&gt;</code></em>]</pre><p>
Example:
</p><pre class="screen">mplayer vcd://2 -cdrom-device /dev/hdc</pre><p>
The default VCD device is <tt class="filename">/dev/cdrom</tt>. If your setup
differs, make a symlink or specify the correct device on the command line
with the <tt class="option">-cdrom-device</tt> option.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
At least Plextor and some Toshiba SCSI CD-ROM drives have horrible performance
reading VCDs. This is because the CDROMREADRAW <code class="systemitem">ioctl</code>
is not fully implemented for these drives. If you have some knowledge of SCSI
programming, please <a class="ulink" href="../../tech/patches.txt" target="_top">help us</a>
implement generic SCSI support for VCDs.
</p></div><p>
In the meantime you can extract data from VCDs with
<a class="ulink" href="http://ftp.ntut.edu.tw/ftp/OS/Linux/packages/X/viewers/readvcd/" target="_top">readvcd</a>
and play the resulting file with <span class="application">MPlayer</span>.
</p><p><b>VCD structure. </b>
A Video CD (VCD) is made up of CD-ROM XA sectors, i.e. CD-ROM mode 2
form 1 and 2 tracks:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  The first track is in mode 2 form 2 format which means it uses L2
  error correction. The track contains an ISO-9660 file system with 2048
  bytes/sector. This file system contains VCD metadata information, as
  well as still frames often used in menus. MPEG segments for menus can
  also be stored in this first track, but the MPEGs have to be broken up
  into a series of 150-sector chunks. The ISO-9660 file system may
  contain other files or programs that are not essential for VCD
  operation.
</p></li><li class="listitem"><p>
  The second and remaining tracks are generally raw 2324 bytes/sector
  MPEG (movie) tracks, containing one MPEG PS data packet per
  sector. These are in mode 2 form 1 format, so they store more data per
  sector at the loss of some error correction. It is also legal to have
  CD-DA tracks in a VCD after the first track as well.
  On some operating systems there is some trickery that goes on to make
  these non-ISO-9660 tracks appear in a file system. On other operating
  systems like GNU/Linux this is not the case (yet). Here the MPEG data
  <span class="bold"><strong>cannot be mounted</strong></span>. As most movies are
  inside this kind of track, you should try <tt class="option">vcd://2</tt>
  first.
</p></li><li class="listitem"><p>
  There exist VCD disks without the first track (single track and no file system
  at all). They are still playable, but cannot be mounted.
</p></li><li class="listitem"><p>
  The definition of the Video CD standard is called the
  Philips "White Book" and it is not generally available online as it
  must be purchased from Philips. More detailed information about Video
  CDs can be found in the
  <a class="ulink" href="http://www.vcdimager.org/pub/vcdimager/manuals/0.7/vcdimager.html#SEC4" target="_top">vcdimager documentation</a>.
</p></li></ul></div><p>
</p><p><b>About .DAT files. </b>
The ~600 MB file visible on the first track of the mounted VCD is not a real
file! It is a so called ISO gateway, created to allow Windows to handle such
tracks (Windows does not allow raw device access to applications at all).
Under Linux you cannot copy or play such files (they contain garbage). Under
Windows it is possible as its iso9660 driver emulates the raw reading of
tracks in this file. To play a .DAT file you need the kernel driver which can
be found in the Linux version of PowerDVD. It has a modified iso9660 file system
(<tt class="filename">vcdfs/isofs-2.4.X.o</tt>) driver, which is able to emulate the
raw tracks through this shadow .DAT file. If you mount the disc using their
driver, you can copy and even play .DAT files with
<span class="application">MPlayer</span>. But it will not
work with the standard iso9660 driver of the Linux kernel! Use
<tt class="option">vcd://</tt> instead. Alternatives for VCD copying are the
new <a class="ulink" href="http://www.elis.rug.ac.be/~ronsse/cdfs/" target="_top">cdfs</a> kernel
driver (not part of the official kernel) that shows CD sessions as image files
and <a class="ulink" href="http://cdrdao.sf.net/" target="_top">cdrdao</a>, a bit-by-bit
CD grabbing/copying application.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="edl"></a>3.7. Edit Decision Lists (EDL)</h2></div></div></div><p>
The edit decision list (EDL) system allows you to automatically skip
or mute sections of videos during playback, based on a movie specific
EDL configuration file.
</p><p>
This is useful for those who may want to watch a film in "family-friendly"
mode. You can cut out any violence, profanity, Jar-Jar Binks .. from a movie
according to your own personal preferences. Aside from this, there are other
uses, like automatically skipping over commercials in video files you watch.
</p><p>
The EDL file format is pretty bare-bones. There is one command per line that
indicates what to do (skip/mute) and when to do it (using pts in seconds).
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="edl_using"></a>3.7.1. Using an EDL file</h3></div></div></div><p>
Include the <tt class="option">-edl &lt;filename&gt;</tt> flag when you run
<span class="application">MPlayer</span>, with the name of the EDL file you
want applied to the video.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="edl_making"></a>3.7.2. Making an EDL file</h3></div></div></div><p>
The current EDL file format is:
</p><pre class="programlisting">[begin second] [end second] [action]</pre><p>
Where the seconds are floating-point numbers and the action is either
<code class="literal">0</code> for skip or <code class="literal">1</code> for mute. Example:
</p><pre class="programlisting">
5.3   7.1    0
15    16.7   1
420   422    0
</pre><p>
This will skip from second 5.3 to second 7.1 of the video, then mute at
15 seconds, unmute at 16.7 seconds and skip from second 420 to second 422
of the video. These actions will be performed when the playback timer
reaches the times given in the file.
</p><p>
To create an EDL file to work from, use the <tt class="option">-edlout
&lt;filename&gt;</tt> flag. During playback, just hit <span class="keycap"><b>i</b></span> to
mark the beginning and end of a skip block.
A corresponding entry will be written to the file for that time.
You can then go back and fine-tune the generated EDL file as well as
change the default operation which is to skip the block described by each line.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="networksync"></a>3.8. Synchronized playback over a network</h2></div></div></div><p>
Multiple instances of <span class="application">MPlayer</span> can synchronize
playback over a network. This is useful for creating "video walls" with
multiple screens controlled by different computers. Each
<span class="application">MPlayer</span> instance can
play a different video, but they all will try to stay at the same time offset
in the file. It is recommended but not necessary to encode the video files
using the same codec and parameters.
</p><p>The relevant options are <tt class="option">-udp-master</tt>,
  <tt class="option">-udp-slave</tt>, <tt class="option">-udp-ip</tt>,
  <tt class="option">-udp-port</tt>, and <tt class="option">-udp-seek-threshold</tt>.
</p><p>
If <tt class="option">-udp-master</tt> is given, <span class="application">MPlayer</span>
sends a datagram to <tt class="option">-udp-ip</tt> (default: 127.0.0.1)
on <tt class="option">-udp-port</tt> (default: 23867) just before playing each frame.
The datagram indicates the master's position in the file. If
<tt class="option">-udp-slave</tt> is given, <span class="application">MPlayer</span> listens on
<tt class="option">-udp-ip</tt>/<tt class="option">-udp-port</tt>
and matches the master's position. Setting <tt class="option">-udp-ip</tt> to the
master's broadcast address allows multiple slaves having the same broadcast
address to sync to the master. Note that this feature assumes an
ethernet-like low-latency network connection. Your mileage may vary on high
latency networks.
</p><p>
For example, assume 8 computers are on a network, with IP addresses 192.168.0.1
through 192.168.0.8. Assume the first computer is to be the master. Running
ifconfig on all the machines lists "Bcast:192.168.0.255". On the master, run:
</p><pre class="screen">
mplayer -udp-master -udp-ip 192.168.0.255 video1.mpg
</pre><p>
On each slave, run:
</p><pre class="screen">
mplayer -udp-slave -udp-ip 192.168.0.255 videoN.mpg
</pre><p>
Seeking, pausing and even playback speed adjustment (see the
<tt class="option">-input</tt> option) can be done on the master, and all the slaves
will follow. When the master exits, it sends out a "bye" message which causes
the slaves to exit as well.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advaudio-surround"></a>3.9. Surround/Multichannel playback</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-surround-DVD"></a>3.9.1. DVDs</h3></div></div></div><p>
Most DVDs and many other files include surround sound.
<span class="application">MPlayer</span> supports surround playback but does not
enable it by default because stereo equipment is by far more common. To play a
file that has more than two channels of audio use <tt class="option">-channels</tt>.
For example, to play a DVD with 5.1 audio:
</p><pre class="screen">mplayer dvd://1 -channels 6</pre><p>
Note that despite the name "5.1" there are actually six discrete channels.
If you have surround sound equipment it is safe to put the
<tt class="option">channels</tt> option in your <span class="application">MPlayer</span>
configuration file <tt class="filename">~/.mplayer/config</tt>. For example, to make
quadraphonic playback the default, add this line:
</p><pre class="programlisting">channels=4</pre><p>
<span class="application">MPlayer</span> will then output audio in four channels when
all four channels are available.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-surround-stereoinfour"></a>3.9.2. Playing stereo files to four speakers</h3></div></div></div><p>
<span class="application">MPlayer</span> does not duplicate any channels by default,
and neither do most audio drivers. If you want to do that manually:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af channels=2:2:0:1:0:0</pre><p>
See the section on
<a class="link" href="#advaudio-channels-copying" title="3.10.3. Channel copying/moving">channel copying</a> for an
explanation.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-surround-passthrough"></a>3.9.3. AC-3/DTS Passthrough</h3></div></div></div><p>
DVDs usually have surround audio encoded in AC-3 (Dolby Digital) or DTS
(Digital Theater System) format. Some modern audio equipment is capable of
decoding these formats internally. <span class="application">MPlayer</span> can be
configured to relay the audio data without decoding it. This will only work if
you have a S/PDIF (Sony/Philips Digital Interface) jack in your sound card, or
if you are passing audio over HDMI.
</p><p>
If your audio equipment can decode both AC-3 and DTS, you can safely enable
passthrough for both formats. Otherwise, enable passthrough for only the format
your equipment supports.
</p><div class="itemizedlist"><p class="title"><b>To enable passthrough on the command line:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  For AC-3 only, use <tt class="option">-ac hwac3</tt>
</p></li><li class="listitem"><p>
  For DTS only, use <tt class="option">-ac hwdts</tt>
</p></li><li class="listitem"><p>
  For both AC-3 and DTS, use <tt class="option">-afm hwac3</tt>
</p></li></ul></div><div class="itemizedlist"><p class="title"><b>To enable passthrough in the <span class="application">MPlayer</span>
  configuration file: </b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  For AC-3 only, use <tt class="option">ac=hwac3,</tt>
</p></li><li class="listitem"><p>
  For DTS only, use <tt class="option">ac=hwdts,</tt>
</p></li><li class="listitem"><p>
  For both AC-3 and DTS, use <tt class="option">afm=hwac3</tt>
</p></li></ul></div><p>
Note that there is a comma (",") at the end of
<tt class="option">ac=hwac3,</tt> and <tt class="option">ac=hwdts,</tt>. This will make
<span class="application">MPlayer</span> fall back on the codecs it normally uses when
playing a file that does not have AC-3 or DTS audio.
<tt class="option">afm=hwac3</tt> does not need a comma;
<span class="application">MPlayer</span> will fall back anyway when an audio family
is specified.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="hwmpa-surround-passthrough"></a>3.9.4. MPEG audio Passthrough</h3></div></div></div><p>
Digital TV transmissions (such as DVB and ATSC) and some DVDs usually have
MPEG audio streams (in particular MP2).
Some MPEG hardware decoders such as full-featured DVB cards and DXR2
adapters can natively decode this format.
<span class="application">MPlayer</span> can be configured to relay the audio data
without decoding it.
</p><p>
To use this codec:
</p><pre class="screen"> mplayer -ac hwmpa </pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-surround-matrix"></a>3.9.5. Matrix-encoded audio</h3></div></div></div><p>
<span class="emphasis"><em>***TODO***</em></span>
</p><p>
This section has yet to be written and cannot be completed until somebody
provides sample files for us to test. If you have any matrix-encoded audio
files, know where to find some, or have any information that could be helpful,
please send a message to the
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-docs" target="_top">MPlayer-DOCS</a>
mailing list. Put "[matrix-encoded audio]" in the subject line.
</p><p>
If no files or further information are forthcoming this section will be dropped.
</p><p>
Good links:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <a class="ulink" href="http://electronics.howstuffworks.com/surround-sound5.htm" target="_top">http://electronics.howstuffworks.com/surround-sound5.htm</a>
</p></li><li class="listitem"><p>
  <a class="ulink" href="http://www.extremetech.com/article2/0,1697,1016875,00.asp" target="_top">http://www.extremetech.com/article2/0,1697,1016875,00.asp</a>
</p></li></ul></div><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-surround-hrtf"></a>3.9.6. Surround emulation in headphones</h3></div></div></div><p>
<span class="application">MPlayer</span> includes an HRTF (Head Related Transfer
Function) filter based on an
<a class="ulink" href="http://sound.media.mit.edu/KEMAR.html" target="_top">MIT project</a>
wherein measurements were taken from microphones mounted on a dummy human head.
</p><p>
Although it is not possible to exactly imitate a surround system,
<span class="application">MPlayer</span>'s HRTF filter does provide more spatially
immersive audio in 2-channel headphones. Regular downmixing simply combines all
the channels into two; besides combining the channels, <tt class="option">hrtf</tt>
generates subtle echoes, increases the stereo separation slightly, and alters
the volume of some frequencies. Whether HRTF sounds better may be dependent on
the source audio and a matter of personal taste, but it is definitely worth
trying out.
</p><p>
To play a DVD with HRTF:
</p><pre class="screen">mplayer dvd://1 -channels 6 -af hrtf</pre><p>
</p><p>
<tt class="option">hrtf</tt> only works well with 5 or 6 channels. Also,
<tt class="option">hrtf</tt> requires 48 kHz audio. DVD audio is already 48 kHz, but if
you have a file with a different sampling rate that you want to play using
<tt class="option">hrtf</tt> you must resample it:
</p><pre class="screen">
mplayer <em class="replaceable"><code>filename</code></em> -channels 6 -af resample=48000,hrtf
</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-surround-troubleshooting"></a>3.9.7. Troubleshooting</h3></div></div></div><p>
If you do not hear any sound out of your surround channels, check your mixer
settings with a mixer program such as <span class="application">alsamixer</span>;
audio outputs are often muted and set to zero volume by default.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advaudio-channels"></a>3.10. Channel manipulation</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-channels-general"></a>3.10.1. General information</h3></div></div></div><p>
Unfortunately, there is no standard for how channels are ordered. The orders
listed below are those of AC-3 and are fairly typical; try them and see if your
source matches. Channels are numbered starting with 0.

</p><div class="orderedlist"><p class="title"><b>mono</b></p><ol class="orderedlist compact" type="1"><li class="listitem" value="0"><p>center</p></li></ol></div><p>

</p><div class="orderedlist"><p class="title"><b>stereo</b></p><ol class="orderedlist compact" type="1"><li class="listitem" value="0"><p>left</p></li><li class="listitem"><p>right</p></li></ol></div><p>

</p><div class="orderedlist"><p class="title"><b>quadraphonic</b></p><ol class="orderedlist compact" type="1"><li class="listitem" value="0"><p>left front</p></li><li class="listitem"><p>right front</p></li><li class="listitem"><p>left rear</p></li><li class="listitem"><p>right rear</p></li></ol></div><p>

</p><div class="orderedlist"><p class="title"><b>surround 4.0</b></p><ol class="orderedlist compact" type="1"><li class="listitem" value="0"><p>left front</p></li><li class="listitem"><p>right front</p></li><li class="listitem"><p>center rear</p></li><li class="listitem"><p>center front</p></li></ol></div><p>

</p><div class="orderedlist"><p class="title"><b>surround 5.0</b></p><ol class="orderedlist compact" type="1"><li class="listitem" value="0"><p>left front</p></li><li class="listitem"><p>right front</p></li><li class="listitem"><p>left rear</p></li><li class="listitem"><p>right rear</p></li><li class="listitem"><p>center front</p></li></ol></div><p>

</p><div class="orderedlist"><p class="title"><b>surround 5.1</b></p><ol class="orderedlist compact" type="1"><li class="listitem" value="0"><p>left front</p></li><li class="listitem"><p>right front</p></li><li class="listitem"><p>left rear</p></li><li class="listitem"><p>right rear</p></li><li class="listitem"><p>center front</p></li><li class="listitem"><p>subwoofer</p></li></ol></div><p>
</p><p>
The <tt class="option">-channels</tt> option is used to request the number of
channels from the audio decoder. Some audio codecs use the number of specified
channels to decide if downmixing the source is necessary. Note that this does
not always affect the number of output channels. For example, using
<tt class="option">-channels 4</tt> to play a stereo MP3 file will still result in
2-channel output since the MP3 codec will not produce the extra channels.
</p><p>
The <tt class="option">channels</tt> audio filter can be used to create or remove
channels and is useful for controlling the number of channels sent to the sound
card. See the following sections for more information on channel manipulation.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-channels-mono"></a>3.10.2. Playing mono with two speakers</h3></div></div></div><p>
Mono sounds a lot better when played through two speakers - especially when
using headphones. Audio files that truly have one channel are automatically
played through two speakers; unfortunately, most files with mono sound are
actually encoded as stereo with one channel silent. The easiest and most
foolproof way to make both speakers output the same audio is the
<tt class="option">extrastereo</tt> filter:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af extrastereo=0</pre><p>
</p><p>
This averages both channels, resulting in both channels being half as loud as
the original. The next sections have examples of other ways to do this without a
volume decrease, but they are more complex and require different options
depending on which channel to keep. If you really need to maintain the volume,
it may be easier to experiment with the <tt class="option">volume</tt> filter and find
the right value. For example:
</p><pre class="screen">
mplayer <em class="replaceable"><code>filename</code></em> -af extrastereo=0,volume=5
</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-channels-copying"></a>3.10.3. Channel copying/moving</h3></div></div></div><p>
The <tt class="option">channels</tt> filter can move any or all channels.
Setting up all the suboptions for the <tt class="option">channels</tt>
filter can be complicated and takes a little care.

</p><div class="orderedlist"><ol class="orderedlist compact" type="1"><li class="listitem"><p>
  Decide how many output channels you need. This is the first suboption.
</p></li><li class="listitem"><p>
  Count how many channel moves you will do. This is the second suboption. Each
  channel can be moved to several different channels at the same time, but keep
  in mind that when a channel is moved (even if to only one destination) the
  source channel will be empty unless another channel is moved into it. To copy
  a channel, keeping the source the same, simply move the channel into both the
  destination and the source. For example:
  </p><pre class="programlisting">
channel 2 --&gt; channel 3
channel 2 --&gt; channel 2</pre><p>
</p></li><li class="listitem"><p>
  Write out the channel copies as pairs of suboptions. Note that the first
  channel is 0, the second is 1, etc. The order of these suboptions does not
  matter as long as they are properly grouped into
  <em class="replaceable"><code>source:destination</code></em> pairs.
</p></li></ol></div><p>
</p><h4><a name="idp2763307184"></a>Example: one channel in two speakers</h4><p>
Here is an example of another way to play one channel in both speakers. Suppose
for this example that the left channel should be played and the right channel
discarded. Following the steps above:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  In order to provide an output channel for each of the two speakers, the first
  suboption must be "2".
</p></li><li class="listitem"><p>
  The left channel needs to be moved to the right channel, and also must be
  moved to itself so it won't be empty. This is a total of two moves, making
  the second suboption "2" as well.
</p></li><li class="listitem"><p>
  To move the left channel (channel 0) into the right channel (channel 1), the
  suboption pair is "0:1", "0:0" moves the left channel onto itself.
</p></li></ol></div><p>
Putting that all together gives:
</p><pre class="screen">
mplayer <em class="replaceable"><code>filename</code></em> -af channels=2:2:0:1:0:0
</pre><p>
</p><p>
The advantage this example has over <tt class="option">extrastereo</tt> is that the
volume of each output channel is the same as the input channel. The disadvantage
is that the suboptions must be changed to "2:2:1:0:1:1" when the desired audio
is in the right channel. Also, it is more difficult to remember and type.
</p><h4><a name="idp2763313088"></a>Example: left channel in two speakers shortcut</h4><p>
There is actually a much easier way to use the <tt class="option">channels</tt> filter
for playing the left channel in both speakers:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af channels=1</pre><p>
The second channel is discarded and, with no further suboptions, the single
remaining channel is left alone. Sound card drivers automatically play
single-channel audio in both speakers. This only works when the desired channel
is on the left.
</p><h4><a name="idp2763315504"></a>Example: duplicate front channels to the rear</h4><p>
Another common operation is to duplicate the front channels and play them back
on the rear speakers of a quadraphonic setup.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  There should be four output channels. The first suboption is "4".
</p></li><li class="listitem"><p>
  Each of the two front channels needs to be moved to the corresponding rear
  channel and also to itself. This is four moves, so the second suboption is "4".
</p></li><li class="listitem"><p>
  The left front (channel 0) needs to moved to the left rear (channel 2):
  "0:2".  The left front also needs to be moved to itself: "0:0". The right
  front (channel 1) is moved to the right rear (channel 3): "1:3", and also to
  itself: "1:1".
</p></li></ol></div><p>
Combine all the suboptions to get:
</p><pre class="screen">
mplayer <em class="replaceable"><code>filename</code></em> -af channels=4:4:0:2:0:0:1:3:1:1
</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-channels-mixing"></a>3.10.4. Channel mixing</h3></div></div></div><p>
The <tt class="option">pan</tt> filter can mix channels in user-specified proportions.
This allows for everything the <tt class="option">channels</tt> filter can do and
more. Unfortunately, the suboptions are much more complicated.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Decide how many channels to work with. You may need to specify this with
  <tt class="option">-channels</tt> and/or <tt class="option">-af channels</tt>.
  Later examples will show when to use which.
</p></li><li class="listitem"><p>
  Decide how many channels to feed into <tt class="option">pan</tt> (further decoded
  channels are discarded). This is the first suboption, and it also controls how
  many channels to employ for output.
</p></li><li class="listitem"><p>
  The remaining suboptions specify how much of each channel gets mixed into each
  other channel. This is the complicated part. To break the task down, split the
  suboptions into several sets, one set for each input channel. Each suboption
  within a set corresponds to an output channel. The number you specify will be
  the percentage of the input channel that gets mixed into the output channel.
  </p><p>
  <tt class="option">pan</tt> accepts values from 0 to 512, yielding 0% to 51200% of
  the original volume. Be careful when using values greater than 1. Not only
  can this give you very high volume, but if you exceed the sample range of
  your sound card you may hear painful pops and clicks. If you want you can
  follow <tt class="option">pan</tt> with <tt class="option">,volume</tt> to enable clipping,
  but it is best to keep the values of <tt class="option">pan</tt> low enough that
  clipping is not necessary.
  </p></li></ol></div><p>
</p><h4><a name="idp2763329472"></a>Example: one channel in two speakers</h4><p>
Here is yet another example for playing the left channel in two speakers. Follow
the steps above:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  <tt class="option">pan</tt> should output two channels, so the first
  suboption is "2".
</p></li><li class="listitem"><p>
  Since we have two input channels, there will be two sets of suboptions.
  Since there are also two output channels,
  there will be two suboptions per set.
  The left channel from the file should go with full volume to
  the new left and the right channels.
  Thus the first set of suboptions is "1:1".
  The right channel should be discarded, so the second would be "0:0".
  Any 0 values at the end can be left out, but for ease of
  understanding we will keep them.
</p></li></ol></div><p>
Putting those options together gives:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af pan=2:1:1:0:0</pre><p>
If the right channel is desired instead of the left, the suboptions to
<tt class="option">pan</tt> will be "2:0:0:1:1".
</p><h4><a name="idp2763334672"></a>Example: left channel in two speakers shortcut</h4><p>
As with <tt class="option">channels</tt>, there is a shortcut that only works with the
left channel:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af pan=1:1</pre><p>
Since <tt class="option">pan</tt> has only one channel of input (the other channel is
discarded), there is only one set with one suboption, which specifies that the
only channel gets 100% of itself.
</p><h4><a name="idp2763337472"></a>Example: downmixing 6-channel PCM</h4><p>
<span class="application">MPlayer</span>'s decoder for 6-channel PCM is not capable of
downmixing. Here is a way to downmix PCM using <tt class="option">pan</tt>:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  The number of output channels is 2, so the first suboption is "2".
</p></li><li class="listitem"><p>
  With six input channels there will be six sets of options. Fortunately,
  since we only care about the output of the first two channels, we only need to
  make two sets; the remaining four sets can be omitted. Beware that not all
  multichannel audio files have the same channel order! This example
  demonstrates downmixing a file with the same channels as AC-3 5.1:
  </p><pre class="programlisting">
0 - front left
1 - front right
2 - rear left
3 - rear right
4 - center front
5 - subwoofer</pre><p>
  The first set of suboptions lists the percentages of the original volume, in
  order, which each output channel should receive from the
  front left channel: "1:0".
  The front right channel should go into the right output: "0:1".
  The same for the rear channels: "1:0" and "0:1".
  The center channel goes into both output channels with half volume:
  "0.5:0.5", and the subwoofer goes into both with full volume: "1:1".
</p></li></ol></div><p>
Put all that together, for:
</p><pre class="screen">
mplayer <em class="replaceable"><code>6-channel.wav</code></em> -af pan=2:1:0:0:1:1:0:0:1:0.5:0.5:1:1
</pre><p>
The percentages listed above are only a rough example. Feel free to tweak them.
</p><h4><a name="idp2763344128"></a>Example: Playing 5.1 audio on big speakers without a subwoofer</h4><p>
If you have a huge pair of front speakers you may not want to waste any money on
buying a subwoofer for a complete 5.1 sound system. If you use
<tt class="option">-channels 5</tt> to request that liba52 decode 5.1 audio in 5.0,
the subwoofer channel is simply discarded. If you want to distribute the
subwoofer channel yourself you need to downmix manually with
<tt class="option">pan</tt>:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Since <tt class="option">pan</tt> needs to examine all six channels, specify
  <tt class="option">-channels 6</tt> so liba52 decodes them all.
</p></li><li class="listitem"><p>
  <tt class="option">pan</tt> outputs to only five channels, the first suboption is 5.
</p></li><li class="listitem"><p>
  Six input channels and five output channels means six sets of five suboptions.
  </p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
    The left front channel only replicates onto itself:
    "1:0:0:0:0"
  </p></li><li class="listitem"><p>
    Same for the right front channel:
    "0:1:0:0:0"
  </p></li><li class="listitem"><p>
    Same for the left rear channel:
    "0:0:1:0:0"
  </p></li><li class="listitem"><p>
    And also the same for the right rear channel:
    "0:0:0:1:0"
  </p></li><li class="listitem"><p>
    Center front, too:
    "0:0:0:0:1"
  </p></li><li class="listitem"><p>
    And now we have to decide what to do with the subwoofer,
    e.g. half into front right and front left:
    "0.5:0.5:0:0:0"
  </p></li></ul></div><p>
</p></li></ol></div><p>
Combine all those options to get:
</p><pre class="screen">
mplayer <em class="replaceable"><code>dvd://1</code></em> -channels 6 -af pan=5:1:0:0:0:0:0:1:0:0:0:0:0:1:0:0:0:0:0:1:0:0:0:0:0:1:0.5:0.5:0:0:0
</pre><p>
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advaudio-volume"></a>3.11. Software Volume adjustment</h2></div></div></div><p>
Some audio tracks are too quiet to be heard comfortably without amplification.
This becomes a problem when your audio equipment cannot amplify the signal for
you. The <tt class="option">-softvol</tt> option directs
<span class="application">MPlayer</span> to use an internal mixer. You can then use
the volume adjustment keys (by default <span class="keycap"><b>9</b></span> and
<span class="keycap"><b>0</b></span>) to reach much higher volume levels. Note that this does not
bypass your sound card's mixer; <span class="application">MPlayer</span> only
amplifies the signal before sending it to your sound card.
The following example is a good start:
</p><pre class="screen">
mplayer <em class="replaceable"><code>quiet-file</code></em> -softvol -softvol-max 300
</pre><p>
The <tt class="option">-softvol-max</tt> option specifies the maximum allowable output
volume as a percentage of the
original volume. For example, <tt class="option">-softvol-max 200</tt> would allow the
volume to be adjusted up to twice its original level.
It is safe to specify a large value with
<tt class="option">-softvol-max</tt>; the higher volume will not be used until you
use the volume adjustment keys. The only disadvantage of a large value is that,
since <span class="application">MPlayer</span> adjusts volume by a percentage of the
maximum, you will not have as precise control when using the volume adjustment
keys. Use a lower value with <tt class="option">-softvol-max</tt> and/or specify
<tt class="option">-volstep 1</tt> if you need higher precision.
</p><p>
The <tt class="option">-softvol</tt> option works by controlling the
<tt class="option">volume</tt> audio filter. If you want to play a file at a certain
volume from the beginning you can specify <tt class="option">volume</tt> manually:
</p><pre class="screen">mplayer <em class="replaceable"><code>quiet-file</code></em> -af volume=10</pre><p>
This will play the file with a ten decibel gain. Be careful when using the
<tt class="option">volume</tt> filter - you could easily hurt your ears if you use
too high a value. Start low and work your way up gradually until you get a feel
for how much adjustment is required. Also, if you specify excessively high
values, <tt class="option">volume</tt> may need to clip the signal to avoid sending
your sound card data that is outside the allowable range; this will result in
distorted audio.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tv-input"></a>3.12. TV input</h2></div></div></div><p>
This section is about how to enable <span class="bold"><strong>watching/grabbing
from V4L compatible TV tuner</strong></span>. See the man page for a description
of TV options and keyboard controls.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tv-tips"></a>3.12.1. Usage tips</h3></div></div></div><p>
The full listing of the options is available on the manual page.
Here are just a few tips:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Make sure your tuner works with another TV software in Linux, for
  example <span class="application">XawTV</span>.
</p></li><li class="listitem"><p>
  Use the <tt class="option">channels</tt> option. An example:
  </p><pre class="screen">-tv channels=26-MTV1,23-TV2</pre><p>
  Explanation: Using this option, only the 26 and 23 channels will be usable,
  and there will be a nice OSD text upon channel switching, displaying the
  channel's name. Spaces in the channel name must be replaced by the
  "_" character.
</p></li><li class="listitem"><p>
  Choose some sane image dimensions. The dimensions of the resulting image
  should be divisible by 16.
</p></li><li class="listitem"><p>
  If you capture the video with the vertical resolution higher than half
  of the full resolution (i.e. 288 for PAL or 240 for NTSC), then the
  'frames' you get will really be interleaved pairs of fields.
  Depending on what you want to do with the video you may leave it in
  this form, destructively deinterlace, or break the pairs apart into
  individual fields.
  </p><p>
  Otherwise you'll get a movie which is distorted during
  fast-motion scenes and the bitrate controller will be probably even unable
  to retain the specified bitrate as the interlacing artifacts produce high
  amount of detail and thus consume lot of bandwidth. You can enable
  deinterlacing with <tt class="option">-vf pp=DEINT_TYPE</tt>.
  Usually <tt class="option">pp=lb</tt> does a good job, but it can be matter of
  personal preference.
  See other deinterlacing algorithms in the manual and give it a try.
  </p></li><li class="listitem"><p>
  Crop out the dead space. When you capture the video, the areas at the edges
  are usually black or contain some noise. These again consume lots of
  unnecessary bandwidth. More precisely it's not the black areas themselves
  but the sharp transitions between the black and the brighter video image
  which do but that's not important for now. Before you start capturing,
  adjust the arguments of the <tt class="option">crop</tt> option so that all the
  crap at the margins is cropped out. Again, don't forget to keep the resulting
  dimensions sane.
</p></li><li class="listitem"><p>
  Watch out for CPU load. It shouldn't cross the 90% boundary for most of the
  time. If you have a large capture buffer, <span class="application">MEncoder</span>
  can survive an overload for few seconds but nothing more. It's better to
  turn off the 3D OpenGL screensavers and similar stuff.
</p></li><li class="listitem"><p>
  Don't mess with the system clock. <span class="application">MEncoder</span> uses the
  system clock for doing A/V sync. If you adjust the system clock (especially
  backwards in time), <span class="application">MEncoder</span> gets confused and you
  will lose frames. This is an important issue if you are hooked to a network
  and run some time synchronization software like NTP. You have to turn NTP
  off during the capture process if you want to capture reliably.
</p></li><li class="listitem"><p>
  Don't change the <tt class="option">outfmt</tt> unless you know what you are doing
  or your card/driver really doesn't support the default (YV12 colorspace).
  In the older versions of <span class="application">MPlayer</span>/
  <span class="application">MEncoder</span> it was necessary to specify the output
  format. This issue should be fixed in the current releases and
  <tt class="option">outfmt</tt> isn't required anymore, and the default suits the
  most purposes. For example, if you are capturing into DivX using
  <code class="systemitem">libavcodec</code> and specify
  <tt class="option">outfmt=RGB24</tt> in order to increase the quality of the captured
  images, the captured image will be actually later converted back into YV12 so
  the only thing you achieve is a massive waste of CPU power.
</p></li><li class="listitem"><p>
  There are several ways of capturing audio. You can grab the sound either using
  your sound card via an external cable connection between video card and
  line-in, or using the built-in ADC in the bt878 chip. In the latter case, you
  have to load the <span class="bold"><strong>btaudio</strong></span> driver. Read the
  <tt class="filename">linux/Documentation/sound/btaudio</tt> file (in the kernel
  tree, not <span class="application">MPlayer</span>'s) for some instructions on using
  this driver.
</p></li><li class="listitem"><p>
  If <span class="application">MEncoder</span> cannot open the audio device, make
  sure that it is really available. There can be some trouble with the sound
  servers like aRts (KDE) or ESD (GNOME). If you have a full duplex sound card
  (almost any decent card supports it today), and you are using KDE, try to
  check the "full duplex" option in the sound server preference menu.
</p></li></ul></div><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tv-examples"></a>3.12.2. Examples</h3></div></div></div><div class="informalexample"><p>
Dummy output, to AAlib :)
</p><pre class="screen">mplayer -tv driver=dummy:width=640:height=480 -vo aa tv://</pre><p>
</p></div><div class="informalexample"><p>
Input from standard V4L:
</p><pre class="screen">
mplayer -tv driver=v4l:width=640:height=480:outfmt=i420 -vc rawi420 -vo xv tv://
</pre><p>
</p></div><div class="informalexample"><p>
A more sophisticated example. This makes <span class="application">MEncoder</span>
capture the full PAL image, crop the margins, and deinterlace the picture
using a linear blend algorithm. Audio is compressed with a constant bitrate
of 64kbps, using LAME codec. This setup is suitable for capturing movies.
</p><pre class="screen">
mencoder -tv driver=v4l:width=768:height=576 -oac mp3lame -lameopts cbr:br=64\
    -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=900 \
    -vf crop=720:544:24:16,pp=lb -o <em class="replaceable"><code>output.avi</code></em> tv://
</pre><p>
</p></div><div class="informalexample"><p>
This will additionally rescale the image to 384x288 and compresses the
video with the bitrate of 350kbps in high quality mode. The vqmax option
looses the quantizer and allows the video compressor to actually reach so
low bitrate even at the expense of the quality. This can be used for
capturing long TV series, where the video quality isn't so important.
</p><pre class="screen">
mencoder -tv driver=v4l:width=768:height=576 \
    -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=350:vhq:vqmax=31:keyint=300 \
    -oac mp3lame -lameopts cbr:br=48 -sws 1 -o <em class="replaceable"><code>output.avi</code></em>\
    -vf crop=720:540:24:18,pp=lb,scale=384:288 tv://
</pre><p>
It's also possible to specify smaller image dimensions in the
<tt class="option">-tv</tt> option and omit the software scaling but this approach
uses the maximum available information and is a little more resistant to noise.
The bt8x8 chips can do the pixel averaging only in the horizontal direction due
to a hardware limitation.
</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tv-teletext"></a>3.13. Teletext</h2></div></div></div><p>
  Teletext is currently available only in <span class="application">MPlayer</span>
  for v4l and v4l2 drivers.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tv-teletext-implementation-notes"></a>3.13.1. Implementation notes</h3></div></div></div><p>
<span class="application">MPlayer</span> supports regular text, graphics and navigation links.
Unfortunately, colored pages are not fully supported yet - all pages are shown as grayscaled.
Subtitle pages (also known as Closed Captions) are supported, too.
</p><p>
<span class="application">MPlayer</span> starts caching all teletext pages upon
starting to receive TV input, so you do not need to wait until the requested page is loaded.
</p><p>
Note: Using teletext with <tt class="option">-vo xv</tt> causes strange colors.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tv-teletext-usage"></a>3.13.2. Using teletext</h3></div></div></div><p>
To enable teletext decoding you must specify the VBI device to get teletext data
from (usually <tt class="filename">/dev/vbi0</tt> for Linux). This can be done by specifying
<tt class="option">tdevice</tt> in your configuration file, like shown below:
</p><pre class="screen">tv=tdevice=/dev/vbi0</pre><p>
</p><p>
You might need to specify the teletext language code for your country.
To list all available country codes use
</p><pre class="screen">tv=tdevice=/dev/vbi0:tlang=<em class="replaceable"><code>-1</code></em></pre><p>
Here is an example for Russian:
</p><pre class="screen">tv=tdevice=/dev/vbi0:tlang=<em class="replaceable"><code>33</code></em></pre><p>
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="radio"></a>3.14. Radio</h2></div></div></div><p>
This section is about how to enable listening to radio from
a V4L-compatible radio tuner. See the man page for a
description of radio options and keyboard controls.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="radio-tips"></a>3.14.1. Usage tips</h3></div></div></div><p>
The full listing of the options is available in the manual page.
Here are just a few tips:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Make sure your tuner works with another radio software in Linux, for
  example <span class="application">XawTV</span>.
</p></li><li class="listitem"><p>
  Use the <tt class="option">channels</tt> option. An example:
  </p><pre class="screen">-radio channels=104.4-Sibir,103.9-Maximum</pre><p>
  Explanation: With this option, only the 104.4 and 103.9 radio stations
  will be usable. There will be a nice OSD text upon channel switching,
  displaying the channel's name. Spaces in the channel name must be
  replaced by the "_" character.
</p></li><li class="listitem"><p>
  There are several ways of capturing audio. You can grab the sound either using
  your sound card via an external cable connection between video card and
  line-in, or using the built-in ADC in the saa7134 chip. In the latter case,
  you have to load the <code class="systemitem">saa7134-alsa</code> or
  <code class="systemitem">saa7134-oss</code> driver.
</p></li><li class="listitem"><p>
  <span class="application">MEncoder</span> cannot be used for audio capture,
  because it requires a video stream to work. So your can either use
  <span class="application">arecord</span> from ALSA project or
  use <tt class="option">-ao pcm:file=file.wav</tt>. In the latter case you
  will not hear any sound (unless you are using a line-in cable and
  have switched line-in mute off).
</p></li></ul></div><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="radio-examples"></a>3.14.2. Examples</h3></div></div></div><div class="informalexample"><p>
Input from standard V4L (using line-in cable, capture switched off):
</p><pre class="screen">mplayer radio://104.4</pre><p>
</p></div><div class="informalexample"><p>
Input from standard V4L (using line-in cable, capture switched off,
V4Lv1 interface):
</p><pre class="screen">mplayer -radio driver=v4l radio://104.4</pre><p>
</p></div><div class="informalexample"><p>
Playing second channel from channel list:
</p><pre class="screen">mplayer -radio channels=104.4=Sibir,103.9=Maximm radio://2</pre><p>
</p></div><div class="informalexample"><p>
Passing sound over the PCI bus from the radio card's internal ADC.
In this example the tuner is used as a second sound card
(ALSA device hw:1,0). For saa7134-based cards either the
<code class="systemitem">saa7134-alsa</code> or <code class="systemitem">saa7134-oss</code>
module must be loaded.
</p><pre class="screen">
mplayer -rawaudio rate=32000 radio://2/capture \
    -radio adevice=hw=1.0:arate=32000:channels=104.4=Sibir,103.9=Maximm
</pre><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
When using ALSA device names colons must be replaced
by equal signs, commas by periods.
</p></div><p>
</p></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="video"></a>Chapter 4. Video output devices</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect1"><a href="#xv">4.1. Xv</a></span></dt><dt><span class="sect1"><a href="#dga">4.2. DGA</a></span></dt><dt><span class="sect1"><a href="#svgalib">4.3. SVGAlib</a></span></dt><dt><span class="sect1"><a href="#fbdev">4.4. Framebuffer output (FBdev)</a></span></dt><dt><span class="sect1"><a href="#mga_vid">4.5. Matrox framebuffer (mga_vid)</a></span></dt><dt><span class="sect1"><a href="#tdfxfb">4.6. 3Dfx YUV support</a></span></dt><dt><span class="sect1"><a href="#tdfx_vid">4.7. tdfx_vid</a></span></dt><dt><span class="sect1"><a href="#opengl">4.8. OpenGL output</a></span></dt><dt><span class="sect1"><a href="#aalib">4.9. AAlib – text mode displaying</a></span></dt><dt><span class="sect1"><a href="#caca">4.10. 
<code class="systemitem">libcaca</code> – Color ASCII Art library
</a></span></dt><dt><span class="sect1"><a href="#vesa">4.11. VESA - output to VESA BIOS</a></span></dt><dt><span class="sect1"><a href="#x11">4.12. X11</a></span></dt><dt><span class="sect1"><a href="#vidix">4.13. VIDIX</a></span></dt><dd><dl><dt><span class="sect2"><a href="#svgalib_helper">4.13.1. svgalib_helper</a></span></dt><dt><span class="sect2"><a href="#vidix-ati">4.13.2. ATI cards</a></span></dt><dt><span class="sect2"><a href="#vidix-mga">4.13.3. Matrox cards</a></span></dt><dt><span class="sect2"><a href="#vidix-trident">4.13.4. Trident cards</a></span></dt><dt><span class="sect2"><a href="#vidix-3dlabs">4.13.5. 3DLabs cards</a></span></dt><dt><span class="sect2"><a href="#vidix-nvidia">4.13.6. nVidia cards</a></span></dt><dt><span class="sect2"><a href="#vidix-sis">4.13.7. SiS cards</a></span></dt></dl></dd><dt><span class="sect1"><a href="#directfb">4.14. DirectFB</a></span></dt><dt><span class="sect1"><a href="#dfbmga">4.15. DirectFB/Matrox (dfbmga)</a></span></dt><dt><span class="sect1"><a href="#mpeg_decoders">4.16. MPEG decoders</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dvb">4.16.1. DVB output and input</a></span></dt><dt><span class="sect2"><a href="#dxr2">4.16.2. DXR2</a></span></dt><dt><span class="sect2"><a href="#dxr3">4.16.3. DXR3/Hollywood+</a></span></dt></dl></dd><dt><span class="sect1"><a href="#zr">4.17. Zr</a></span></dt><dt><span class="sect1"><a href="#blinkenlights">4.18. Blinkenlights</a></span></dt><dt><span class="sect1"><a href="#tvout">4.19. TV-out support</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tvout-mga-g400">4.19.1. Matrox G400 cards</a></span></dt><dt><span class="sect2"><a href="#tv-out_matrox_g450">4.19.2. Matrox G450/G550 cards</a></span></dt><dt><span class="sect2"><a href="#tv-out_matrox_cable">4.19.3. Building a Matrox TV-out cable</a></span></dt><dt><span class="sect2"><a href="#tvout-ati">4.19.4. ATI cards</a></span></dt><dt><span class="sect2"><a href="#tvout-nvidia">4.19.5. nVidia</a></span></dt><dt><span class="sect2"><a href="#tvout-neomagic">4.19.6. NeoMagic</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xv"></a>4.1. Xv</h2></div></div></div><p>
Under XFree86 4.0.2 or newer, you can use your card's hardware YUV routines
using the XVideo extension. This is what the option
<tt class="option">-vo xv</tt> uses. Also, this driver supports adjusting
brightness/contrast/hue/etc. (unless you use the old, slow DirectShow DivX
codec, which supports it everywhere), see the man page.
</p><p>
In order to make this work, be sure to check the following:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  You have to use XFree86 4.0.2 or newer (former versions don't have XVideo)
</p></li><li class="listitem"><p>
  Your card actually supports hardware acceleration (modern cards do)
</p></li><li class="listitem"><p>
  X loads the XVideo extension, it's something like this:
  </p><pre class="programlisting">(II) Loading extension XVideo</pre><p>
  in <tt class="filename">/var/log/XFree86.0.log</tt>
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
   This loads only the XFree86's extension. In a good install, this is
   always loaded, and doesn't mean that the
   <span class="bold"><strong>card's</strong></span> XVideo support is loaded!
  </p></div><p>
</p></li><li class="listitem"><p>
  Your card has Xv support under Linux. To check, try
  <span class="command"><strong>xvinfo</strong></span>, it is the part of the XFree86 distribution. It
  should display a long text, similar to this:
  </p><pre class="screen">
X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
(...)
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
(...etc...)</pre><p>
  It must support YUY2 packed, and YV12 planar pixel formats to be usable
  with <span class="application">MPlayer</span>.
</p></li><li class="listitem"><p>
  And finally, check if <span class="application">MPlayer</span> was compiled
  with 'xv' support. Do a <span class="command"><strong>mplayer -vo help | grep xv </strong></span>.
  If 'xv' support was built a line similar to this should appear:
  </p><pre class="screen">  xv      X11/Xv</pre><p>
</p></li></ol></div><p>
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dga"></a>4.2. DGA</h2></div></div></div><p><b>PREAMBLE. </b>
This document tries to explain in some words what DGA is in general and
what the DGA video output driver for <span class="application">MPlayer</span>
can do (and what it can't).
</p><p><b>WHAT IS DGA. </b>
<acronym class="acronym">DGA</acronym> is short for <span class="emphasis"><em>Direct Graphics
Access</em></span> and is a means for a program to bypass the X server and
directly modifying the framebuffer memory. Technically spoken this happens
by mapping the framebuffer memory into the memory range of your process.
This is allowed by the kernel only if you have superuser privileges. You
can get these either by logging in as <code class="systemitem">root</code> or by setting the SUID bit on the
<span class="application">MPlayer</span> executable (<span class="bold"><strong>not
recommended</strong></span>).
</p><p>
There are two versions of DGA: DGA1 is used by XFree 3.x.x and DGA2 was
introduced with XFree 4.0.1.
</p><p>
DGA1 provides only direct framebuffer access as described above. For
switching the resolution of the video signal you have to rely on the
XVidMode extension.
</p><p>
DGA2 incorporates the features of XVidMode extension and also allows
switching the depth of the display. So you may, although basically
running a 32 bit depth X server, switch to a depth of 15 bits and vice
versa.
</p><p>
However DGA has some drawbacks. It seems it is somewhat dependent on the
graphics chip you use and on the implementation of the X server's video
driver that controls this chip. So it does not work on every system...
</p><p><b>INSTALLING DGA SUPPORT FOR MPLAYER. </b>
First make sure X loads the DGA extension, see in
<tt class="filename">/var/log/XFree86.0.log</tt>:

</p><pre class="programlisting">(II) Loading extension XFree86-DGA</pre><p>

See, XFree86 4.0.x or greater is
<span class="bold"><strong>highly recommended</strong></span>!
<span class="application">MPlayer</span>'s DGA driver is autodetected by
<tt class="filename">./configure</tt>, or you can force it
with <tt class="option">--enable-dga</tt>.
</p><p>
If the driver couldn't switch to a smaller resolution, experiment with
options <tt class="option">-vm</tt> (only with X 3.3.x), <tt class="option">-fs</tt>,
<tt class="option">-bpp</tt>, <tt class="option">-zoom</tt> to find a video mode that
the movie fits in. There is no converter right now :(
</p><p>
Become <code class="systemitem">root</code>. DGA needs root
access to be able to write directly video memory. If you want to run it as
user, then install <span class="application">MPlayer</span> SUID root:

</p><pre class="screen">
chown root <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
chmod 750 <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
chmod +s <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
</pre><p>

Now it works as a simple user, too.
</p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Security risk</h3><p>
This is a <span class="bold"><strong>big</strong></span> security risk!
<span class="bold"><strong>Never</strong></span> do this on a server or on a computer
that can be accessed by other people because they can gain root privileges
through SUID root <span class="application">MPlayer</span>.
</p></div><p>
Now use <tt class="option">-vo dga</tt> option, and there you go! (hope so:) You
should also try if the <tt class="option">-vo sdl:driver=dga</tt> option works for you!
It's much faster!
</p><p><a name="dga-modelines"></a><b>RESOLUTION SWITCHING. </b>
The DGA driver allows for switching the resolution of the output signal.
This avoids the need for doing (slow) software scaling and at the same time
provides a fullscreen image. Ideally it would switch to the exact
resolution (except for honoring aspect ratio) of the video data, but the X
server only allows switching to resolutions predefined in
<tt class="filename">/etc/X11/XF86Config</tt>
(<tt class="filename">/etc/X11/XF86Config-4</tt> for XFree 4.X.X respectively).
Those are defined by so-called modelines and depend on
the capabilities of your video hardware. The X server scans this config
file on startup and disables the modelines not suitable for your hardware.
You can find out which modes survive with the X11 log file. It can be found
at: <tt class="filename">/var/log/XFree86.0.log</tt>.
</p><p>
These entries are known to work fine with a Riva128 chip, using the nv.o X
server driver module.
</p><pre class="programlisting">
Section "Modes"
  Identifier "Modes[0]"
  Modeline "800x600"  40     800 840 968 1056  600 601 605 628
  Modeline "712x600"  35.0   712 740 850 900   400 410 412 425
  Modeline "640x480"  25.175 640 664 760 800   480 491 493 525
  Modeline "400x300"  20     400 416 480 528   300 301 303 314 Doublescan
  Modeline "352x288"  25.10  352 368 416 432   288 296 290 310
  Modeline "352x240"  15.750 352 368 416 432   240 244 246 262 Doublescan
  Modeline "320x240"  12.588 320 336 384 400   240 245 246 262 Doublescan
EndSection
</pre><p><b>DGA &amp; MPLAYER. </b>
DGA is used in two places with <span class="application">MPlayer</span>: The SDL
driver can be made to make use of it (<tt class="option">-vo sdl:driver=dga</tt>) and
within the DGA driver (<tt class="option">-vo dga</tt>). The above said is true
for both; in the following sections I'll explain how the DGA driver for
<span class="application">MPlayer</span> works.
</p><p><b>FEATURES. </b>
The DGA driver is invoked by specifying <tt class="option">-vo dga</tt> at the
command line. The default behavior is to switch to a resolution matching
the original resolution of the video as close as possible. It deliberately
ignores the <tt class="option">-vm</tt> and <tt class="option">-fs</tt> options
(enabling of video mode switching and fullscreen) - it always tries to
cover as much area of your screen as possible by switching the video mode,
thus refraining from using additional cycles of your CPU to scale the
image. If you don't like the mode it chooses you may force it to choose
the mode matching closest the resolution you specify by <tt class="option">-x</tt>
and <tt class="option">-y</tt>. By providing the <tt class="option">-v</tt> option, the
DGA driver will print, among a lot of other things, a list of all
resolutions supported by your current <tt class="filename">XF86Config</tt> file.
Having DGA2 you may also force it to use a certain depth by using the
<tt class="option">-bpp</tt> option. Valid depths are 15, 16, 24 and 32. It
depends on your hardware whether these depths are natively supported or if
a (possibly slow) conversion has to be done.
</p><p>
If you should be lucky enough to have enough offscreen memory left to
put a whole image there, the DGA driver will use double buffering, which
results in much smoother movie playback. It will tell you whether
double buffering is enabled or not.
</p><p>
Double buffering means that the next frame of your video is being drawn in
some offscreen memory while the current frame is being displayed. When the
next frame is ready, the graphics chip is just told the location in memory
of the new frame and simply fetches the data to be displayed from there.
In the meantime the other buffer in memory will be filled again with new
video data.
</p><p>
Double buffering may be switched on by using the option
<tt class="option">-double</tt> and may be disabled with
<tt class="option">-nodouble</tt>. Current default option is to disable
double buffering. When using the DGA driver, onscreen display (OSD) only
works with double buffering enabled. However, enabling double buffering may
result in a big speed penalty (on my K6-II+ 525 it used an additional 20%
of CPU time!) depending on the implementation of DGA for your hardware.
</p><p><b>SPEED ISSUES. </b>
Generally spoken, DGA framebuffer access should be at least as fast as
using the X11 driver with the additional benefit of getting a fullscreen
image. The percentage speed values printed by
<span class="application">MPlayer</span> have to be interpreted with some care,
as for example, with the X11 driver they do not include the time used by
the X server needed for the actual drawing. Hook a terminal to a serial
line of your box and start <span class="command"><strong>top</strong></span> to see what is really
going on in your box.
</p><p>
Generally spoken, the speedup done by using DGA against 'normal' use of X11
highly depends on your graphics card and how well the X server module for it
is optimized.
</p><p>
If you have a slow system, better use 15 or 16 bit depth since they require
only half the memory bandwidth of a 32 bit display.
</p><p>
Using a depth of 24 bit is a good idea even if your card natively just supports
32 bit depth since it transfers 25% less data compared to the 32/32 mode.
</p><p>
I've seen some AVI files be played back on a Pentium MMX 266. AMD K6-2
CPUs might work at 400 MHZ and above.
</p><p><b>KNOWN BUGS. </b>
Well, according to some developers of XFree, DGA is quite a beast. They
tell you better not to use it. Its implementation is not always flawless
with every chipset driver for XFree out there.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  With XFree 4.0.3 and <tt class="filename">nv.o</tt> there is a bug resulting
  in strange colors.
</p></li><li class="listitem"><p>
  ATI driver requires to switch mode back more than once after finishing
  using of DGA.
</p></li><li class="listitem"><p>
  Some drivers simply fail to switch back to normal resolution (use
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Keypad +</b></span>
  and
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Keypad -</b></span>
  to switch back manually).
</p></li><li class="listitem"><p>
  Some drivers simply display strange colors.
</p></li><li class="listitem"><p>
  Some drivers lie about the amount of memory they map into the process's
  address space, thus vo_dga won't use double buffering (SIS?).
</p></li><li class="listitem"><p>
  Some drivers seem to fail to report even a single valid mode. In this
  case the DGA driver will crash telling you about a nonsense mode of
  100000x100000 or something like that.
</p></li><li class="listitem"><p>
  OSD only works with double buffering enabled (else it flickers).
</p></li></ul></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="svgalib"></a>4.3. SVGAlib</h2></div></div></div><p><b>INSTALLATION. </b>
You'll have to install svgalib and its development package in order for
<span class="application">MPlayer</span> build its SVGAlib driver (autodetected,
but can be forced), and don't forget to edit
<tt class="filename">/etc/vga/libvga.config</tt> to suit your card and monitor.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Be sure not to use the <tt class="option">-fs</tt> switch, since it toggles the
usage of the software scaler, and it's slow. If you really need it, use the
<tt class="option">-sws 4</tt> option which will produce bad quality, but is
somewhat faster.
</p></div><p><b>EGA (4BPP) SUPPORT. </b>
SVGAlib incorporates EGAlib, and <span class="application">MPlayer</span> has the
possibility to display any movie in 16 colors, thus usable in the following
sets:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  EGA card with EGA monitor: 320x200x4bpp, 640x200x4bpp, 640x350x4bpp
</p></li><li class="listitem"><p>
  EGA card with CGA monitor: 320x200x4bpp, 640x200x4bpp
</p></li></ul></div><p>
The bpp (bits per pixel) value must be set to 4 by hand:
<tt class="option">-bpp 4</tt>
</p><p>
The movie probably must be scaled down to fit in EGA mode:
</p><pre class="screen">-vf scale=640:350</pre><p>
or
</p><pre class="screen">-vf scale=320:200</pre><p>
</p><p>
For that we need fast but bad quality scaling routine:
</p><pre class="screen">-sws 4</pre><p>
</p><p>
Maybe automatic aspect correction has to be shut off:
</p><pre class="screen">-noaspect</pre><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
According to my experience the best image quality on
EGA screens can be achieved by decreasing the brightness a bit:
<tt class="option">-vf eq=-20:0</tt>. I also needed to lower the audio
samplerate on my box, because the sound was broken on 44kHz:
<tt class="option">-srate 22050</tt>.
</p></div><p>
You can turn on OSD and subtitles only with the <tt class="option">expand</tt>
filter, see the man page for exact parameters.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="fbdev"></a>4.4. Framebuffer output (FBdev)</h2></div></div></div><p>
Whether to build the FBdev target is autodetected during
<tt class="filename">./configure</tt>. Read the framebuffer documentation in
the kernel sources (<tt class="filename">Documentation/fb/*</tt>) for more
information.
</p><p>
If your card doesn't support VBE 2.0 standard (older ISA/PCI cards, such as
S3 Trio64), only VBE 1.2 (or older?): Well, VESAfb is still available, but
you'll have to load SciTech Display Doctor (formerly UniVBE) before booting
Linux. Use a DOS boot disk or whatever. And don't forget to register your
UniVBE ;))
</p><p>
The FBdev output takes some additional parameters above the others:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><tt class="option">-fb</tt></span></dt><dd><p>
    specify the framebuffer device to use (default: <tt class="filename">/dev/fb0</tt>)
  </p></dd><dt><span class="term"><tt class="option">-fbmode</tt></span></dt><dd><p>
    mode name to use (according to <tt class="filename">/etc/fb.modes</tt>)
  </p></dd><dt><span class="term"><tt class="option">-fbmodeconfig</tt></span></dt><dd><p>
    config file of modes (default: <tt class="filename">/etc/fb.modes</tt>)
  </p></dd><dt><span class="term"><tt class="option">-monitor-hfreq</tt>, </span><span class="term"><tt class="option">-monitor-vfreq</tt>, </span><span class="term"><tt class="option">-monitor-dotclock</tt></span></dt><dd><p>
    <span class="bold"><strong>important</strong></span> values, see
    <tt class="filename">example.conf</tt>
  </p></dd></dl></div><p>
If you want to change to a specific mode, then use
</p><pre class="screen">
mplayer -vm -fbmode <em class="replaceable"><code>name_of_mode</code></em> <em class="replaceable"><code>filename</code></em>
</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <tt class="option">-vm</tt> alone will choose the most suitable mode from
  <tt class="filename">/etc/fb.modes</tt>. Can be used together with
  <tt class="option">-x</tt> and <tt class="option">-y</tt> options too. The
  <tt class="option">-flip</tt> option is supported only if the movie's pixel
  format matches the video mode's pixel format. Pay attention to the bpp
  value, fbdev driver tries to use the current, or if you specify the
  <tt class="option">-bpp</tt> option, then that.
</p></li><li class="listitem"><p>
  <tt class="option">-zoom</tt> option isn't supported
  (use <tt class="option">-vf scale</tt>). You can't use 8bpp (or less) modes.
</p></li><li class="listitem"><p>
  You possibly want to turn the cursor off:
  </p><pre class="screen">echo -e '\033[?25l'</pre><p>
  or
  </p><pre class="screen">setterm -cursor off</pre><p>
  and the screen saver:
  </p><pre class="screen">setterm -blank 0</pre><p>
  To turn the cursor back on:
  </p><pre class="screen">echo -e '\033[?25h'</pre><p>
  or
  </p><pre class="screen">setterm -cursor on</pre><p>
</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
FBdev video mode changing <span class="emphasis"><em>does not work</em></span> with the VESA
framebuffer, and don't ask for it, since it's not an
<span class="application">MPlayer</span> limitation.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mga_vid"></a>4.5. Matrox framebuffer (mga_vid)</h2></div></div></div><p>
<code class="systemitem">mga_vid</code> is a combination of a video output driver and
a Linux kernel module that utilizes the Matrox G200/G400/G450/G550 video
scaler/overlay unit to perform YUV-&gt;RGB colorspace conversion and arbitrary
video scaling.
<code class="systemitem">mga_vid</code> has hardware VSYNC support with triple
buffering. It works on both a framebuffer console and under X, but only
with Linux 2.4.x.
</p><p>
For a Linux 2.6.x version of this driver check out
<a class="ulink" href="http://attila.kinali.ch/mga/" target="_top">http://attila.kinali.ch/mga/</a> or have a look at the external
Subversion repository of mga_vid which can be checked out via

</p><pre class="screen">
svn checkout svn://svn.mplayerhq.hu/mga_vid
</pre><p>
</p><div class="procedure"><a name="idp2763993344"></a><p class="title"><b>Installation:</b></p><ol class="procedure" type="1"><li class="step"><p>
  To use it, you first have to compile <tt class="filename">drivers/mga_vid.o</tt>:
  </p><pre class="screen">
make drivers</pre><p>
</p></li><li class="step"><p>
  Then run (as <code class="systemitem">root</code>)
  </p><pre class="screen">make install-drivers</pre><p>
  which should install the module and create the device node for you.
  Load the driver with
  </p><pre class="screen">insmod mga_vid.o</pre><p>
</p></li><li class="step"><p>
  You should verify the memory size detection using the
  <span class="command"><strong>dmesg</strong></span> command. If it's bad, use the
  <tt class="option">mga_ram_size</tt> option
  (<span class="command"><strong>rmmod mga_vid</strong></span> first),
  specify card's memory size in MB:
  </p><pre class="screen">insmod mga_vid.o mga_ram_size=16</pre><p>
</p></li><li class="step"><p>
  To make it load/unload automatically when needed, first insert the
  following line at the end of <tt class="filename">/etc/modules.conf</tt>:

  </p><pre class="programlisting">alias char-major-178 mga_vid</pre><p>
</p></li><li class="step"><p>
  Now you have to (re)compile <span class="application">MPlayer</span>,
  <span class="command"><strong>./configure</strong></span> will detect
  <tt class="filename">/dev/mga_vid</tt> and build the 'mga' driver. Using it
  from <span class="application">MPlayer</span> goes by <tt class="option">-vo mga</tt>
  if you have matroxfb console, or <tt class="option">-vo xmga</tt> under XFree86
  3.x.x or 4.x.x.
</p></li></ol></div><p>
The mga_vid driver cooperates with Xv.
</p><p>
The <tt class="filename">/dev/mga_vid</tt> device file can be read for some
info, for example by
</p><pre class="screen">cat /dev/mga_vid</pre><p>
and can be written for brightness change:
</p><pre class="screen">echo "brightness=120" &gt; /dev/mga_vid</pre><p>
</p><p>
There is a test application called <span class="command"><strong>mga_vid_test</strong></span> in the same
directory. It should draw 256x256 images on the screen if all is working well.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tdfxfb"></a>4.6. 3Dfx YUV support</h2></div></div></div><p>
This driver uses the kernel's tdfx framebuffer driver to play movies with
YUV acceleration. You'll need a kernel with tdfxfb support, and recompile
with
</p><pre class="screen">./configure --enable-tdfxfb</pre><p>
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tdfx_vid"></a>4.7. tdfx_vid</h2></div></div></div><p>
This is a combination of a Linux kernel module and a video output
driver, similar to <a class="link" href="#mga_vid" title="4.5. Matrox framebuffer (mga_vid)">mga_vid</a>.
You'll need a 2.4.x kernel with the <code class="systemitem">agpgart</code>
driver since <code class="systemitem">tdfx_vid</code> uses AGP.
Pass <tt class="option">--enable-tdfxfb</tt> to <span class="command"><strong>configure</strong></span>
to build the video output driver and build the kernel module with
the following instructions.
</p><div class="procedure"><a name="idp2764024656"></a><p class="title"><b>Installing the tdfx_vid.o kernel module:</b></p><ol class="procedure" type="1"><li class="step"><p>
  Compile <tt class="filename">drivers/tdfx_vid.o</tt>:
  </p><pre class="screen">
make drivers</pre><p>
</p></li><li class="step"><p>
  Then run (as <code class="systemitem">root</code>)
  </p><pre class="screen">make install-drivers</pre><p>
  which should install the module and create the device node for you.
  Load the driver with
  </p><pre class="screen">insmod tdfx_vid.o</pre><p>
</p></li><li class="step"><p>
  To make it load/unload automatically when needed, first insert the
  following line at the end of <tt class="filename">/etc/modules.conf</tt>:

  </p><pre class="programlisting">alias char-major-178 tdfx_vid</pre><p>
</p></li></ol></div><p>
There is a test application called <span class="command"><strong>tdfx_vid_test</strong></span> in the same
directory. It should print out some useful information if all is working well.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="opengl"></a>4.8. OpenGL output</h2></div></div></div><p>
<span class="application">MPlayer</span> supports displaying movies using OpenGL,
but if your platform/driver supports xv as should be the case on a PC with
Linux, use xv instead, OpenGL performance is considerably worse. If you
have an X11 implementation without xv support, OpenGL is a viable
alternative.
</p><p>
Unfortunately not all drivers support this feature. The Utah-GLX drivers
(for XFree86 3.3.6) support it for all cards.
See <a class="ulink" href="http://utah-glx.sf.net" target="_top">http://utah-glx.sf.net</a> for details about how to
install it.
</p><p>
XFree86(DRI) 4.0.3 or later supports OpenGL with Matrox and Radeon cards,
4.2.0 or later supports Rage128.
See <a class="ulink" href="http://dri.sf.net" target="_top">http://dri.sf.net</a> for download and installation
instructions.
</p><p>
A hint from one of our users: the GL video output can be used to get
vsynced TV output. You'll have to set an environment variable (at
least on nVidia):
</p><p>
<span class="command"><strong>export __GL_SYNC_TO_VBLANK=1</strong></span>
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aalib"></a>4.9. AAlib – text mode displaying</h2></div></div></div><p>
AAlib is a library for displaying graphics in text mode, using powerful
ASCII renderer. There are <span class="emphasis"><em>lots</em></span> of programs already
supporting it, like Doom, Quake, etc. <span class="application">MPlayer</span>
contains a very usable driver for it. If <tt class="filename">./configure</tt>
detects aalib installed, the aalib libvo driver will be built.
</p><p>
You can use some keys in the AA Window to change rendering options:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Key</th><th>Action</th></tr></thead><tbody><tr><td><span class="keycap"><b>1</b></span></td><td>
  decrease contrast
</td></tr><tr><td><span class="keycap"><b>2</b></span></td><td>
  increase contrast
</td></tr><tr><td><span class="keycap"><b>3</b></span></td><td>
  decrease brightness
</td></tr><tr><td><span class="keycap"><b>4</b></span></td><td>
  increase brightness
</td></tr><tr><td><span class="keycap"><b>5</b></span></td><td>
  switch fast rendering on/off
</td></tr><tr><td><span class="keycap"><b>6</b></span></td><td>
  set dithering mode (none, error distribution, Floyd Steinberg)
</td></tr><tr><td><span class="keycap"><b>7</b></span></td><td>
  invert image
</td></tr><tr><td><span class="keycap"><b>8</b></span></td><td>
  toggles between aa and <span class="application">MPlayer</span> control
</td></tr></tbody></table></div><div class="variablelist"><p class="title"><b>The following command line options can be used:</b></p><dl class="variablelist"><dt><span class="term"><tt class="option">-aaosdcolor=<em class="replaceable"><code>V</code></em></tt></span></dt><dd><p>
    change OSD color
  </p></dd><dt><span class="term"><tt class="option">-aasubcolor=<em class="replaceable"><code>V</code></em></tt></span></dt><dd><p>
    Change subtitle color
    </p><p>
    where <em class="replaceable"><code>V</code></em> can be:
    <code class="literal">0</code> (normal),
    <code class="literal">1</code> (dark),
    <code class="literal">2</code> (bold),
    <code class="literal">3</code> (bold font),
    <code class="literal">4</code> (reverse),
    <code class="literal">5</code> (special).
  </p></dd></dl></div><div class="variablelist"><p class="title"><b>AAlib itself provides a large sum of options. Here are some
important:</b></p><dl class="variablelist"><dt><span class="term"><tt class="option">-aadriver</tt></span></dt><dd><p>
    Set recommended aa driver (X11, curses, Linux).
  </p></dd><dt><span class="term"><tt class="option">-aaextended</tt></span></dt><dd><p>
    Use all 256 characters.
  </p></dd><dt><span class="term"><tt class="option">-aaeight</tt></span></dt><dd><p>
    Use eight bit ASCII.
  </p></dd><dt><span class="term"><tt class="option">-aahelp</tt></span></dt><dd><p>
    Prints out all aalib options.
  </p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
The rendering is very CPU intensive, especially when using AA-on-X
(using aalib on X), and it's least CPU intensive on standard,
non-framebuffer console. Use SVGATextMode to set up a big textmode,
then enjoy! (secondary head Hercules cards rock :)) (but IMHO you
can use <tt class="option">-vf 1bpp</tt> option to get graphics on hgafb:)
</p></div><p>
Use the <tt class="option">-framedrop</tt> option if your computer isn't fast
enough to render all frames!
</p><p>
Playing on terminal you'll get better speed and quality using the Linux
driver, not curses (<tt class="option">-aadriver linux</tt>). But therefore you
need write access on
<tt class="filename">/dev/vcsa<em class="replaceable"><code>&lt;terminal&gt;</code></em></tt>!
That isn't autodetected by aalib, but vo_aa tries to find the best mode.
See <a class="ulink" href="http://aa-project.sf.net/tune" target="_top">http://aa-project.sf.net/tune</a> for further
tuning issues.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="caca"></a>4.10. 
<code class="systemitem">libcaca</code> – Color ASCII Art library
</h2></div></div></div><p>
The <a class="ulink" href="http://sam.zoy.org/projects/libcaca/" target="_top"><code class="systemitem">libcaca</code></a>
library is a graphics library that outputs text instead of pixels, so that it
can work on older video cards or text terminals. It is not unlike the famous
<code class="systemitem">AAlib</code> library.
<code class="systemitem">libcaca</code> needs a terminal to work, thus
it should work on all Unix systems (including Mac OS X) using either the
<code class="systemitem">slang</code> library or the
<code class="systemitem">ncurses</code> library, on DOS using the
<code class="systemitem">conio.h</code> library, and on Windows systems
using either <code class="systemitem">slang</code> or
<code class="systemitem">ncurses</code> (through Cygwin emulation) or
<code class="systemitem">conio.h</code>. If
<tt class="filename">./configure</tt>
detects <code class="systemitem">libcaca</code>, the caca libvo driver
will be built.
</p><div class="itemizedlist"><p class="title"><b>The differences with <code class="systemitem">AAlib</code> are
  the following:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
   16 available colors for character output (256 color pairs)
</p></li><li class="listitem"><p>
   color image dithering
</p></li></ul></div><div class="itemizedlist"><p class="title"><b>But <code class="systemitem">libcaca</code> also has the
  following limitations:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
   no support for brightness, contrast, gamma
</p></li></ul></div><p>
You can use some keys in the caca window to change rendering options:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Key</th><th>Action</th></tr></thead><tbody><tr><td><span class="keycap"><b>d</b></span></td><td>
  Toggle <code class="systemitem">libcaca</code> dithering methods.
</td></tr><tr><td><span class="keycap"><b>a</b></span></td><td>
  Toggle <code class="systemitem">libcaca</code> antialiasing.
</td></tr><tr><td><span class="keycap"><b>b</b></span></td><td>
  Toggle <code class="systemitem">libcaca</code> background.
</td></tr></tbody></table></div><div class="variablelist"><p class="title"><b><code class="systemitem">libcaca</code> will also look for
  certain environment variables:</b></p><dl class="variablelist"><dt><span class="term"><tt class="option">CACA_DRIVER</tt></span></dt><dd><p>
    Set recommended caca driver. e.g. ncurses, slang, x11.
  </p></dd><dt><span class="term"><tt class="option">CACA_GEOMETRY (X11 only)</tt></span></dt><dd><p>
    Specifies the number of rows and columns. e.g. 128x50.
  </p></dd><dt><span class="term"><tt class="option">CACA_FONT (X11 only)</tt></span></dt><dd><p>
    Specifies the font to use. e.g. fixed, nexus.
  </p></dd></dl></div><p>
Use the <tt class="option">-framedrop</tt> option if your computer is not fast
enough to render all frames.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vesa"></a>4.11. VESA - output to VESA BIOS</h2></div></div></div><p>
This driver was designed and introduced as a <span class="bold"><strong>generic
driver</strong></span> for any video card which has VESA VBE 2.0 compatible
BIOS. Another advantage of this driver is that it tries to force TV output
on.
<em class="citetitle">VESA BIOS EXTENSION (VBE) Version 3.0 Date: September 16,
1998</em> (Page 70) says:
</p><div class="blockquote"><blockquote class="blockquote"><p><b>Dual-Controller Designs. </b>
VBE 3.0 supports the dual-controller design by assuming that since both
controllers are typically provided by the same OEM, under control of a
single BIOS ROM on the same graphics card, it is possible to hide the fact
that two controllers are indeed present from the application. This has the
limitation of preventing simultaneous use of the independent controllers,
but allows applications released before VBE 3.0 to operate normally. The
VBE Function 00h (Return Controller Information) returns the combined
information of both controllers, including the combined list of available
modes. When the application selects a mode, the appropriate controller is
activated. Each of the remaining VBE functions then operates on the active
controller.
</p></blockquote></div><p>
So you have chances to get working TV-out by using this driver.
(I guess that TV-out frequently is standalone head or standalone output
at least.)
</p><div class="itemizedlist"><p class="title"><b>ADVANTAGES</b></p><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
  You have chances to watch movies <span class="bold"><strong>if Linux even doesn't
  know</strong></span> your video hardware.
</p></li><li class="listitem"><p>
  You don't need to have installed any graphics' related things on your
  Linux (like X11 (AKA XFree86), fbdev and so on). This driver can be run
  from <span class="bold"><strong>text-mode</strong></span>.
</p></li><li class="listitem"><p>
  You have chances to get <span class="bold"><strong>working TV-out</strong></span>.
  (It's known at least for ATI's cards).
</p></li><li class="listitem"><p>
  This driver calls <code class="function">int 10h</code> handler thus it's not
  an emulator - it calls <span class="bold"><strong>real</strong></span> things of
  <span class="emphasis"><em>real</em></span> BIOS in <span class="emphasis"><em>real-mode</em></span>
  (actually in vm86 mode).
</p></li><li class="listitem"><p>
  You can use VIDIX with it, thus getting accelerated video display
  <span class="bold"><strong>and</strong></span> TV output at the same time!
  (Recommended for ATI cards.)
  </p></li><li class="listitem"><p>
  If you have VESA VBE 3.0+, and you had specified
  <tt class="option">monitor-hfreq, monitor-vfreq, monitor-dotclock</tt> somewhere
  (config file, or command line) you will get the highest possible refresh rate.
  (Using General Timing Formula). To enable this feature you have to specify
  <span class="bold"><strong>all</strong></span> your monitor options.
</p></li></ul></div><div class="itemizedlist"><p class="title"><b>DISADVANTAGES</b></p><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
   It works only on <span class="bold"><strong>x86 systems</strong></span>.
</p></li><li class="listitem"><p>
  It can be used only by <code class="systemitem">root</code>.
</p></li><li class="listitem"><p>
  Currently it's available only for <span class="bold"><strong>Linux</strong></span>.
</p></li></ul></div><div class="variablelist"><p class="title"><b>COMMAND LINE OPTIONS AVAILABLE FOR VESA</b></p><dl class="variablelist"><dt><span class="term"><tt class="option">-vo vesa:<em class="replaceable"><code>opts</code></em></tt></span></dt><dd><p>
    currently recognized: <code class="literal">dga</code> to force dga mode and
    <code class="literal">nodga</code> to disable dga mode. In dga mode you can enable
    double buffering via the <tt class="option">-double</tt> option. Note: you may omit
    these parameters to enable <span class="bold"><strong>autodetection</strong></span> of
    dga mode.
  </p></dd></dl></div><div class="itemizedlist"><p class="title"><b>KNOWN PROBLEMS AND WORKAROUNDS</b></p><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
  If you have installed <span class="bold"><strong>NLS</strong></span> font on your
  Linux box and run VESA driver from text-mode then after terminating
  <span class="application">MPlayer</span> you will have
  <span class="bold"><strong>ROM font</strong></span> loaded instead of national.
  You can load national font again by using <span class="command"><strong>setsysfont</strong></span>
  utility from the Mandrake/Mandriva distribution for example.
  (<span class="bold"><strong>Hint</strong></span>: The same utility is used for
  localization of fbdev).
</p></li><li class="listitem"><p>
  Some <span class="bold"><strong>Linux graphics drivers</strong></span> don't update
  active <span class="bold"><strong>BIOS mode</strong></span> in DOS memory.
  So if you have such problem - always use VESA driver only from
  <span class="bold"><strong>text-mode</strong></span>. Otherwise text-mode (#03) will
  be activated anyway and you will need restart your computer.
</p></li><li class="listitem"><p>
  Often after terminating VESA driver you get
  <span class="bold"><strong>black</strong></span> screen. To return your screen to
  original state - simply switch to other console (by pressing
  <span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>F&lt;x&gt;</b></span>)
  then switch to your previous console by the same way.
</p></li><li class="listitem"><p>
  To get <span class="bold"><strong>working TV-out</strong></span> you need have plugged
  TV-connector in before booting your PC since video BIOS initializes
  itself only once during POST procedure.
</p></li></ul></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="x11"></a>4.12. X11</h2></div></div></div><p>
Avoid if possible. Outputs to X11 (uses shared memory extension), with no
hardware acceleration at all. Supports (MMX/3DNow/SSE accelerated, but
still slow) software scaling, use the options <tt class="option">-fs -zoom</tt>.
Most cards have hardware scaling support, use the <tt class="option">-vo xv</tt>
output for them, or <tt class="option">-vo xmga</tt> for Matrox cards.
</p><p>
The problem is that most cards' driver doesn't support hardware
acceleration on the second head/TV. In those cases, you see green/blue
colored window instead of the movie. This is where this driver comes in
handy, but you need powerful CPU to use software scaling. Don't use the SDL
driver's software output+scaler, it has worse image quality!
</p><p>
Software scaling is very slow, you better try changing video modes instead.
It's very simple. See the <a class="link" href="#dga-modelines" title="RESOLUTION SWITCHING">DGA section's
modelines</a>, and insert them into your <tt class="filename">XF86Config</tt>.

</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
  If you have XFree86 4.x.x: use the <tt class="option">-vm</tt> option. It will
  change to a resolution your movie fits in. If it doesn't:
</p></li><li class="listitem"><p>
  With XFree86 3.x.x: you have to cycle through available resolutions
  with the
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Keypad +</b></span>
  and
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Keypad -</b></span>
  keys.
</p></li></ul></div><p>
</p><p>
If you can't find the modes you inserted, browse XFree86's output. Some
drivers can't use low pixelclocks that are needed for low resolution
video modes.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vidix"></a>4.13. VIDIX</h2></div></div></div><p><b>PREAMBLE. </b>
<acronym class="acronym">VIDIX</acronym> is the abbreviation for
<span class="bold"><strong>VID</strong></span>eo
<span class="bold"><strong>I</strong></span>nterface
for *ni<span class="bold"><strong>X</strong></span>.
VIDIX was designed and introduced as an interface for fast user-space drivers
providing such video performance as mga_vid does for Matrox cards. It's also
very portable.
</p><p>
This interface was designed as an attempt to fit existing video
acceleration interfaces (known as mga_vid, rage128_vid, radeon_vid,
pm3_vid) into a fixed scheme. It provides a high level interface to chips
which are known as BES (BackEnd scalers) or OV (Video Overlays). It doesn't
provide low level interface to things which are known as graphics servers.
(I don't want to compete with X11 team in graphics mode switching). I.e.
main goal of this interface is to maximize the speed of video playback.
</p><div class="itemizedlist"><p class="title"><b>USAGE</b></p><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
  You can use standalone video output driver: <tt class="option">-vo xvidix</tt>.
  This driver was developed as X11's front end to VIDIX technology. It
  requires X server and can work only under X server. Note that, as it directly
  accesses the hardware and circumvents the X driver, pixmaps cached in the
  graphics card's memory may be corrupted. You can prevent this by limiting
  the amount of video memory used by X with the XF86Config option "VideoRam"
  in the device section. You should set this to the amount of memory installed
  on your card minus 4MB. If you have less than 8MB of video ram, you can use
  the option "XaaNoPixmapCache" in the screen section instead.
</p></li><li class="listitem"><p>
  There is a console VIDIX driver: <tt class="option">-vo cvidix</tt>.
  This requires a working and initialized framebuffer for most cards (or else
  you'll just mess up the screen), and you'll have a similar effect as with
  <tt class="option">-vo mga</tt> or <tt class="option">-vo fbdev</tt>. nVidia cards however
  are able to output truly graphical video on a real text console. See the
  <a class="link" href="#vidix-nvidia" title="4.13.6. nVidia cards">nvidia_vid</a> section for more information.
  To get rid of text on the borders and the blinking cursor, try something like
  </p><pre class="screen">setterm -cursor off &gt; /dev/tty9</pre><p>
  (assuming <code class="systemitem">tty9</code> is unused so far) and then
  switch to <code class="systemitem">tty9</code>.
  On the other hand, <tt class="option">-colorkey 0</tt> should give you a video
  running in the "background", though this depends on the colorkey
  functionality to work right.
  </p></li><li class="listitem"><p>
  You can use VIDIX subdevice which was applied to several video output
  drivers, such as: <tt class="option">-vo vesa:vidix</tt>
  (<span class="bold"><strong>Linux only</strong></span>) and
  <tt class="option">-vo fbdev:vidix</tt>.
</p></li></ul></div><p>
Indeed it doesn't matter which video output driver is used with
<span class="bold"><strong>VIDIX</strong></span>.
</p><div class="itemizedlist"><p class="title"><b>REQUIREMENTS</b></p><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
  Video card should be in graphics mode (except nVidia cards with the
  <tt class="option">-vo cvidix</tt> output driver).
</p></li><li class="listitem"><p>
  <span class="application">MPlayer</span>'s video output driver should know
  active video mode and be able to tell to VIDIX subdevice some video
  characteristics of server.
</p></li></ul></div><p><b>USAGE METHODS. </b>
When VIDIX is used as <span class="bold"><strong>subdevice</strong></span> (<tt class="option">-vo
vesa:vidix</tt>) then video mode configuration is performed by video
output device (<span class="bold"><strong>vo_server</strong></span> in short). Therefore you can
pass into command line of <span class="application">MPlayer</span> the same keys
as for vo_server. In addition it understands <tt class="option">-double</tt> key
as globally visible parameter. (I recommend using this key with VIDIX at
least for ATI's card). As for <tt class="option">-vo xvidix</tt>, currently it
recognizes the following options: <tt class="option">-fs -zoom -x -y -double</tt>.
</p><p>
Also you can specify VIDIX's driver directly as third subargument in
command line:
</p><pre class="screen">
mplayer -vo xvidix:mga_vid.so -fs -zoom -double <em class="replaceable"><code>file.avi</code></em>
</pre><p>
or
</p><pre class="screen">
mplayer -vo vesa:vidix:radeon_vid.so -fs -zoom -double -bpp 32 <em class="replaceable"><code>file.avi</code></em>
</pre><p>
But it's dangerous, and you shouldn't do that. In this case given driver
will be forced and result is unpredictable (it may
<span class="bold"><strong>freeze</strong></span> your computer). You should do that
ONLY if you are absolutely sure it will work, and
<span class="application">MPlayer</span> doesn't do it automatically. Please tell
about it to the developers. The right way is to use VIDIX without arguments
to enable driver autodetection.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="svgalib_helper"></a>4.13.1. svgalib_helper</h3></div></div></div><p>
Since VIDIX requires direct hardware access you can either run it as root
or set the SUID bit on the <span class="application">MPlayer</span> binary
(<span class="bold"><strong>Warning: This is a security risk!</strong></span>).
Alternatively, you can use a special kernel module, like this:
</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
  Download the
  <a class="ulink" href="http://www.arava.co.il/matan/svgalib/" target="_top">development version</a>
  of svgalib (1.9.x).
</p></li><li class="step"><p>
  Compile the module in the
  <tt class="filename">svgalib_helper</tt> directory (it can be
  found inside the
  <tt class="filename">svgalib-1.9.17/kernel/</tt> directory if
  you've downloaded the source from the svgalib site) and insmod it.
</p></li><li class="step"><p>
  To create the necessary devices in the
  <tt class="filename">/dev</tt> directory, do a
  </p><pre class="screen">make device</pre><p> in the
  <tt class="filename">svgalib_helper</tt> dir, as root.
</p></li><li class="step"><p>
  Then run <tt class="filename">configure</tt> again and pass the parameter
  <tt class="option">--enable-svgalib_helper</tt> as well as
  <tt class="option">--extra-cflags=<em class="replaceable"><code>/path/to/svgalib_helper/sources/</code></em>kernel/svgalib_helper</tt>,
  where <em class="replaceable"><code>/path/to/svgalib_helper/sources/</code></em> has to be
  adjusted to wherever you extracted svgalib_helper sources.
</p></li><li class="step"><p>
  Recompile.
</p></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-ati"></a>4.13.2. ATI cards</h3></div></div></div><p>
Currently most ATI cards are supported natively, from Mach64 to the
newest Radeons.
</p><p>
There are two compiled binaries: <tt class="filename">radeon_vid</tt> for Radeon and
<tt class="filename">rage128_vid</tt> for Rage 128 cards. You may force one or let
the VIDIX system autoprobe all available drivers.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-mga"></a>4.13.3. Matrox cards</h3></div></div></div><p>
Matrox G200, G400, G450 and G550 have been reported to work.
</p><p>
The driver supports video equalizers and should be nearly as fast as the
<a class="link" href="#mga_vid" title="4.5. Matrox framebuffer (mga_vid)">Matrox framebuffer</a>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-trident"></a>4.13.4. Trident cards</h3></div></div></div><p>
There is a driver available for the Trident Cyberblade/i1 chipset, which
can be found on VIA Epia motherboards.
</p><p>
The driver was written and is maintained by
<a class="ulink" href="http://www.blackfiveservices.co.uk/EPIAVidix.shtml" target="_top">Alastair M. Robinson</a>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-3dlabs"></a>4.13.5. 3DLabs cards</h3></div></div></div><p>
Although there is a driver for the 3DLabs GLINT R3 and Permedia3 chips, no one
has tested it, so reports are welcome.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-nvidia"></a>4.13.6. nVidia cards</h3></div></div></div><p>
An unique feature of the nvidia_vid driver is its ability to display video on
<span class="bold"><strong>plain, pure, text-only console</strong></span> - with no
framebuffer or X magic whatsoever. For this purpose, we'll have to use the
<tt class="option">cvidix</tt> video output, as the following example shows:
</p><pre class="screen">mplayer -vo cvidix <em class="replaceable"><code>example.avi</code></em></pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-sis"></a>4.13.7. SiS cards</h3></div></div></div><p>
This is very experimental code, just like nvidia_vid.
</p><p>
It's been tested on SiS 650/651/740 (the most common chipsets used in the
SiS versions of the "Shuttle XPC" barebones boxes out there)
</p><p>
Reports awaited!
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="directfb"></a>4.14. DirectFB</h2></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>
"DirectFB is a graphics library which was designed with embedded systems
in mind. It offers maximum hardware accelerated performance at a minimum
of resource usage and overhead." - quoted from
<a class="ulink" href="http://www.directfb.org" target="_top">http://www.directfb.org</a>
</p></blockquote></div><p>I'll exclude DirectFB features from this section.</p><p>
Though <span class="application">MPlayer</span> is not supported as a "video
provider" in DirectFB, this output driver will enable video playback
through DirectFB. It will - of course - be accelerated, on my Matrox G400
DirectFB's speed was the same as XVideo.
</p><p>
Always try to use the newest version of DirectFB. You can use DirectFB options
on the command line, using the <tt class="option">-dfbopts</tt> option. Layer
selection can be done by the subdevice method, e.g.:
<tt class="option">-vo directfb:2</tt> (layer -1 is default: autodetect)
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dfbmga"></a>4.15. DirectFB/Matrox (dfbmga)</h2></div></div></div><p>
Please read the <a class="link" href="#directfb" title="4.14. DirectFB">main DirectFB</a> section for
general information.
</p><p>
This video output driver will enable CRTC2 (on the second head) on Matrox
G400/G450/G550 cards, displaying video
<span class="bold"><strong>independent</strong></span> of the first head.
</p><p>
Ville Syrjala's has a
<a class="ulink" href="http://www.sci.fi/~syrjala/directfb/Matrox_TV-out_README.txt" target="_top">README</a>
and a
<a class="ulink" href="http://www.sci.fi/~syrjala/directfb/matrox-tv-out-howto" target="_top">HOWTO</a>
on his homepage that explain how to make DirectFB TV output run on Matrox cards.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
the first DirectFB version with which we could get this working was
0.9.17 (it's buggy, needs that <code class="systemitem">surfacemanager</code>
patch from the URL above). Porting the CRTC2 code to
<a class="link" href="#mga_vid" title="4.5. Matrox framebuffer (mga_vid)">mga_vid</a> has been planned for years,
<a class="ulink" href="../../tech/patches.txt" target="_top">patches</a> are welcome.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mpeg_decoders"></a>4.16. MPEG decoders</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="dvb"></a>4.16.1. DVB output and input</h3></div></div></div><p>
<span class="application">MPlayer</span> supports cards with the Siemens DVB chipset
from vendors like Siemens, Technotrend, Galaxis or Hauppauge. The latest DVB
drivers are available from the
<a class="ulink" href="http://www.linuxtv.org" target="_top">Linux TV site</a>.
If you want to do software transcoding you should have at least a 1GHz CPU.
</p><p>
Configure should detect your DVB card. If it did not, force detection with
</p><pre class="screen">./configure --enable-dvb</pre><p>
Then compile and install as usual.</p><p><b>USAGE. </b>
Hardware decoding of streams containing MPEG-1/2 video and/or MPEG audio can be done with this
command:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes <em class="replaceable"><code>file.mpg|vob</code></em>
</pre><p>
</p><p>
Decoding of any other type of video stream requires transcoding to MPEG-1, thus it's slow
and may not be worth the trouble, especially if your computer is slow.
It can be achieved using a command like this:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes <em class="replaceable"><code>yourfile.ext</code></em>
mplayer -ao mpegpes -vo mpegpes -vf expand <em class="replaceable"><code>yourfile.ext</code></em>
</pre><p>
Note that DVB cards only support heights 288 and 576 for PAL or 240 and 480 for
NTSC. You <span class="bold"><strong>must</strong></span> rescale for other heights by
adding <tt class="option">scale=width:height</tt> with the width and height you want
to the <tt class="option">-vf</tt> option. DVB cards accept various widths, like 720,
704, 640, 512, 480, 352 etc. and do hardware scaling in horizontal direction,
so you do not need to scale horizontally in most cases.
For a 512x384 (aspect 4:3) MPEG-4 (DivX) try:
</p><pre class="screen">mplayer -ao mpegpes -vo mpegpes -vf scale=512:576</pre><p>
</p><p>
If you have a widescreen movie and you do not want to scale it to full height,
you can use the <tt class="option">expand=w:h</tt> filter to add black bands. To view a
640x384 MPEG-4 (DivX), try:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes -vf expand=640:576 <em class="replaceable"><code>file.avi</code></em>
</pre><p>
</p><p>
If your CPU is too slow for a full size 720x576 MPEG-4 (DivX), try downscaling:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes -vf scale=352:576 <em class="replaceable"><code>file.avi</code></em>
</pre><p>
</p><p>If speed does not improve, try vertical downscaling, too:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes -vf scale=352:288 <em class="replaceable"><code>file.avi</code></em>
</pre><p>
</p><p>
For OSD and subtitles use the OSD feature of the expand filter. So, instead of
<tt class="option">expand=w:h</tt> or <tt class="option">expand=w:h:x:y</tt>, use
<tt class="option">expand=w:h:x:y:1</tt> (the 5th parameter <tt class="option">:1</tt>
at the end will enable OSD rendering). You may want to move the image up a bit
to get a bigger black zone for subtitles. You may also want to move subtitles
up, if they are outside your TV screen, use the
<tt class="option">-subpos &lt;0-100&gt;</tt>
option to adjust this (<tt class="option">-subpos 80</tt> is a good choice).
</p><p>
In order to play non-25fps movies on a PAL TV or with a slow CPU, add the
<tt class="option">-framedrop</tt> option.
</p><p>
To keep the aspect ratio of MPEG-4 (DivX) files and get the optimal scaling
parameters (hardware horizontal scaling and software vertical scaling
while keeping the right aspect ratio), use the new dvbscale filter:
</p><pre class="screen">
for a  4:3 TV: -vf dvbscale,scale=-1:0,expand=-1:576:-1:-1:1
for a 16:9 TV: -vf dvbscale=1024,scale=-1:0,expand=-1:576:-1:-1:1
</pre><p>
</p><p><b>Digital TV (DVB input module). </b>You can use your DVB card for watching Digital TV.</p><p>
You should have the programs <span class="command"><strong>scan</strong></span> and
<span class="command"><strong>szap/tzap/czap/azap</strong></span> installed; they are all included in
the drivers package.
</p><p>
Verify that your drivers are working properly with a program such as
<a class="ulink" href="http://sf.net/projects/dvbtools/" target="_top"><span class="command"><strong>dvbstream</strong></span></a>
(that is the base of the DVB input module).
</p><p>
Now you should compile a <tt class="filename">~/.mplayer/channels.conf</tt>
file, with the syntax accepted by <span class="command"><strong>szap/tzap/czap/azap</strong></span>, or
have <span class="command"><strong>scan</strong></span> compile it for you.
</p><p>
If you have more than one card type (e.g. Satellite, Terrestrial, Cable and ATSC)
you can save your channels files as
<tt class="filename">~/.mplayer/channels.conf.sat</tt>,
<tt class="filename">~/.mplayer/channels.conf.ter</tt>,
<tt class="filename">~/.mplayer/channels.conf.cbl</tt>,
and <tt class="filename">~/.mplayer/channels.conf.atsc</tt>,
respectively, so as to implicitly hint <span class="application">MPlayer</span>
to use these files rather than <tt class="filename">~/.mplayer/channels.conf</tt>,
and you only need to specify which card to use.
</p><p>
Make sure that you have <span class="emphasis"><em>only</em></span> Free to Air
channels in your <tt class="filename">channels.conf</tt> file, or
<span class="application">MPlayer</span> will wait for an unencrypted transmission.
</p><p>
In your audio and video fields you can use an extended syntax:
<tt class="option">...:pid[+pid]:...</tt> (for a maximum of 6 pids each);
in this case <span class="application">MPlayer</span> will include in the
stream all the indicated pids, plus pid 0 (that contains the PAT).
You should always include in each row the PMT and PCR pids for the
corresponding channel (if you know them).
You can also specify 8192, this will select all pids on this frequency
and you can then switch between the programs with TAB.
This might need more bandwidth, though cheap cards always transfer all
channels at least to the kernel so it does not make much of a difference
for these.
Other possible uses are: televideo pid, second audio track, etc.
</p><p>
If <span class="application">MPlayer</span> complains frequently about
</p><pre class="screen">Too many video/audio packets in the buffer</pre><p> or
if you notice a growing desynchronization between audio and
video verify the presence of the PCR pid in your stream
(needed to comply with the buffering model of the transmitter)
and/or try to use the libavformat MPEG-TS demuxer by adding
<tt class="option">-demuxer lavf -lavfdopts probesize=128</tt>
to your command line.
</p><p>
To show the first of the channels present in your list, run
</p><pre class="screen">mplayer dvb://</pre><p>
</p><p>
If you want to watch a specific channel, such as R1, run
</p><pre class="screen">mplayer dvb://<em class="replaceable"><code>R1</code></em></pre><p>
</p><p>
If you have more than one card you also need to specify the number of the card
where the channel is visible (e.g. 2) with the syntax:
</p><pre class="screen">mplayer dvb://<em class="replaceable"><code>2@R1</code></em></pre><p>
</p><p>
To change channels press the <span class="keycap"><b>h</b></span> (next) and
<span class="keycap"><b>k</b></span> (previous) keys, or use the
<a class="link" href="#osdmenu" title="2.4.3. OSD menu">OSD menu</a>.
</p><p>
To temporarily disable the audio or the video stream copy the
following to <tt class="filename">~/.mplayer/input.conf</tt>:
</p><pre class="screen">
% set_property  switch_video -2
&amp; step_property switch_video
? set_property  switch_audio -2
^ step_property switch_audio
</pre><p>
(Overriding the action keys as preferred.) When pressing the key
corresponding to switch_x -2 the associated stream will be closed;
when pressing the key corresponding to step_x the stream will be reopened.
Notice that this switching mechanism will not work as expected when there
are multiple audio and video streams in the multiplex.
</p><p>
During playback (not during recording), in order to prevent stuttering
and error messages such as 'Your system is too slow' it is advisable to add
</p><pre class="screen">
-mc 10 -speed 0.97 -af scaletempo
</pre><p>
to your command line, adjusting the scaletempo parameters as preferred.
</p><p>
If your <tt class="filename">~/.mplayer/menu.conf</tt> contains a
<code class="literal">&lt;dvbsel&gt;</code> entry, such as the one in the example
file <tt class="filename">etc/dvb-menu.conf</tt> (that you can use to overwrite
<tt class="filename">~/.mplayer/menu.conf</tt>), the main menu will show a
sub-menu entry that will permit you to choose one of the channels present
in your <tt class="filename">channels.conf</tt>, possibly preceded by a menu
with the list of cards available if more than one is usable by
<span class="application">MPlayer</span>.
</p><p>
If you want to save a program to disk you can use
</p><pre class="screen">
mplayer -dumpfile <em class="replaceable"><code>r1.ts</code></em> -dumpstream dvb://<em class="replaceable"><code>R1</code></em>
</pre><p>
</p><p>
If you want to record it in a different format (re-encoding it) instead
you can run a command such as
</p><pre class="screen">
mencoder -o <em class="replaceable"><code>r1.avi</code></em> -ovc xvid -xvidencopts bitrate=800 \
    -oac mp3lame -lameopts cbr:br=128 -pp=ci dvb://<em class="replaceable"><code>R1</code></em>
</pre><p>
</p><p>
Read the man page for a list of options that you can pass to the
DVB input module.
</p><p><b>FUTURE. </b>
If you have questions or want to hear feature announcements and take part in
discussions on this subject, join our
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dvb" target="_top">MPlayer-DVB</a>
mailing list. Please remember that the list language is English.
</p><p>
In the future you may expect the ability to display OSD and subtitles using
the native OSD feature of DVB cards.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="dxr2"></a>4.16.2. DXR2</h3></div></div></div><p>
<span class="application">MPlayer</span> supports hardware accelerated playback
with the Creative DXR2 card.
</p><p>
First of all you will need properly installed DXR2 drivers. You can find
the drivers and installation instructions at the
<a class="ulink" href="http://dxr2.sf.net/" target="_top">DXR2 Resource Center</a> site.
</p><div class="variablelist"><p class="title"><b>USAGE</b></p><dl class="variablelist"><dt><span class="term"><tt class="option">-vo dxr2</tt></span></dt><dd><p>Enable TV output.</p></dd><dt><span class="term"><tt class="option">-vo dxr2:x11</tt> or <tt class="option">-vo dxr2:xv</tt></span></dt><dd><p>Enable Overlay output in X11.</p></dd><dt><span class="term"><tt class="option">-dxr2 &lt;option1:option2:...&gt;</tt></span></dt><dd><p>
  This option is used to control the DXR2 driver.
  </p></dd></dl></div><p>
The overlay chipset used on the DXR2 is of pretty bad quality but the
default settings should work for everybody. The OSD may be usable with the
overlay (not on TV) by drawing it in the colorkey. With the default colorkey
settings you may get variable results, usually you will see the colorkey
around the characters or some other funny effect. But if you properly adjust
the colorkey settings you should be able to get acceptable results.
</p><p>Please see the man page for available options.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="dxr3"></a>4.16.3. DXR3/Hollywood+</h3></div></div></div><p>
<span class="application">MPlayer</span> supports hardware accelerated playback
with the Creative DXR3 and Sigma Designs Hollywood Plus cards. These cards
both use the em8300 MPEG decoder chip from Sigma Designs.
</p><p>
First of all you will need properly installed DXR3/H+ drivers, version 0.12.0
or later. You can find the drivers and installation instructions at the
<a class="ulink" href="http://dxr3.sf.net/" target="_top">DXR3 &amp; Hollywood Plus for Linux</a>
site. <tt class="filename">configure</tt> should detect your card automatically,
compilation should go without problems.
</p><div class="variablelist"><p class="title"><b>USAGE</b></p><dl class="variablelist"><dt><span class="term"><tt class="option">-vo dxr3:prebuf:sync:norm=x:<em class="replaceable"><code>device</code></em></tt></span></dt><dd><p>
<tt class="option">overlay</tt> activates the overlay instead of TV-out. It requires
that you have a properly configured overlay setup to work right. The easiest
way to configure the overlay is to first run autocal. Then run mplayer with
dxr3 output and without overlay turned on, run dxr3view. In dxr3view you can
tweak the overlay settings and see the effects in realtime, perhaps this feature
will be supported by the <span class="application">MPlayer</span> GUI in the future.
When overlay is properly set up you will no longer need to use dxr3view.
<tt class="option">prebuf</tt> turns on prebuffering. Prebuffering is a feature of the
em8300 chip that enables it to hold more than one frame of video at a time.
This means that when you are running with prebuffering
<span class="application">MPlayer</span> will try to keep the video buffer filled
with data at all times.
If you are on a slow machine <span class="application">MPlayer</span> will probably
use close to, or precisely 100% of CPU.
This is especially common if you play pure MPEG streams
(like DVDs, SVCDs a.s.o.) since <span class="application">MPlayer</span> will not have
to reencode it to MPEG it will fill the buffer very fast.
With prebuffering video playback is <span class="bold"><strong>much</strong></span>
less sensitive to other programs hogging the CPU, it will not drop frames unless
applications hog the CPU for a long time.
When running without prebuffering the em8300 is much more sensitive to CPU load,
so it is highly suggested that you turn on <span class="application">MPlayer</span>'s
<tt class="option">-framedrop</tt> option to avoid further loss of sync.
<tt class="option">sync</tt> will turn on the new sync-engine. This is currently an
experimental feature. With the sync feature turned on the em8300's internal
clock will be monitored at all times, if it starts to deviate from
<span class="application">MPlayer</span>'s clock it will be reset causing the em8300
to drop any frames that are lagging behind.
<tt class="option">norm=x</tt> will set the TV norm of the DXR3 card without the need
for external tools like em8300setup. Valid norms are 5 = NTSC, 4 = PAL-60,
3 = PAL. Special norms are 2 (auto-adjust using PAL/PAL-60) and 1 (auto-adjust
using PAL/NTSC) because they decide which norm to use by looking at the frame
rate of the movie. norm = 0 (default) does not change the current norm.
<tt class="option"><em class="replaceable"><code>device</code></em></tt> = device number to use if
you have more than one em8300 card. Any of these options may be left out.
<tt class="option">:prebuf:sync</tt> seems to work great when playing MPEG-4 (DivX)
movies. People have reported problems using the prebuf option when playing
MPEG-1/2 files.
You might want to try running without any options first, if you have sync
problems, or DVD subtitle problems, give <tt class="option">:sync</tt> a try.
</p></dd><dt><span class="term"><tt class="option">-ao oss:/dev/em8300_ma-<em class="replaceable"><code>X</code></em></tt></span></dt><dd><p>
  For audio output, where <em class="replaceable"><code>X</code></em> is the device number
  (0 if one card).
  </p></dd><dt><span class="term"><tt class="option">-af resample=<em class="replaceable"><code>xxxxx</code></em></tt></span></dt><dd><p>
  The em8300 cannot play back samplerates lower than 44100Hz. If the sample
  rate is below 44100Hz select either 44100Hz or 48000Hz depending on which
  one matches closest. I.e. if the movie uses 22050Hz use 44100Hz as
  44100 / 2 = 22050, if it is 24000Hz use 48000Hz as 48000 / 2 = 24000
  and so on.
  This does not work with digital audio output (<tt class="option">-ac hwac3</tt>).
  </p></dd><dt><span class="term"><tt class="option">-vf lavc</tt></span></dt><dd><p>
  To watch non-MPEG content on the em8300 (i.e. MPEG-4 (DivX) or RealVideo)
  you have to specify an MPEG-1 video filter such as
  <code class="systemitem">libavcodec</code> (lavc).
  See the man page for further info about <tt class="option">-vf lavc</tt>.
  Currently there is no way of setting the fps of the em8300 which means that
  it is fixed to 30000/1001 fps.
  Because of this it is highly recommended that you use
  <tt class="option">-vf lavc=<em class="replaceable"><code>quality</code></em>:25</tt>
  especially if you are using prebuffering. Then why 25 and not 30000/1001?
  Well, the thing is that when you use 30000/1001 the picture becomes a bit
  jumpy.
  The reason for this is unknown to us.
  If you set it to somewhere between 25 and 27 the picture becomes stable.
  For now all we can do is accept this for a fact.
  </p></dd><dt><span class="term"><tt class="option">-vf expand=-1:-1:-1:-1:1</tt></span></dt><dd><p>
  Although the DXR3 driver can put some OSD onto the MPEG-1/2/4 video, it has
  much lower quality than <span class="application">MPlayer</span>'s traditional OSD,
  and has several refresh problems as well. The command line above will firstly
  convert the input video to MPEG-4 (this is mandatory, sorry), then apply an
  expand filter which won't expand anything (-1: default), but apply the normal
  OSD onto the picture (that's what the "1" at the end does).
  </p></dd><dt><span class="term"><tt class="option">-ac hwac3</tt></span></dt><dd><p>
  The em8300 supports playing back AC-3 audio (surround sound) through the
  digital audio output of the card. See the <tt class="option">-ao oss</tt> option
  above, it must be used to specify the DXR3's output instead of a sound card.
  </p></dd></dl></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="zr"></a>4.17. Zr</h2></div></div></div><p>
This is a display-driver (<tt class="option">-vo zr</tt>) for a number of MJPEG
capture/playback cards (tested for DC10+ and Buz, and it should work for the
LML33, the DC10). The driver works by encoding the frame to JPEG and then
sending it to the card. For the JPEG encoding
<code class="systemitem">libavcodec</code>
is used, and required. With the special <span class="emphasis"><em>cinerama</em></span> mode,
you can watch movies in true wide screen provided that you have two beamers
and two MJPEG cards. Depending on resolution and quality settings, this driver
may require a lot of CPU power, remember to specify <tt class="option">-framedrop</tt>
if your machine is too slow. Note: My AMD K6-2 350MHz is (with
<tt class="option">-framedrop</tt>) quite adequate for watching VCD sized material and
downscaled movies.
</p><p>
This driver talks to the kernel driver available at
<a class="ulink" href="http://mjpeg.sf.net" target="_top">http://mjpeg.sf.net</a>, so
you must get it working first. The presence of an MJPEG card is autodetected by
the <tt class="filename">configure</tt> script, if autodetection fails, force
detection with
</p><pre class="screen">./configure --enable-zr</pre><p>
</p><p>
The output can be controlled by several options, a long description of the
options can be found in the man page, a short list of options can be viewed
by running
</p><pre class="screen">mplayer -zrhelp</pre><p>
</p><p>
Things like scaling and the OSD (on screen display) are not handled by
this driver but can be done using the video filters. For example, suppose
that you have a movie with a resolution of 512x272 and you want to view it
fullscreen on your DC10+. There are three main possibilities, you may scale
the movie to a width of 768, 384 or 192. For performance and quality reasons,
I would choose to scale the movie to 384x204 using the fast bilinear software
scaler. The command line is
</p><pre class="screen">
mplayer -vo zr -sws 0 -vf scale=384:204 <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p><p>
Cropping can be done by the <tt class="option">crop</tt> filter and by this
driver itself. Suppose that a movie is too wide for display on your Buz and
that you want to use <tt class="option">-zrcrop</tt> to make the movie less wide,
then you would issue the following command
</p><pre class="screen">
mplayer -vo zr -zrcrop 720x320+80+0 <em class="replaceable"><code>benhur.avi</code></em>
</pre><p>
</p><p>
if you want to use the <tt class="option">crop</tt> filter, you would do
</p><pre class="screen">
mplayer -vo zr -vf crop=720:320:80:0 <em class="replaceable"><code>benhur.avi</code></em>
</pre><p>
</p><p>
Extra occurrences of <tt class="option">-zrcrop</tt> invoke
<span class="emphasis"><em>cinerama</em></span> mode, i.e. you can distribute the movie over
several TVs or beamers to create a larger screen.
Suppose you have two beamers. The left one is connected to your
Buz at <tt class="filename">/dev/video1</tt> and the right one is connected to
your DC10+ at <tt class="filename">/dev/video0</tt>. The movie has a resolution
of 704x288. Suppose also that you want the right beamer in black and white and
that the left beamer should have JPEG frames at quality 10, then you would
issue the following command
</p><pre class="screen">
mplayer -vo zr -zrdev /dev/video0 -zrcrop 352x288+352+0 -zrxdoff 0 -zrbw \
    -zrcrop 352x288+0+0 -zrdev /dev/video1 -zrquality 10 \
        <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p><p>
You see that the options appearing before the second <tt class="option">-zrcrop</tt>
only apply to the DC10+ and that the options after the second
<tt class="option">-zrcrop</tt> apply to the Buz. The maximum number of MJPEG cards
participating in <span class="emphasis"><em>cinerama</em></span> is four, so you can build a
2x2 vidiwall.
</p><p>
Finally an important remark: Do not start or stop XawTV on the playback device
during playback, it will crash your computer. It is, however, fine to
<span class="bold"><strong>FIRST</strong></span> start XawTV,
<span class="bold"><strong>THEN</strong></span> start <span class="application">MPlayer</span>,
wait for <span class="application">MPlayer</span>
to finish and <span class="bold"><strong>THEN</strong></span> stop XawTV.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="blinkenlights"></a>4.18. Blinkenlights</h2></div></div></div><p>
This driver is capable of playback using the Blinkenlights UDP protocol. If you
don't know what <a class="ulink" href="http://www.blinkenlights.de/" target="_top">Blinkenlights</a>
or its successor
<a class="ulink" href="http://www.blinkenlights.de/arcade/" target="_top">Arcade</a>
are, find it out. Although this is most probably the least used video output
driver, without a doubt it is the coolest <span class="application">MPlayer</span>
has to offer. Just watch some of the
<a class="ulink" href="http://www.blinkenlights.de/video.en.html" target="_top">Blinkenlights documentation videos</a>.
On the Arcade video you can see the Blinkenlights output driver in
action at 00:07:50.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tvout"></a>4.19. TV-out support</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-mga-g400"></a>4.19.1. Matrox G400 cards</h3></div></div></div><p>
Under Linux you have two methods to get G400 TV out working:
</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
for Matrox G450/G550 TV-out instructions, please see the next section!
</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">XFree86</span></dt><dd><p>
    Using the driver and the HAL module, available from the <a class="ulink" href="http://www.matrox.com" target="_top">Matrox site</a>. This will give you X
    on the TV.
    </p><p>
    <span class="bold"><strong>This method doesn't give you accelerated playback</strong></span>
    as under Windows! The second head has only YUV framebuffer, the
    <span class="emphasis"><em>BES</em></span> (Back End Scaler, the YUV scaler on
    G200/G400/G450/G550 cards) doesn't work on it! The windows driver somehow
    workarounds this, probably by using the 3D engine to zoom, and the YUV
    framebuffer to display the zoomed image. If you really want to use X, use
    the <tt class="option">-vo x11 -fs -zoom</tt> options, but it will be
    <span class="bold"><strong>SLOW</strong></span>, and has
    <span class="bold"><strong>Macrovision</strong></span> copy protection enabled
    (you can "workaround" Macrovision using this
    <a class="ulink" href="http://avifile.sf.net/mgamacro.pl" target="_top">Perl script</a>).
    </p></dd><dt><span class="term">Framebuffer</span></dt><dd><p>
    Using the <span class="bold"><strong>matroxfb modules</strong></span> in the 2.4
    kernels. 2.2 kernels don't have the TV-out feature in them, thus unusable
    for this. You have to enable ALL matroxfb-specific features during
    compilation (except MultiHead), and compile them into
    <span class="bold"><strong>modules</strong></span>!
    You'll also need to enable I2C and put the tools
    <span class="application">matroxset</span>, <span class="application">fbset</span>
    and <span class="application">con2fb</span> in your path.
    </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
      Then load the <code class="systemitem">matroxfb_Ti3026, matroxfb_maven, i2c-matroxfb,
      matroxfb_crtc2</code> modules into your kernel. Your text-mode
      console will enter into framebuffer mode (no way back!).
    </p></li><li class="step"><p>
      Next, set up your monitor and TV to your liking using the above tools.
    </p></li><li class="step"><p>
      Yoh. Next task is to make the cursor on tty1 (or whatever) to
      disappear, and turn off screen blanking. Execute the following
      commands:

      </p><pre class="screen">
echo -e '\033[?25l'
setterm -blank 0</pre><p>
      or
      </p><pre class="screen">
setterm -cursor off
setterm -blank 0</pre><p>

      You possibly want to put the above into a script, and also clear the
      screen. To turn the cursor back:
      </p><pre class="screen">echo -e '\033[?25h'</pre><p> or
      </p><pre class="screen">setterm -cursor on</pre><p>
    </p></li><li class="step"><p>
      Yeah kewl. Start movie playing with
      </p><pre class="screen">
mplayer -vo mga -fs -screenw 640 -screenh 512 <em class="replaceable"><code>filename</code></em></pre><p>

      (If you use X, now change to matroxfb with for example
      <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>F1</b></span>.)
      Change <code class="literal">640</code> and <code class="literal">512</code> if you set
      the resolution to other...
    </p></li><li class="step"><p>
      <span class="bold"><strong>Enjoy the ultra-fast ultra-featured Matrox TV
      output (better than Xv)!</strong></span>
    </p></li></ol></div></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tv-out_matrox_g450"></a>4.19.2. Matrox G450/G550 cards</h3></div></div></div><p>
TV output support for these cards has only been recently introduced, and is
not yet in the mainstream kernel.
Currently the <span class="bold"><strong>mga_vid</strong></span> module can't be used
AFAIK, because the G450/G550 driver works only in one configuration: the first
CRTC chip (with much more features) on the first display (on monitor),
and the second CRTC (no <span class="bold"><strong>BES</strong></span> - for
explanation on BES, please see the G400 section above) on TV. So you can only
use <span class="application">MPlayer</span>'s <span class="emphasis"><em>fbdev</em></span> output
driver at the present.
</p><p>
The first CRTC can't be routed to the second head currently. The author of the
kernel matroxfb driver - Petr Vandrovec - will maybe make support for this, by
displaying the first CRTC's output onto both of the heads at once, as currently
recommended for G400, see the section above.
</p><p>
The necessary kernel patch and the detailed HOWTO is downloadable from
<a class="ulink" href="http://www.bglug.ca/matrox_tvout/" target="_top">http://www.bglug.ca/matrox_tvout/</a>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tv-out_matrox_cable"></a>4.19.3. Building a Matrox TV-out cable</h3></div></div></div><p>
No one takes any responsibility, nor guarantee for any damage caused
by this documentation.
</p><p><b>Cable for G400. </b>
The CRTC2 connector's fourth pin is the composite video signal. The
ground are the sixth, seventh and eighth pins. (info contributed
from Balázs Rácz)
</p><p><b>Cable for G450. </b>
The CRTC2 connector's first pin is the composite video signal. The
ground are the fifth, sixth, seventh, and fifteenth (5, 6, 7, 15)
pins. (info contributed from Balázs Kerekes)
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-ati"></a>4.19.4. ATI cards</h3></div></div></div><p><b>PREAMBLE. </b>
Currently ATI doesn't want to support any of its TV-out chips under Linux,
because of their licensed Macrovision technology.
</p><div class="itemizedlist"><p class="title"><b>ATI CARDS TV-OUT STATUS ON LINUX</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>ATI Mach64</strong></span>:
  supported by <a class="ulink" href="http://gatos.sf.net" target="_top">GATOS</a>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>ASIC Radeon VIVO</strong></span>:
  supported by <a class="ulink" href="http://gatos.sf.net" target="_top">GATOS</a>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Radeon</strong></span> and <span class="bold"><strong>Rage128</strong></span>:
  supported by <span class="application">MPlayer</span>!
  Check <a class="link" href="#vesa" title="4.11. VESA - output to VESA BIOS">VESA driver</a> and
  <a class="link" href="#vidix" title="4.13. VIDIX">VIDIX</a> sections.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Rage Mobility P/M, Radeon, Rage 128, Mobility M3/M4</strong></span>:
  supported by
  <a class="ulink" href="http://www.stud.uni-hamburg.de/users/lennart/projects/atitvout/" target="_top">atitvout</a>.
</p></li></ul></div><p>
On other cards, just use the <a class="link" href="#vesa" title="4.11. VESA - output to VESA BIOS">VESA</a> driver,
without VIDIX. Powerful CPU is needed, though.
</p><p>
Only thing you need to do - <span class="bold"><strong>Have the TV connector
plugged in before booting your PC</strong></span> since video BIOS initializes
itself only once during POST procedure.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-nvidia"></a>4.19.5. nVidia</h3></div></div></div><p>
First, you MUST download the closed-source drivers from
<a class="ulink" href="http://nvidia.com" target="_top">http://nvidia.com</a>.
I will not describe the installation and configuration process because it does
not cover the scope of this documentation.
</p><p>
After XFree86, XVideo, and 3D acceleration is properly working, edit your
card's Device section in the <tt class="filename">XF86Config</tt> file, according
to the following example (adapt for your card/TV):

</p><pre class="programlisting">
Section "Device"
        Identifier      "GeForce"
        VendorName      "ASUS"
        BoardName       "nVidia GeForce2/MX 400"
        Driver          "nvidia"
        #Option         "NvAGP" "1"
        Option          "NoLogo"
        Option          "CursorShadow"  "on"

        Option          "TwinView"
        Option          "TwinViewOrientation" "Clone"
        Option          "MetaModes" "1024x768,640x480"
        Option          "ConnectedMonitor" "CRT, TV"
        Option          "TVStandard" "PAL-B"
        Option          "TVOutFormat" "Composite"
EndSection
</pre><p>
</p><p>
Of course the important thing is the TwinView part.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-neomagic"></a>4.19.6. NeoMagic</h3></div></div></div><p>
The NeoMagic chip is found in a variety of laptops, some of them are equipped
with a simple analog TV encoder, some have a more advanced one.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>Analog encoder chip</strong></span>:
  It has been reported that reliable TV out can be obtained by using
  <tt class="option">-vo fbdev</tt> or <tt class="option">-vo fbdev2</tt>.
  You need to have vesafb compiled in your kernel and pass
  the following parameters on the kernel command line:
  <tt class="option">append="video=vesafb:ywrap,mtrr" vga=791</tt>.
  You should start <span class="application">X</span>, then switch to console mode
  with e.g.
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>F1</b></span>.
  If you fail to start <span class="application">X</span> before running
  <span class="application">MPlayer</span> from the console, the video
  becomes slow and choppy (explanations are welcome).
  Login to your console, then initiate the following command:

  </p><pre class="screen">clear; mplayer -vo fbdev -zoom -cache 8192 dvd://</pre><p>

  Now you should see the movie running in console mode filling up about
  half your laptop's LCD screen. To switch to TV hit
  <span class="keycap"><b>Fn</b></span>+<span class="keycap"><b>F5</b></span> three times.
  Tested on a Tecra 8000, 2.6.15 kernel with vesafb, ALSA v1.0.10.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Chrontel 70xx encoder chip</strong></span>:
  Found in IBM Thinkpad 390E and possibly other Thinkpads or notebooks.
  </p><p>
  You must use <tt class="option">-vo vesa:neotv_pal</tt> for PAL or
  <tt class="option">-vo vesa:neotv_ntsc</tt> for NTSC.
  It will provide TV output function in the following 16 bpp and 8 bpp modes:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>NTSC 320x240, 640x480 and maybe 800x600 too.</p></li><li class="listitem"><p>PAL  320x240, 400x300, 640x480, 800x600.</p></li></ul></div><p>Mode 512x384 is not supported in BIOS. You must scale the image
  to a different resolution to activate TV out. If you can see an image on the
  screen in 640x480 or in 800x600 but not in 320x240 or other smaller
  resolution you need to replace two tables in <tt class="filename">vbelib.c</tt>.
  See the vbeSetTV function for details. Please contact the author in this case.
  </p><p>
  Known issues: VESA-only, no other controls such as brightness, contrast,
  blacklevel, flickfilter are implemented.
  </p></li></ul></div><p>
</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="ports"></a>Chapter 5. Ports</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect1"><a href="#linux">5.1. Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#debian">5.1.1. Debian packaging</a></span></dt><dt><span class="sect2"><a href="#rpm">5.1.2. RPM packaging</a></span></dt><dt><span class="sect2"><a href="#arm_linux">5.1.3. ARM Linux</a></span></dt></dl></dd><dt><span class="sect1"><a href="#bsd">5.2. *BSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#freebsd">5.2.1. FreeBSD</a></span></dt><dt><span class="sect2"><a href="#openbsd">5.2.2. OpenBSD</a></span></dt><dt><span class="sect2"><a href="#darwin">5.2.3. Darwin</a></span></dt></dl></dd><dt><span class="sect1"><a href="#unix">5.3. Commercial Unix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#solaris">5.3.1. Solaris</a></span></dt><dt><span class="sect2"><a href="#hp-ux">5.3.2. HP-UX</a></span></dt><dt><span class="sect2"><a href="#aix">5.3.3. AIX</a></span></dt><dt><span class="sect2"><a href="#qnx">5.3.4. QNX</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windows">5.4. Windows</a></span></dt><dd><dl><dt><span class="sect2"><a href="#cygwin">5.4.1. <span class="application">Cygwin</span></a></span></dt><dt><span class="sect2"><a href="#mingw">5.4.2. <span class="application">MinGW</span></a></span></dt></dl></dd><dt><span class="sect1"><a href="#macos">5.5. Mac OS</a></span></dt><dd><dl><dt><span class="sect2"><a href="#osx_gui">5.5.1. MPlayer OS X GUI</a></span></dt></dl></dd></dl></div><p>
Binary packages of <span class="application">MPlayer</span> are available from several
sources. We have a list of places to get
<a class="ulink" href="http://www.mplayerhq.hu/design7/projects.html#unofficial_packages" target="_top">unofficial packages</a>
for various systems on our homepage.
However, <span class="bold"><strong>none of these packages are supported</strong></span>.
Report problems to the authors, not to us.
</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="linux"></a>5.1. Linux</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="debian"></a>5.1.1. Debian packaging</h3></div></div></div><p>
To build a Debian package, run the following command in the
<span class="application">MPlayer</span> source directory:

</p><pre class="screen">fakeroot debian/rules binary</pre><p>

If you want to pass custom options to configure, you can set up the
<code class="envar">DEB_BUILD_OPTIONS</code> environment variable. For instance,
if you want GUI and OSD menu support you would use:

</p><pre class="screen">DEB_BUILD_OPTIONS="--enable-gui --enable-menu" fakeroot debian/rules binary</pre><p>

You can also pass some variables to the Makefile. For example, if you want
to compile with gcc 3.4 even if it's not the default compiler:

</p><pre class="screen">CC=gcc-3.4 DEB_BUILD_OPTIONS="--enable-gui" fakeroot debian/rules binary</pre><p>

To clean up the source tree run the following command:

</p><pre class="screen">fakeroot debian/rules clean</pre><p>

As root you can then install the <tt class="filename">.deb</tt> package as usual:

</p><pre class="screen">dpkg -i ../mplayer_<em class="replaceable"><code>version</code></em>.deb</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="rpm"></a>5.1.2. RPM packaging</h3></div></div></div><p>
To build an RPM package, run the following command in the
<span class="application">MPlayer</span> source directory:

</p><pre class="screen">FIXME: insert proper commands here</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="arm_linux"></a>5.1.3. ARM Linux</h3></div></div></div><p>
<span class="application">MPlayer</span> works on Linux PDAs with ARM CPU e.g. Sharp
Zaurus, Compaq Ipaq. The easiest way to obtain
<span class="application">MPlayer</span> is to get it from one of the
<a class="ulink" href="http://www.openzaurus.org" target="_top">OpenZaurus</a> package feeds.
If you want to compile it yourself, you should look at the
<a class="ulink" href="http://openzaurus.bkbits.net:8080/buildroot/src/packages/mplayer?nav=index.html%7Csrc/.%7Csrc/packages" target="_top">mplayer</a>
and the
<a class="ulink" href="http://openzaurus.bkbits.net:8080/buildroot/src/packages/libavcodec?nav=index.html%7Csrc/.%7Csrc/packages" target="_top">libavcodec</a>
directory in the OpenZaurus distribution buildroot. These always have the latest
Makefile and patches used for building a SVN <span class="application">MPlayer</span>.
If you need a GUI frontend, you can use xmms-embedded.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bsd"></a>5.2. *BSD</h2></div></div></div><p>
<span class="application">MPlayer</span> runs on all known BSD flavors.
There are ports/pkgsrc/fink/etc versions of <span class="application">MPlayer</span>
available that are probably easier to use than our raw sources.
</p><p>
If <span class="application">MPlayer</span> complains about not finding
<tt class="filename">/dev/cdrom</tt> or <tt class="filename">/dev/dvd</tt>,
create an appropriate symbolic link:
</p><pre class="screen">ln -s /dev/<em class="replaceable"><code>your_cdrom_device</code></em> /dev/cdrom</pre><p>
</p><p>
To use Win32 DLLs with <span class="application">MPlayer</span> you will need to
re-compile the kernel with "<code class="envar">option USER_LDT</code>"
(unless you run FreeBSD-CURRENT,
where this is the default).
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="freebsd"></a>5.2.1. FreeBSD</h3></div></div></div><p>
If your CPU has SSE, recompile your kernel with
"<code class="envar">options CPU_ENABLE_SSE</code>" (FreeBSD-STABLE or kernel
patches required).
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="openbsd"></a>5.2.2. OpenBSD</h3></div></div></div><p>
Due to limitations in different versions of gas (relocation vs MMX), you
will need to compile in two steps: First make sure that the non-native as
is first in your <code class="envar">$PATH</code> and do a <span class="command"><strong>gmake -k</strong></span>, then
make sure that the native version is used and do <span class="command"><strong>gmake</strong></span>.
</p><p>
As of OpenBSD 3.4 the hack above is no longer needed.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="darwin"></a>5.2.3. Darwin</h3></div></div></div><p>
See the <a class="link" href="#macos" title="5.5. Mac OS">Mac OS</a> section.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="unix"></a>5.3. Commercial Unix</h2></div></div></div><p>
<span class="application">MPlayer</span> has been ported to a number of commercial
Unix variants. Since the development environments on these systems tend to be
different from those found on free Unixes, you may have to make some manual
adjustments to make the build work.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="solaris"></a>5.3.1. Solaris</h3></div></div></div><p>
Solaris still has broken, POSIX-incompatible system tools and shell in default
locations. Until a bold step out of the computing stone age is made, you will
have to add <tt class="filename">/usr/xpg4/bin</tt> to your
<code class="systemitem">PATH</code>.
</p><p>
<span class="application">MPlayer</span> should work on Solaris 2.6 or newer.
Use the SUN audio driver with the <tt class="option">-ao sun</tt> option for sound.
</p><p>
On <span class="bold"><strong>UltraSPARCs</strong></span>,
<span class="application">MPlayer</span> takes advantage of their
<span class="bold"><strong>VIS</strong></span> extensions
(equivalent to MMX), currently only in
<code class="systemitem">libmpeg2</code>,
<code class="systemitem">libvo</code>
and <code class="systemitem">libavcodec</code>.
You can watch a VOB file
on a 400MHz CPU. You'll need
<a class="ulink" href="http://www.sun.com/sparc/vis/mediaLib.html" target="_top"><code class="systemitem">mLib</code></a>
installed.
</p><p><span class="bold"><strong>Caveat:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>mediaLib</strong></span> is
  <span class="bold"><strong>currently disabled</strong></span> by default in
  <span class="application">MPlayer</span> because of brokenness. SPARC users
  who build MPlayer with mediaLib support have reported a thick,
  green-tint on video encoded and decoded with libavcodec. You may enable
  it if you wish with:
  </p><pre class="screen">./configure --enable-mlib</pre><p>
  You do this at your own risk. x86 users should
  <span class="bold"><strong>never</strong></span> use mediaLib, as this will
  result in very poor MPlayer performance.
</p></li></ul></div><p>
On Solaris SPARC, you need the GNU C/C++ Compiler; it does not matter if
GNU C/C++ compiler is configured with or without the GNU assembler.
</p><p>
On Solaris x86, you need the GNU assembler and the GNU C/C++ compiler,
configured to use the GNU assembler! The <span class="application">MPlayer</span>
code on the x86 platform makes heavy use of MMX, SSE and 3DNOW! instructions
that cannot be compiled using Sun's assembler
<tt class="filename">/usr/ccs/bin/as</tt>.
</p><p>
The <tt class="filename">configure</tt> script tries to find out, which assembler
program is used by your "gcc" command (in case the autodetection
fails, use the
<tt class="option">--as=<em class="replaceable"><code>/wherever/you/have/installed/gnu-as</code></em></tt>
option to tell the <tt class="filename">configure</tt> script where it can find GNU
"as" on your system).
</p><p>Solutions to common problems:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Error message from <tt class="filename">configure</tt> on a Solaris x86 system
  using GCC without GNU assembler:
  </p><pre class="screen">
% configure
...
Checking assembler (/usr/ccs/bin/as) ... , failed
Please upgrade(downgrade) binutils to 2.10.1...</pre><p>
  (Solution: Install and use a gcc configured with
  <tt class="option">--with-as=gas</tt>)
</p><p>
Typical error you get when building with a GNU C compiler that does not
use GNU as:
</p><pre class="screen">
% gmake
...
gcc -c -Iloader -Ilibvo -O4 -march=i686 -mcpu=i686 -pipe -ffast-math
    -fomit-frame-pointer  -I/usr/local/include   -o mplayer.o mplayer.c
Assembler: mplayer.c
"(stdin)", line 3567 : Illegal mnemonic
"(stdin)", line 3567 : Syntax error
... more "Illegal mnemonic" and "Syntax error" errors ...
</pre><p>
</p></li><li class="listitem"><p>
  <span class="application">MPlayer</span> may segfault when decoding
  and encoding video that uses the win32codecs:
  </p><pre class="screen">
...
Trying to force audio codec driver family acm...
Opening audio decoder: [acm] Win32/ACM decoders
sysi86(SI86DSCR): Invalid argument
Couldn't install fs segment, expect segfault


MPlayer interrupted by signal 11 in module: init_audio_codec
...</pre><p>
  This is because of a change to sysi86() in Solaris 10 and pre-Solaris
  Nevada b31 releases. This has been fixed in Solaris Nevada b32;
  however, Sun has yet to backport the fix to Solaris 10. The MPlayer
  Project has made Sun aware of the problem and a patch is currently in
  progress for Solaris 10. More information about this bug can be found
  at:
  <a class="ulink" href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413" target="_top">http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413</a>.
</p></li><li class="listitem"><p>
Due to bugs in Solaris 8,
you may not be able to play DVD discs larger than 4 GB:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
  The sd(7D) driver on Solaris 8 x86 has a bug when accessing a disk block &gt;4GB
  on a device using a logical blocksize != DEV_BSIZE
  (i.e. CD-ROM and DVD media).
  Due to a 32Bit int overflow, a disk address modulo 4GB is accessed
  (<a class="ulink" href="http://groups.yahoo.com/group/solarisonintel/message/22516" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22516</a>).
  This problem does not exist in the SPARC version of Solaris 8.
</p></li><li class="listitem"><p>
  A similar bug is present in the hsfs(7FS) file system code (AKA ISO9660),
  hsfs may not not support partitions/disks larger than 4GB, all data is
  accessed modulo 4GB
  (<a class="ulink" href="http://groups.yahoo.com/group/solarisonintel/message/22592" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22592</a>).
  The hsfs problem can be fixed by installing
  patch 109764-04 (SPARC) / 109765-04 (x86).
</p></li></ul></div></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="hp-ux"></a>5.3.2. HP-UX</h3></div></div></div><p>
Joe Page hosts a detailed HP-UX <span class="application">MPlayer</span>
<a class="ulink" href="http://users.rcn.com/joepage/mplayer_on_hpux11.htm" target="_top">HOWTO</a>
by Martin Gansser on his homepage. With these instructions the build should
work out of the box. The following information is taken from this HOWTO.
</p><p>
You need GCC 3.4.0 or later and SDL 1.2.7 or later.
HP cc will not produce a working program, prior GCC versions are buggy.
For OpenGL functionality you need to install Mesa and the gl and gl2 video
output drivers should work, speed may be very bad, depending on the CPU speed,
though. A good replacement for the rather poor native HP-UX sound system is
GNU esound.
</p><p>
Create the DVD device
scan the SCSI bus with:

</p><pre class="screen">
# ioscan -fn

Class          I            H/W   Path          Driver    S/W State    H/W Type        Description
...
ext_bus 1    8/16/5      c720  CLAIMED INTERFACE  Built-in SCSI
target  3    8/16/5.2    tgt   CLAIMED DEVICE
disk    4    8/16/5.<span class="bold"><strong>2</strong></span>.<span class="bold"><strong>0</strong></span>  sdisk CLAIMED DEVICE     <span class="bold"><strong>PIONEER DVD-ROM DVD-305</strong></span>
                         /dev/dsk/c1t2d0 <span class="bold"><strong>/dev/rdsk/c1t2d0</strong></span>
target  4    8/16/5.7    tgt   CLAIMED DEVICE
ctl     <span class="bold"><strong>1</strong></span>    8/16/5.7.0  sctl  CLAIMED DEVICE     Initiator
                         /dev/rscsi/c1t7d0 /dev/rscsi/c1t7l0 /dev/scsi/c1t7l0
...
</pre><p>

The screen output shows a Pioneer DVD-ROM at SCSI address 2.
The card instance for hardware path 8/16 is 1.
</p><p>
Create a link from the raw device to the DVD device.
</p><pre class="screen">
ln -s /dev/rdsk/c<em class="replaceable"><code>&lt;SCSI bus instance&gt;</code></em>t<em class="replaceable"><code>&lt;SCSI target ID&gt;</code></em>d<em class="replaceable"><code>&lt;LUN&gt;</code></em> /dev/<em class="replaceable"><code>&lt;device&gt;</code></em>
</pre><p>
Example:
</p><pre class="screen">ln -s /dev/rdsk/c1t2d0 /dev/dvd</pre><p>
</p><p>
Below are solutions for some common problems:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Crash at Start with the following error message:
  </p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: finite (code) from /usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.00/3.2/../../../libGL.sl</pre><p>
  </p><p>
  This means that the function <code class="systemitem">.finite().</code> is not
  available in the standard HP-UX math library.
  Instead there is <code class="systemitem">.isfinite().</code>.
  Solution: Use the latest Mesa depot file.
  </p></li><li class="listitem"><p>
  Crash at playback with the following error message:
  </p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: sem_init (code) from /usr/local/lib/libSDL-1.2.sl.0</pre><p>
  </p><p>
  Solution: Use the extralibdir option of configure
  <tt class="option">--extra-ldflags="/usr/lib -lrt"</tt>
  </p></li><li class="listitem"><p>
  MPlayer segfaults with a message like this:
  </p><pre class="screen">
Pid 10166 received a SIGSEGV for stack growth failure.
Possible causes: insufficient memory or swap space, or stack size exceeded maxssiz.
Segmentation fault</pre><p>
  </p><p>
  Solution:
  The HP-UX kernel has a default stack size of 8MB(?) per process.(11.0 and
  newer 10.20 patches let you increase <code class="systemitem">maxssiz</code> up to
  350MB for 32-bit programs). You need to extend
  <code class="systemitem">maxssiz</code> and recompile the kernel (and reboot).
  You can use SAM to do this.
  (While at it, check out the <code class="systemitem">maxdsiz</code> parameter for
  the maximum amount of data a program can use.
  It depends on your applications, if the default of 64MB is enough or not.)
  </p></li></ul></div><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="aix"></a>5.3.3. AIX</h3></div></div></div><p>
<span class="application">MPlayer</span> builds successfully on AIX 5.1,
5.2, and 5.3, using GCC 3.3 or greater. Building
<span class="application">MPlayer</span> on AIX 4.3.3 and below is
untested. It is highly recommended that you build
<span class="application">MPlayer</span> using GCC 3.4 or greater,
or if you are building on POWER5, GCC 4.0 is required.
</p><p>
CPU detection is still a work in progress.
The following architectures have been tested:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>604e</p></li><li class="listitem"><p>POWER3</p></li><li class="listitem"><p>POWER4</p></li></ul></div><p>
The following architectures are untested, but should still work:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>POWER</p></li><li class="listitem"><p>POWER2</p></li><li class="listitem"><p>POWER5</p></li></ul></div><p>
</p><p>
Sound via the Ultimedia Services is not supported, as Ultimedia was
dropped in AIX 5.1; therefore, the only option is to use the AIX Open
Sound System (OSS) drivers from 4Front Technologies at
<a class="ulink" href="http://www.opensound.com/aix.html" target="_top">http://www.opensound.com/aix.html</a>.
4Front Technologies freely provides OSS drivers for AIX 5.1 for
non-commercial use; however, there are currently no sound output
drivers for AIX 5.2 or 5.3. This means <span class="bold"><strong>AIX 5.2
and 5.3 are not capable of MPlayer audio output, presently.</strong></span>
</p><p>Solutions to common problems:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  If you encounter this error message from <tt class="filename">./configure</tt>:
  </p><pre class="screen">
$ ./configure
...
Checking for iconv program ... no
No working iconv program found, use
--charset=US-ASCII to continue anyway.
Messages in the GTK-2 interface will be broken then.</pre><p>
  This is because AIX uses non-standard character set names; therefore,
  converting MPlayer output to another character set is currently not
  supported. The solution is to use:
  </p><pre class="screen">$ ./configure --charset=noconv</pre><p>
  </p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="qnx"></a>5.3.4. QNX</h3></div></div></div><p>
You'll need to download and install SDL for QNX. Then run
<span class="application">MPlayer</span> with <tt class="option">-vo sdl:driver=photon</tt>
and <tt class="option">-ao sdl:nto</tt> options, it should be fast.
</p><p>
The <tt class="option">-vo x11</tt> output will be even slower than on Linux,
since QNX has only X <span class="emphasis"><em>emulation</em></span> which is very slow.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="windows"></a>5.4. Windows</h2></div></div></div><p>
Yes, <span class="application">MPlayer</span> runs on Windows under
<a class="ulink" href="http://www.cygwin.com/" target="_top"><span class="application">Cygwin</span></a>
and
<a class="ulink" href="http://www.mingw.org/" target="_top"><span class="application">MinGW</span></a>.
It does not have an official GUI yet, but the command line version
is completely functional. You should check out the
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-cygwin/" target="_top">MPlayer-cygwin</a>
mailing list for help and latest information.
Official Windows binaries can be found on the
<a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html" target="_top">download page</a>.
Installer packages and simple GUI frontends are available from external
sources, we have collected then in the Windows section of our
<a class="ulink" href="http://www.mplayerhq.hu/design7/projects.html#windows" target="_top">projects page</a>.
</p><p>
If you wish to avoid using the command line, a simple trick is
to put a shortcut on your desktop that contains something like the
following in the execute section:
</p><pre class="screen"><em class="replaceable"><code>c:\path\to\</code></em>mplayer.exe %1</pre><p>
This will make <span class="application">MPlayer</span> play any movie that is
dropped on the shortcut. Add <tt class="option">-fs</tt> for fullscreen mode.
</p><p>
Best results are achieved with the native DirectX video output driver
(<tt class="option">-vo directx</tt>). Alternatives are OpenGL and SDL, but OpenGL
performance varies greatly between systems and SDL is known to
distort video or crash on some systems. If the image is
distorted, try turning off hardware acceleration with
<tt class="option">-vo directx:noaccel</tt>. Download
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/win32/dx7headers.tgz" target="_top">DirectX 7 header files</a>
to compile the DirectX video output driver. Furthermore you need to have
DirectX 7 or later installed for the DirectX video output driver to work.
</p><p>
<a class="link" href="#vidix" title="4.13. VIDIX">VIDIX</a> now works under Windows as
<tt class="option">-vo winvidix</tt>, although it is still experimental
and needs a bit of manual setup. Download
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/dhahelperwin/dhahelper.sys" target="_top">dhahelper.sys</a> or
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/dhahelperwin/withmtrr/dhahelper.sys" target="_top">dhahelper.sys (with MTRR support)</a>
and copy it to the <tt class="filename">vidix/dhahelperwin</tt>
directory in your <span class="application">MPlayer</span> source tree.
Open a console and type
</p><pre class="screen">make install-dhahelperwin</pre><p>
as Administrator. After that you will have to reboot.
</p><p>
For best results <span class="application">MPlayer</span> should use a
colorspace that your video card supports in hardware. Unfortunately many
Windows graphics drivers wrongly report some colorspaces as supported in
hardware. To find out which, try
</p><pre class="screen">
mplayer -benchmark -nosound -frames 100 -vf format=<em class="replaceable"><code>colorspace</code></em> <em class="replaceable"><code>movie</code></em>
</pre><p>
where <em class="replaceable"><code>colorspace</code></em> can be any colorspace
printed by the <tt class="option">-vf format=fmt=help</tt> option. If you
find a colorspace your card handles particularly bad
<tt class="option">-vf noformat=<em class="replaceable"><code>colorspace</code></em></tt>
will keep it from being used. Add this to your config file to permanently
keep it from being used.
</p><p>There are special codec packages for Windows available on our
  <a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html" target="_top">download page</a>
  to allow playing formats for which there is no native support yet.
  Put the codecs somewhere in your path or pass
  <tt class="option">--codecsdir=<em class="replaceable"><code>c:/path/to/your/codecs</code></em></tt>
  (alternatively
  <tt class="option">--codecsdir=<em class="replaceable"><code>/path/to/your/codecs</code></em></tt>
  only on <span class="application">Cygwin</span>) to <tt class="filename">configure</tt>.
  We have had some reports that Real DLLs need to be writable by the user
  running <span class="application">MPlayer</span>, but only on some systems (NT4).
  Try making them writable if you have problems.
  </p><p>
You can play VCDs by playing the <tt class="filename">.DAT</tt> or
<tt class="filename">.MPG</tt> files that Windows exposes on VCDs. It works like
this (adjust for the drive letter of your CD-ROM):
</p><pre class="screen">mplayer <em class="replaceable"><code>d:/mpegav/avseq01.dat</code></em></pre><p>
Alternatively, you can play a VCD track directly by using:
</p><pre class="screen">mplayer vcd://<em class="replaceable"><code>&lt;track&gt;</code></em> -cdrom-device <em class="replaceable"><code>d:</code></em>
</pre><p>
DVDs also work, adjust <tt class="option">-dvd-device</tt> for the drive letter
of your DVD-ROM:
</p><pre class="screen">
mplayer dvd://<em class="replaceable"><code>&lt;title&gt;</code></em> -dvd-device <em class="replaceable"><code>d:</code></em>
</pre><p>
The <span class="application">Cygwin</span>/<span class="application">MinGW</span>
console is rather slow. Redirecting output or using the
<tt class="option">-quiet</tt> option has been reported to improve performance on
some systems. Direct rendering (<tt class="option">-dr</tt>) may also help.
If playback is jerky, try
<tt class="option">-autosync 100</tt>. If some of these options help you, you
may want to put them in your config file.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
If you have a Pentium 4 and are experiencing a crash using the
RealPlayer codecs, you may need to disable hyperthreading support.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="cygwin"></a>5.4.1. <span class="application">Cygwin</span></h3></div></div></div><p>
You need to run <span class="application">Cygwin</span> 1.5.0 or later in
order to compile <span class="application">MPlayer</span>.
</p><p>
DirectX header files need to be extracted to
<tt class="filename">/usr/include/</tt> or
<tt class="filename">/usr/local/include/</tt>.
</p><p>
Instructions and files for making SDL run under
<span class="application">Cygwin</span> can be found on the
<a class="ulink" href="http://www.libsdl.org/extras/win32/cygwin/" target="_top">libsdl site</a>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="mingw"></a>5.4.2. <span class="application">MinGW</span></h3></div></div></div><p>
You need <span class="application">MinGW</span> 3.1.0 or later and MSYS 1.0.9 or
later. Tell the MSYS postinstall that <span class="application">MinGW</span> is
installed.
</p><p>
Extract DirectX header files to
<tt class="filename">/mingw/include/</tt>.
</p><p>
MOV compressed header support requires
<a class="ulink" href="http://www.gzip.org/zlib/" target="_top">zlib</a>,
which <span class="application">MinGW</span> does not provide by default.
Configure it with <tt class="option">--prefix=/mingw</tt> and install
it before compiling <span class="application">MPlayer</span>.
</p><p>
Complete instructions for building <span class="application">MPlayer</span>
and necessary libraries can be found in the
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/win32/MPlayer-MinGW-Howto.txt" target="_top">MPlayer MinGW HOWTO</a>.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="macos"></a>5.5. Mac OS</h2></div></div></div><p>
<span class="application">MPlayer</span> does not work on Mac OS versions before
10, but should compile out-of-the-box on Mac OS X 10.2 and up.
The preferred compiler is the Apple version of
GCC 3.x or later.
You can get the basic compilation environment by installing Apple's
<a class="ulink" href="http://developer.apple.com/tools/download/" target="_top">Xcode</a>.
If you have Mac OS X 10.3.9 or later and QuickTime 7
you can use the <tt class="option">corevideo</tt> video output driver.
</p><p>
Unfortunately, this basic environment will not allow you to take advantage
of all the nice features of <span class="application">MPlayer</span>.
For instance, in order to have OSD support compiled in, you will
need to have <code class="systemitem">fontconfig</code>
and <code class="systemitem">freetype</code> libraries
installed on your machine. Contrary to other Unixes such as most
Linux and BSD variants, OS X does not have a package system
that comes with the system.
</p><p>
There are at least two to choose from:
<a class="ulink" href="http://fink.sourceforge.net/" target="_top">Fink</a> and
<a class="ulink" href="http://www.macports.org/" target="_top">MacPorts</a>.
Both of them provide about the same service (i.e. a lot of packages to
choose from, dependency resolution, the ability to simply add/update/remove
packages, etc...).
Fink offers both precompiled binary packages or building everything from
source, whereas MacPorts only offers building from source.
The author of this guide chose MacPorts for the simple fact that its basic
setup was more lightweight.
Later examples will be based on MacPorts.
</p><p>
For instance, to compile <span class="application">MPlayer</span> with OSD support:
</p><pre class="screen">sudo port install pkg-config</pre><p>
This will install <span class="application">pkg-config</span>, which is a system for
managing library compile/link flags.
<span class="application">MPlayer</span>'s <code class="systemitem">configure</code> script
uses it to properly detect libraries.
Then you can install <span class="application">fontconfig</span> in a
similar way:
</p><pre class="screen">sudo port install fontconfig</pre><p>
Then you can proceed with launching <span class="application">MPlayer</span>'s
<code class="systemitem">configure</code> script (note the
<code class="systemitem">PKG_CONFIG_PATH</code> and <code class="systemitem">PATH</code>
environment variables so that <code class="systemitem">configure</code> finds the
libraries installed with MacPorts):
</p><pre class="screen">
PKG_CONFIG_PATH=/opt/local/lib/pkgconfig/ PATH=$PATH:/opt/local/bin/ ./configure
</pre><p>
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="osx_gui"></a>5.5.1. MPlayer OS X GUI</h3></div></div></div><p>
You can get a native GUI for <span class="application">MPlayer</span> together with
precompiled <span class="application">MPlayer</span> binaries for Mac OS X from the
<a class="ulink" href="http://mplayerosx.sf.net/" target="_top">MPlayerOSX</a> project, but be
warned: that project is not active anymore.
</p><p>
Fortunately, <span class="application">MPlayerOSX</span> has been taken over
by a member of the <span class="application">MPlayer</span> team.
Preview releases are available from our
<a class="ulink" href="http://mplayerhq.hu/dload.html" target="_top">download page</a>
and an official release should arrive soon.
</p><p>
In order to build <span class="application">MPlayerOSX</span> from source
yourself, you need the <code class="systemitem">mplayerosx</code>, the
<code class="systemitem">main</code> and a copy of the
<code class="systemitem">main</code> SVN module named
<code class="systemitem">main_noaltivec</code>.
<code class="systemitem">mplayerosx</code> is the GUI frontend,
<code class="systemitem">main</code> is MPlayer and
<code class="systemitem">main_noaltivec</code> is MPlayer built without AltiVec
support.
</p><p>
To check out SVN modules use:
</p><pre class="screen">
svn checkout svn://svn.mplayerhq.hu/mplayerosx/trunk/ mplayerosx
svn checkout svn://svn.mplayerhq.hu/mplayer/trunk/ main
</pre><p>
</p><p>
In order to build <span class="application">MPlayerOSX</span> you will need to
set up something like this:
</p><pre class="screen">
MPlayer_source_directory
   |
   |---&gt;main           (MPlayer Subversion source)
   |
   |---&gt;main_noaltivec (MPlayer Subversion source configured with --disable-altivec)
   |
   \---&gt;mplayerosx     (MPlayer OS X Subversion source)
</pre><p>
You first need to build main and main_noaltivec.
</p><p>
To begin with, in order to ensure maximum backwards compatibility, set an
environment variable:
</p><pre class="screen">export MACOSX_DEPLOYMENT_TARGET=10.3</pre><p>
</p><p>
Then, configure:
</p><p>
If you configure for a G4 or later CPU with AltiVec support, do as follows:
</p><pre class="screen">
./configure --disable-gl --disable-x11
</pre><p>
If you configure for a G3-powered machine without AltiVec, use:
</p><pre class="screen">
./configure --disable-gl --disable-x11 --disable-altivec
</pre><p>
You may need to edit <tt class="filename">config.mak</tt> and change
<code class="systemitem">-mcpu</code> and <code class="systemitem">-mtune</code>
from <code class="systemitem">74XX</code> to <code class="systemitem">G3</code>.
</p><p>
Continue with
</p><pre class="screen">make</pre><p>
then go to the mplayerosx directory and type
</p><pre class="screen">make dist</pre><p>
This will create a compressed <code class="systemitem">.dmg</code> archive
with the ready to use binary.
</p><p>
You can also use the <span class="application">Xcode</span> 2.1 project;
the old project for <span class="application">Xcode</span> 1.x does
not work anymore.
</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="mencoder"></a>Chapter 6. Basic usage of <span class="application">MEncoder</span></h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect1"><a href="#menc-feat-selecting-codec">6.1. Selecting codecs and container formats</a></span></dt><dt><span class="sect1"><a href="#menc-feat-selecting-input">6.2. Selecting input file or device</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg4">6.3. Encoding two pass MPEG-4 ("DivX")</a></span></dt><dt><span class="sect1"><a href="#menc-feat-handheld-psp">6.4. Encoding to Sony PSP video format</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg">6.5. Encoding to MPEG format</a></span></dt><dt><span class="sect1"><a href="#menc-feat-rescale">6.6. Rescaling movies</a></span></dt><dt><span class="sect1"><a href="#menc-feat-streamcopy">6.7. Stream copying</a></span></dt><dt><span class="sect1"><a href="#menc-feat-enc-images">6.8. Encoding from multiple input image files (JPEG, PNG, TGA, etc.)</a></span></dt><dt><span class="sect1"><a href="#menc-feat-extractsub">6.9. Extracting DVD subtitles to VOBsub file</a></span></dt><dt><span class="sect1"><a href="#aspect">6.10. Preserving aspect ratio</a></span></dt></dl></div><p>
For the complete list of available <span class="application">MEncoder</span> options
and examples, please see the man page. For a series of hands-on examples and
detailed guides on using several encoding parameters, read the
<a class="ulink" href="../../tech/encoding-tips.txt" target="_top">encoding-tips</a> that were
collected from several mailing list threads on MPlayer-users. Search the archives
<a class="ulink" href="http://lists.mplayerhq.hu/pipermail/mencoder-users/" target="_top">here</a>
and especially for older things also
<a class="ulink" href="http://lists.mplayerhq.hu/pipermail/mplayer-users/" target="_top">here</a>
for a wealth of discussions about all aspects of and problems related to
encoding with <span class="application">MEncoder</span>.
</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-selecting-codec"></a>6.1. Selecting codecs and container formats</h2></div></div></div><p>
Audio and video codecs for encoding are selected with the
<tt class="option">-oac</tt> and <tt class="option">-ovc</tt> options, respectively.
Type for instance:
</p><pre class="screen">mencoder -ovc help</pre><p>
to list all video codecs supported by the version of
<span class="application">MEncoder</span> on your machine.
The following choices are available:
</p><p>
Audio Codecs:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Audio codec name</th><th>Description</th></tr></thead><tbody><tr><td>mp3lame</td><td>encode to VBR, ABR or CBR MP3 with LAME</td></tr><tr><td>lavc</td><td>use one of <a class="link" href="#menc-feat-enc-libavcodec-audio-codecs" title="7.3.2. libavcodec's audio codecs"><code class="systemitem">libavcodec</code>'s audio codecs</a></td></tr><tr><td>faac</td><td>FAAC AAC audio encoder</td></tr><tr><td>toolame</td><td>MPEG Audio Layer 2 encoder</td></tr><tr><td>twolame</td><td>MPEG Audio Layer 2 encoder based on tooLAME</td></tr><tr><td>pcm</td><td>uncompressed PCM audio</td></tr><tr><td>copy</td><td>do not reencode, just copy compressed frames</td></tr></tbody></table></div><p>
</p><p>
Video codecs:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Video codec name</th><th>Description</th></tr></thead><tbody><tr><td>lavc</td><td>use one of <a class="link" href="#menc-feat-enc-libavcodec-video-codecs" title="7.3.1. libavcodec's video codecs"><code class="systemitem">libavcodec</code>'s video codecs</a></td></tr><tr><td>xvid</td><td>Xvid, MPEG-4 Advanced Simple Profile (ASP) codec</td></tr><tr><td>x264</td><td>x264, MPEG-4 Advanced Video Coding (AVC), AKA H.264 codec</td></tr><tr><td>nuv</td><td>nuppel video, used by some realtime applications</td></tr><tr><td>raw</td><td>uncompressed video frames</td></tr><tr><td>copy</td><td>do not reencode, just copy compressed frames</td></tr><tr><td>frameno</td><td>used for 3-pass encoding (not recommended)</td></tr></tbody></table></div><p>
</p><p>
Output container formats are selected with the <tt class="option">-of</tt>
option.
Type:
</p><pre class="screen">mencoder -of help</pre><p>
to list all containers supported by the version of
<span class="application">MEncoder</span> on your machine.
The following choices are available:
</p><p>
Container formats:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Container format name</th><th>Description</th></tr></thead><tbody><tr><td>lavf</td><td>one of the containers supported by
  <code class="systemitem">libavformat</code></td></tr><tr><td>avi</td><td>Audio-Video Interleaved</td></tr><tr><td>mpeg</td><td>MPEG-1 and MPEG-2 PS</td></tr><tr><td>rawvideo</td><td>raw video stream (no muxing - one video stream only)</td></tr><tr><td>rawaudio</td><td>raw audio stream (no muxing - one audio stream only)</td></tr></tbody></table></div><p>
The AVI container is the native container format for
<span class="application">MEncoder</span>, which means that it's the one that
is best handled, and the one for which <span class="application">MEncoder</span>
was designed.
As noted above, other container formats are usable, but you may
experience problems when using them.
</p><p>
<code class="systemitem">libavformat</code> containers:
</p><p>
If you selected <code class="systemitem">libavformat</code>
to do the muxing of the output file (by using the <tt class="option">-of lavf</tt>),
the appropriate container format will be determined by the file extension
of the output file.
You may force a particular container format with
<code class="systemitem">libavformat</code>'s
<tt class="option">format</tt> option.

</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th><code class="systemitem">libavformat</code> container name</th><th>Description</th></tr></thead><tbody><tr><td>mpg</td><td>MPEG-1 and MPEG-2 PS</td></tr><tr><td>asf</td><td>Advanced Streaming Format</td></tr><tr><td>avi</td><td>Audio-Video Interleaved</td></tr><tr><td>wav</td><td>Waveform Audio</td></tr><tr><td>swf</td><td>Macromedia Flash</td></tr><tr><td>flv</td><td>Macromedia Flash video</td></tr><tr><td>rm</td><td>RealMedia</td></tr><tr><td>au</td><td>SUN AU</td></tr><tr><td>nut</td><td>NUT open container (experimental and not yet spec-compliant)</td></tr><tr><td>mov</td><td>QuickTime</td></tr><tr><td>mp4</td><td>MPEG-4 format</td></tr><tr><td>dv</td><td>Sony Digital Video container</td></tr><tr><td>mkv</td><td>Matroska open audio/video container</td></tr></tbody></table></div><p>
As you can see, <code class="systemitem">libavformat</code>
allows <span class="application">MEncoder</span> to mux into a considerable
variety of containers.
Unfortunately, as <span class="application">MEncoder</span> was not designed
from the beginning to support container formats other than AVI,
your should really be paranoid about the resulting file.
Please check to be sure that the audio/video synchronization is OK
and that the file can be played correctly by players other than
<span class="application">MPlayer</span>.
</p><div class="example"><a name="encode_to_macromedia_flash_format"></a><p class="title"><b>Example 6.1. encode to Macromedia Flash format</b></p><div class="example-contents"><p>
Creating a Macromedia Flash video suitable for playback in a web browser
with the Macromedia Flash plugin:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -o <em class="replaceable"><code>output.flv</code></em> -of lavf \
    -oac mp3lame -lameopts abr:br=56 -srate 22050 -ovc lavc \
    -lavcopts vcodec=flv:vbitrate=500:mbd=2:mv0:trell:v4mv:cbp:last_pred=3
</pre><p>
</p></div></div><br class="example-break"></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-selecting-input"></a>6.2. Selecting input file or device</h2></div></div></div><p>
<span class="application">MEncoder</span> can encode from files or directly
from a DVD or VCD disc.
Simply include the filename on the command line to encode from a file,
or <tt class="option">dvd://</tt><em class="replaceable"><code>titlenumber</code></em> or
<tt class="option">vcd://</tt><em class="replaceable"><code>tracknumber</code></em> to encode
from a DVD title or VCD track.
If you have already copied a DVD to your hard drive (you can use a tool
such as <span class="application">dvdbackup</span>, available on most systems),
and wish to encode from the copy, you should still use the
<tt class="option">dvd://</tt> syntax, along with <tt class="option">-dvd-device</tt>
followed by the path to the copied DVD root.

The <tt class="option">-dvd-device</tt> and <tt class="option">-cdrom-device</tt>
options can also be used to override the paths to the device nodes
for reading directly from disc, if the defaults of
<tt class="filename">/dev/dvd</tt> and <tt class="filename">/dev/cdrom</tt> do
not work on your system.
</p><p>
When encoding from DVD, it is often desirable to select a chapter or
range of chapters to encode.
You can use the <tt class="option">-chapter</tt> option for this purpose.
For example, <tt class="option">-chapter</tt> <em class="replaceable"><code>1-4</code></em>
will only encode chapters 1 through 4 from the DVD.
This is especially useful if you will be making a 1400 MB encode
targeted for two CDs, since you can ensure the split occurs exactly
at a chapter boundary rather than in the middle of a scene.
</p><p>
If you have a supported TV capture card, you can also encode from the
TV-in device.
Use <tt class="option">tv://</tt><em class="replaceable"><code>channelnumber</code></em> as
the filename, and <tt class="option">-tv</tt> to configure various capture
settings.
DVB input works similarly.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-mpeg4"></a>6.3. Encoding two pass MPEG-4 ("DivX")</h2></div></div></div><p>
The name comes from the fact that this method encodes the file
<span class="emphasis"><em>twice</em></span>.  The first encoding (dubbed pass) creates some
temporary files (<tt class="filename">*.log</tt>) with a size of few megabytes, do
not delete them yet (you can delete the AVI or rather just not create any video
by redirecting it into <tt class="filename">/dev/null</tt>
or on Windows into <tt class="filename">NUL</tt>).
In the second pass, the two pass output
file is created, using the bitrate data from the temporary files. The
resulting file will have much better image quality. If this is the first
time you heard about this, you should consult some guides available on the
net.
</p><div class="example"><a name="copy_audio_track"></a><p class="title"><b>Example 6.2. copy audio track</b></p><div class="example-contents"><p>
Two pass encode of the second track a DVD to an MPEG-4 ("DivX")
AVI while copying the audio track.
</p><pre class="screen">
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac copy -o /dev/null
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -oac copy -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div></div><br class="example-break"><div class="example"><a name="encode_audio_track"></a><p class="title"><b>Example 6.3. encode audio track</b></p><div class="example-contents"><p>
Two pass encode of a DVD to an MPEG-4 ("DivX") AVI while encoding
the audio track to MP3.
Be careful using this method as it may lead to audio/video desync in
some cases.
</p><pre class="screen">
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 \
    -oac mp3lame -lameopts vbr=3 -o /dev/null
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -oac mp3lame -lameopts vbr=3 -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div></div><br class="example-break"></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-handheld-psp"></a>6.4. Encoding to Sony PSP video format</h2></div></div></div><p>
<span class="application">MEncoder</span> supports encoding to Sony PSP's video
format, but, depending on the revision of the PSP software, the constraints
may differ.
You should be safe if you respect the following constraints:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>Bitrate</strong></span>: it should not exceed 1500kbps,
  however, past versions supported pretty much any bitrate as long as the
  header claimed it was not too high.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Dimensions</strong></span>: the width and height of the
  PSP video should be multiples of 16, and the product width * height must
  be &lt;= 64000.
  Under some circumstances, it may be possible for the PSP to play higher
  resolutions.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Audio</strong></span>: its samplerate should be 24kHz
  for MPEG-4 videos, and 48kHz for H.264.
</p></li></ul></div><p>
</p><div class="example"><a name="encode_for_psp"></a><p class="title"><b>Example 6.4. encode for PSP</b></p><div class="example-contents"><p>
</p><pre class="screen">
mencoder -ofps 30000/1001 -af lavcresample=24000 -vf harddup -oac lavc \
    -ovc lavc -lavcopts aglobal=1:vglobal=1:vcodec=mpeg4:acodec=libfaac \
    -of lavf -lavfopts format=psp \
    <em class="replaceable"><code>input.video</code></em> -o <em class="replaceable"><code>output.psp</code></em>
</pre><p>
Note that you can set the title of the video with
<tt class="option">-info name=<em class="replaceable"><code>MovieTitle</code></em></tt>.
</p></div></div><br class="example-break"></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-mpeg"></a>6.5. Encoding to MPEG format</h2></div></div></div><p>
<span class="application">MEncoder</span> can create MPEG (MPEG-PS) format output
files.
Usually, when you are using MPEG-1 or MPEG-2 video, it is because you are
encoding for a constrained format such as SVCD, VCD, or DVD.
The specific requirements for these formats are explained in the
<a class="link" href="#menc-feat-vcd-dvd" title="7.8. Using MEncoder to create VCD/SVCD/DVD-compliant files"> VCD and DVD creation guide</a>
section.
</p><p>
To change <span class="application">MEncoder</span>'s output file format,
use the <tt class="option">-of mpeg</tt> option.
</p><div class="informalexample"><p>
Example:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -of mpeg -ovc lavc -lavcopts vcodec=mpeg1video \
    -oac copy <em class="replaceable"><code>other_options</code></em> -o <em class="replaceable"><code>output.mpg</code></em>
</pre><p>
Creating an MPEG-1 file suitable to be played on systems with minimal
multimedia support, such as default Windows installs:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -of mpeg -mpegopts format=mpeg1:tsaf:muxrate=2000 \
    -o <em class="replaceable"><code>output.mpg</code></em> -oac lavc -lavcopts acodec=mp2:abitrate=224 -ovc lavc \
    -lavcopts vcodec=mpeg1video:vbitrate=1152:keyint=15:mbd=2:aspect=4/3
</pre><p>
Same, but using <code class="systemitem">libavformat</code> MPEG muxer:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -o <em class="replaceable"><code>VCD.mpg</code></em> -ofps 25 -vf scale=352:288,harddup -of lavf \
    -lavfopts format=mpg -oac lavc -lavcopts acodec=mp2:abitrate=224 -ovc lavc \
    -lavcopts vcodec=mpeg1video:vrc_buf_size=327:keyint=15:vrc_maxrate=1152:vbitrate=1152:vmax_b_frames=0
</pre><p>
</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Hint:</h3><p>
If for some reason the video quality of the second pass did not
satisfy you, you may re-run your video encode with a different target
bitrate, provided that you saved the statistics file of the previous
pass.
This is possible because the statistics file's primary goal is to
record the complexity of each frame, which doesn't depend heavily on
bitrate. You should note, though, that you'll get the best results if
all passes are run with target bitrates that do not differ very much.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-rescale"></a>6.6. Rescaling movies</h2></div></div></div><p>
Often the need to resize movie images emerges. The reasons can be
many: decreasing file size, network bandwidth, etc. Most people even do
rescaling when converting DVDs or SVCDs to DivX AVI. If you wish to rescale,
read the <a class="link" href="#aspect" title="6.10. Preserving aspect ratio">Preserving aspect ratio</a> section.
</p><p>
The scaling process is handled by the <code class="literal">scale</code> video filter:
<tt class="option">-vf scale=<em class="replaceable"><code>width</code></em>:<em class="replaceable"><code>height</code></em></tt>.
Its quality can be set with the <tt class="option">-sws</tt> option.
If it is not specified, <span class="application">MEncoder</span> will use 2: bicubic.
</p><p>
Usage:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.mpg</code></em> -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell \
    -vf scale=640:480 -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-streamcopy"></a>6.7. Stream copying</h2></div></div></div><p>
<span class="application">MEncoder</span> can handle input streams in two ways:
<span class="bold"><strong>encode</strong></span> or <span class="bold"><strong>copy</strong></span>
them. This section is about <span class="bold"><strong>copying</strong></span>.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>Video stream</strong></span> (option <tt class="option">-ovc copy</tt>):
  nice stuff can be done :) Like, putting (not converting!) FLI or VIVO or
  MPEG-1 video into an AVI file! Of course only
  <span class="application">MPlayer</span> can play such files :) And it probably
  has no real life value at all. Rationally: video stream copying can be
  useful for example when only the audio stream has to be encoded (like,
  uncompressed PCM to MP3).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Audio stream</strong></span> (option <tt class="option">-oac copy</tt>):
  straightforward. It is possible to take an external audio file (MP3,
  WAV) and mux it into the output stream. Use the
  <tt class="option">-audiofile <em class="replaceable"><code>filename</code></em></tt> option
  for this.
</p></li></ul></div><p>
Using <tt class="option">-oac copy</tt> to copy from one container format to
another may require the use of <tt class="option">-fafmttag</tt> to keep the
audio format tag of the original file.
For example, if you are converting an NSV file with AAC audio to an AVI
container, the audio format tag will be incorrect and it will have to
be changed. For a list of audio format tags, check
<tt class="filename">codecs.conf</tt>.
</p><p>
Example:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.nsv</code></em> -oac copy -fafmttag 0x706D \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-enc-images"></a>6.8. Encoding from multiple input image files (JPEG, PNG, TGA, etc.)</h2></div></div></div><p>
<span class="application">MEncoder</span> is capable of creating movies from one
or more JPEG, PNG, TGA, or other image files. With simple framecopy it can
create MJPEG (Motion JPEG), MPNG (Motion PNG) or MTGA (Motion TGA) files.
</p><div class="orderedlist"><p class="title"><b>Explanation of the process:</b></p><ol class="orderedlist" type="1"><li class="listitem"><p>
  <span class="application">MEncoder</span> <span class="emphasis"><em>decodes</em></span> the input
  image(s) with <code class="systemitem">libjpeg</code> (when decoding
  PNGs, it will use <code class="systemitem">libpng</code>).
</p></li><li class="listitem"><p>
  <span class="application">MEncoder</span> then feeds the decoded image to the
  chosen video compressor (DivX4, Xvid, FFmpeg msmpeg4, etc.).
</p></li></ol></div><p><b>Examples. </b>
The explanation of the <tt class="option">-mf</tt> option is in the man page.

</p><div class="informalexample"><p>
Creating an MPEG-4 file from all the JPEG files in the current directory:
</p><pre class="screen">
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc lavc \
    -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div><p>

</p><div class="informalexample"><p>
Creating an MPEG-4 file from some JPEG files in the current directory:
</p><pre class="screen">
mencoder mf://<em class="replaceable"><code>frame001.jpg,frame002.jpg</code></em> -mf w=800:h=600:fps=25:type=jpg \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div><p>

</p><div class="informalexample"><p>
Creating an MPEG-4 file from explicit list of JPEG files (list.txt in current
directory contains the list of files to use as source, one per line):
</p><pre class="screen">
mencoder mf://<em class="replaceable"><code>@list.txt</code></em> -mf w=800:h=600:fps=25:type=jpg \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div><p>

You can mix different types of images, regardless of the method you use
— individual filenames, wildcard or file with list — provided of
course they have the same dimensions.
So you can e.g. take title frame from PNG file,
and then put a slideshow of your JPEG photos.

</p><div class="informalexample"><p>
Creating a Motion JPEG (MJPEG) file from all the JPEG files in the current
directory:
</p><pre class="screen">
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc copy -oac copy -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div><p>

</p><div class="informalexample"><p>
Creating an uncompressed file from all the PNG files in the current directory:
</p><pre class="screen">
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc raw -oac copy -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div><p>

</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Width must be integer multiple of 4, it is a limitation of the RAW RGB AVI
format.
</p></div><p>

</p><div class="informalexample"><p>
Creating a Motion PNG (MPNG) file from all the PNG files in the current
directory:
</p><pre class="screen">
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc copy -oac copy -o <em class="replaceable"><code>output.avi</code></em></pre><p>
</p></div><p>

</p><div class="informalexample"><p>
Creating a Motion TGA (MTGA) file from all the TGA files in the current
directory:
</p><pre class="screen">
mencoder mf://*.tga -mf w=800:h=600:fps=25:type=tga -ovc copy -oac copy -o <em class="replaceable"><code>output.avi</code></em></pre><p>
</p></div><p>
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-extractsub"></a>6.9. Extracting DVD subtitles to VOBsub file</h2></div></div></div><p>
<span class="application">MEncoder</span> is capable of extracting subtitles from
a DVD into VOBsub formatted files. They consist of a pair of files ending in
<tt class="filename">.idx</tt> and <tt class="filename">.sub</tt> and are usually
packaged in a single <tt class="filename">.rar</tt> archive.
<span class="application">MPlayer</span> can play these with the
<tt class="option">-vobsub</tt> and <tt class="option">-vobsubid</tt> options.
</p><p>
You specify the basename (i.e without the <tt class="filename">.idx</tt> or
<tt class="filename">.sub</tt> extension) of the output files with
<tt class="option">-vobsubout</tt> and the index for this subtitle in the
resulting files with <tt class="option">-vobsuboutindex</tt>.
</p><p>
If the input is not from a DVD you should use <tt class="option">-ifo</tt> to
indicate the <tt class="filename">.ifo</tt> file needed to construct the
resulting <tt class="filename">.idx</tt> file.
</p><p>
If the input is not from a DVD and you do not have the
<tt class="filename">.ifo</tt> file you will need to use the
<tt class="option">-vobsubid</tt> option to let it know what language id to put in
the <tt class="filename">.idx</tt> file.
</p><p>
Each run will append the running subtitle if the <tt class="filename">.idx</tt>
and <tt class="filename">.sub</tt> files already exist. So you should remove any
before starting.
</p><div class="example"><a name="copying_two_subtitles_from_a_dvd_while_doing_two_pass_encoding"></a><p class="title"><b>Example 6.5. Copying two subtitles from a DVD while doing two pass encoding</b></p><div class="example-contents"><pre class="screen">
rm <em class="replaceable"><code>subtitles.idx</code></em> <em class="replaceable"><code>subtitles.sub</code></em>
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 \
    -vobsubout <em class="replaceable"><code>subtitles</code></em> -vobsuboutindex 0 -sid 2
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -vobsubout <em class="replaceable"><code>subtitles</code></em> -vobsuboutindex 1 -sid 5</pre></div></div><br class="example-break"><div class="example"><a name="copying_a_french_subtitle_from_an_mpeg_file"></a><p class="title"><b>Example 6.6. Copying a French subtitle from an MPEG file</b></p><div class="example-contents"><pre class="screen">
rm <em class="replaceable"><code>subtitles.idx</code></em> <em class="replaceable"><code>subtitles.sub</code></em>
mencoder <em class="replaceable"><code>movie.mpg</code></em> -ifo <em class="replaceable"><code>movie.ifo</code></em> -vobsubout <em class="replaceable"><code>subtitles</code></em> -vobsuboutindex 0 \
    -vobsuboutid fr -sid 1 -nosound -ovc copy
</pre></div></div><br class="example-break"></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aspect"></a>6.10. Preserving aspect ratio</h2></div></div></div><p>
DVDs and SVCDs (i.e. MPEG-1/2) files contain an aspect ratio value, which
describes how the player should scale the video stream, so humans will not
have egg heads (ex.: 480x480 + 4:3 = 640x480). However when encoding to AVI
(DivX) files, you have to be aware that AVI headers do not store this value.
Rescaling the movie is disgusting and time consuming, there has to be a better
way!
</p><p>There is</p><p>
MPEG-4 has a unique feature: the video stream can contain its needed aspect
ratio. Yes, just like MPEG-1/2 (DVD, SVCD) and H.263 files. Regretfully, there
are few video players apart from <span class="application">MPlayer</span> that
support this MPEG-4 attribute.
</p><p>
This feature can be used only with
<code class="systemitem">libavcodec</code>'s
<code class="systemitem">mpeg4</code> codec. Keep in mind: although
<span class="application">MPlayer</span> will correctly play the created file,
other players may use the wrong aspect ratio.
</p><p>
You seriously should crop the black bands over and below the movie image.
See the man page for the usage of the <code class="systemitem">cropdetect</code> and
<code class="systemitem">crop</code> filters.
</p><p>
Usage
</p><pre class="screen">mencoder <em class="replaceable"><code>sample-svcd.mpg</code></em> -vf crop=714:548:0:14 -oac copy -ovc lavc \
    -lavcopts vcodec=mpeg4:mbd=2:trell:autoaspect -o <em class="replaceable"><code>output.avi</code></em></pre><p>
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="encoding-guide"></a>Chapter 7. Encoding with <span class="application">MEncoder</span></h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect1"><a href="#menc-feat-dvd-mpeg4">7.1. Making a high quality MPEG-4 ("DivX")
  rip of a DVD movie</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-preparing-encode">7.1.1. Preparing to encode: Identifying source material and framerate</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-fps">7.1.1.1. Identifying source framerate</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-material">7.1.1.2. Identifying source material</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-2pass">7.1.2. Constant quantizer vs. multipass</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-constraints">7.1.3. Constraints for efficient encoding</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-crop">7.1.4. Cropping and Scaling</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate">7.1.5. Choosing resolution and bitrate</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate-compute">7.1.5.1. Computing the resolution</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-filtering">7.1.6. Filtering</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-interlacing">7.1.7. Interlacing and Telecine</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-encoding-interlaced">7.1.8. Encoding interlaced video</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-av-sync">7.1.9. Notes on Audio/Video synchronization</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-codec">7.1.10. Choosing the video codec</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-audio">7.1.11. Audio</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-muxing">7.1.12. Muxing</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-filter-issues">7.1.12.1. Improving muxing and A/V sync reliability</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-avi-limitations">7.1.12.2. Limitations of the AVI container</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-matroska">7.1.12.3. Muxing into the Matroska container</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#menc-feat-telecine">7.2. How to deal with telecine and interlacing within NTSC DVDs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-telecine-intro">7.2.1. Introduction</a></span></dt><dt><span class="sect2"><a href="#menc-feat-telecine-ident">7.2.2. How to tell what type of video you have</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-ident-progressive">7.2.2.1. Progressive</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-telecined">7.2.2.2. Telecined</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-interlaced">7.2.2.3. Interlaced</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpt">7.2.2.4. Mixed progressive and telecine</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpi">7.2.2.5. Mixed progressive and interlaced</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-encode">7.2.3. How to encode each category</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-encode-progressive">7.2.3.1. Progressive</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-telecined">7.2.3.2. Telecined</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-interlaced">7.2.3.3. Interlaced</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpt">7.2.3.4. Mixed progressive and telecine</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpi">7.2.3.5. Mixed progressive and interlaced</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-footnotes">7.2.4. Footnotes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-enc-libavcodec">7.3. Encoding with the <code class="systemitem">libavcodec</code>
  codec family</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-video-codecs">7.3.1. <code class="systemitem">libavcodec</code>'s
  video codecs</a></span></dt><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-audio-codecs">7.3.2. <code class="systemitem">libavcodec</code>'s
  audio codecs</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-enc-libavcodec-audio-codecs-pcmadpcm">7.3.2.1. PCM/ADPCM format supplementary table</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-lavc-encoding-options">7.3.3. Encoding options of libavcodec</a></span></dt><dt><span class="sect2"><a href="#menc-feat-mpeg4-lavc-example-settings">7.3.4. Encoding setting examples</a></span></dt><dt><span class="sect2"><a href="#custommatrices">7.3.5. Custom inter/intra matrices</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-example">7.3.6. Example</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-xvid">7.4. Encoding with the <code class="systemitem">Xvid</code>
  codec</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-xvid-intro">7.4.1. What options should I use to get the best results?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-options">7.4.2. Encoding options of <code class="systemitem">Xvid</code></a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-profiles">7.4.3. Encoding profiles</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-example-settings">7.4.4. Encoding setting examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-x264">7.5. Encoding with the
  <code class="systemitem">x264</code> codec</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-x264-encoding-options">7.5.1. Encoding options of x264</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-intro">7.5.1.1. Introduction</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-speedvquality">7.5.1.2. Options which primarily affect speed and quality</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-misc-preferences">7.5.1.3. Options pertaining to miscellaneous preferences</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-x264-example-settings">7.5.2. Encoding setting examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-video-for-windows">7.6. 
  Encoding with the <code class="systemitem">Video For Windows</code>
  codec family
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-vfw-video-codecs">7.6.1. Video for Windows supported codecs</a></span></dt><dt><span class="sect2"><a href="#menc-feat-video-for-windows-bitrate-settings">7.6.2. Using vfw2menc to create a codec settings file.</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-quicktime-7">7.7. Using <span class="application">MEncoder</span> to create
<span class="application">QuickTime</span>-compatible files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-quicktime-7-why-use-it">7.7.1. Why would one want to produce <span class="application">QuickTime</span>-compatible Files?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-constraints">7.7.2. <span class="application">QuickTime</span> 7 limitations</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-crop">7.7.3. Cropping</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-scale">7.7.4. Scaling</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-avsync">7.7.5. A/V sync</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-bitrate">7.7.6. Bitrate</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-example">7.7.7. Encoding example</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-remux">7.7.8. Remuxing as MP4</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-metadata">7.7.9. Adding metadata tags</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-vcd-dvd">7.8. Using <span class="application">MEncoder</span>
  to create VCD/SVCD/DVD-compliant files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-constraints">7.8.1. Format Constraints</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-resolution">7.8.1.1. Format Constraints</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-gop">7.8.1.2. GOP Size Constraints</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-bitrate">7.8.1.3. Bitrate Constraints</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-output">7.8.2. Output Options</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-aspect">7.8.2.1. Aspect Ratio</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-a-v-sync">7.8.2.2. Maintaining A/V sync</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-srate">7.8.2.3. Sample Rate Conversion</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-lavc">7.8.3. Using libavcodec for VCD/SVCD/DVD Encoding</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-intro">7.8.3.1. Introduction</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-options">7.8.3.2. lavcopts</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-examples">7.8.3.3. Examples</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-advanced">7.8.3.4. Advanced Options</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-audio">7.8.4. Encoding Audio</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-toolame">7.8.4.1. toolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-twolame">7.8.4.2. twolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-lavc">7.8.4.3. libavcodec</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-all">7.8.5. Putting it all Together</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-dvd">7.8.5.1. PAL DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-dvd">7.8.5.2. NTSC DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-ac3-copy">7.8.5.3. PAL AVI Containing AC-3 Audio to DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-ac3-copy">7.8.5.4. NTSC AVI Containing AC-3 Audio to DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-svcd">7.8.5.5. PAL SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-svcd">7.8.5.6. NTSC SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-vcd">7.8.5.7. PAL VCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-vcd">7.8.5.8. NTSC VCD</a></span></dt></dl></dd></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-dvd-mpeg4"></a>7.1. Making a high quality MPEG-4 ("DivX")
  rip of a DVD movie</h2></div></div></div><p>
One frequently asked question is "How do I make the highest quality rip
for a given size?". Another question is "How do I make the highest
quality DVD rip possible? I do not care about file size, I just want the best
quality."
</p><p>
The latter question is perhaps at least somewhat wrongly posed. After all, if
you do not care about file size, why not simply copy the entire MPEG-2 video
stream from the the DVD? Sure, your AVI will end up being 5GB, give
or take, but if you want the best quality and do not care about size,
this is certainly your best option.
</p><p>
In fact, the reason you want to transcode a DVD into MPEG-4 is
specifically because you <span class="bold"><strong>do</strong></span> care about
file size.
</p><p>
It is difficult to offer a cookbook recipe on how to create a very high
quality DVD rip. There are several factors to consider, and you should
understand these details or else you are likely to end up disappointed
with your results. Below we will investigate some of these issues, and
then have a look at an example. We assume you are using
<code class="systemitem">libavcodec</code> to encode the video,
although the theory applies to other codecs as well.
</p><p>
If this seems to be too much for you, you should probably use one of the
many fine frontends that are listed in the
<a class="ulink" href="http://www.mplayerhq.hu/design7/projects.html#mencoder_frontends" target="_top">MEncoder section</a>
of our related projects page.
That way, you should be able to achieve high quality rips without too much
thinking, because most of those tools are designed to take clever decisions
for you.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode"></a>7.1.1. Preparing to encode: Identifying source material and framerate</h3></div></div></div><p>
Before you even think about encoding a movie, you need to take
several preliminary steps.
</p><p>
The first and most important step before you encode should be
determining what type of content you are dealing with.
If your source material comes from DVD or broadcast/cable/satellite
TV, it will be stored in one of two formats: NTSC for North
America and Japan, PAL for Europe, etc.
It is important to realize, however, that this is just the formatting for
presentation on a television, and often does
<span class="bold"><strong>not</strong></span> correspond to the
original format of the movie.
Experience shows that NTSC material is a lot more difficult to encode,
because there more elements to identify in the source.
In order to produce a suitable encode, you need to know the original
format.
Failure to take this into account will result in various flaws in your
encode, including ugly combing (interlacing) artifacts and duplicated
or even lost frames.
Besides being ugly, the artifacts also harm coding efficiency:
You will get worse quality per unit bitrate.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode-fps"></a>7.1.1.1. Identifying source framerate</h4></div></div></div><p>
Here is a list of common types of source material, where you are
likely to find them, and their properties:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>Standard Film</strong></span>: Produced for
  theatrical display at 24fps.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>PAL video</strong></span>: Recorded with a PAL
  video camera at 50 fields per second.
  A field consists of just the odd- or even-numbered lines of a
  frame.
  Television was designed to refresh these in alternation as a
  cheap form of analog compression.
  The human eye supposedly compensates for this, but once you
  understand interlacing you will learn to see it on TV too and
  never enjoy TV again.
  Two fields do <span class="bold"><strong>not</strong></span> make a
  complete frame, because they are captured 1/50 of a second apart
  in time, and thus they do not line up unless there is no motion.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>NTSC Video</strong></span>: Recorded with an
  NTSC video camera at 60000/1001 fields per second, or 60 fields per
  second in the pre-color era.
  Otherwise similar to PAL.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Animation</strong></span>: Usually drawn at
  24fps, but also comes in mixed-framerate varieties.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Computer Graphics (CG)</strong></span>: Can be
  any framerate, but some are more common than others; 24 and
  30 frames per second are typical for NTSC, and 25fps is typical
  for PAL.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Old Film</strong></span>: Various lower
  framerates.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode-material"></a>7.1.1.2. Identifying source material</h4></div></div></div><p>
Movies consisting of frames are referred to as progressive,
while those consisting of independent fields are called
either interlaced or video - though this latter term is
ambiguous.
</p><p>
To further complicate matters, some movies will be a mix of
several of the above.
</p><p>
The most important distinction to make between all of these
formats is that some are frame-based, while others are
field-based.
<span class="bold"><strong>Whenever</strong></span> a movie is prepared
for display on television (including DVD), it is converted to a
field-based format.
The various methods by which this can be done are collectively
referred to as "telecine", of which the infamous NTSC
"3:2 pulldown" is one variety.
Unless the original material was also field-based (and the same
fieldrate), you are getting the movie in a format other than the
original.
</p><div class="itemizedlist"><p class="title"><b>There are several common types of pulldown:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>PAL 2:2 pulldown</strong></span>: The nicest of
  them all.
  Each frame is shown for the duration of two fields, by extracting the
  even and odd lines and showing them in alternation.
  If the original material is 24fps, this process speeds up the
  movie by 4%.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>PAL 2:2:2:2:2:2:2:2:2:2:2:3 pulldown</strong></span>:
  Every 12th frame is shown for the duration of three fields, instead of
  just two.
  This avoids the 4% speedup issue, but makes the process much
  more difficult to reverse.
  It is usually seen in musical productions where adjusting the
  speed by 4% would seriously damage the musical score.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>NTSC 3:2 telecine</strong></span>: Frames are
  shown alternately for the duration of 3 fields or 2 fields.
  This gives a fieldrate 2.5 times the original framerate.
  The result is also slowed down very slightly from 60 fields per
  second to 60000/1001 fields per second to maintain NTSC fieldrate.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>NTSC 2:2 pulldown</strong></span>: Used for
  showing 30fps material on NTSC.
  Nice, just like 2:2 PAL pulldown.
</p></li></ul></div><p>
There are also methods for converting between NTSC and PAL video,
but such topics are beyond the scope of this guide.
If you encounter such a movie and want to encode it, your best
bet is to find a copy in the original format.
Conversion between these two formats is highly destructive and
cannot be reversed cleanly, so your encode will greatly suffer
if it is made from a converted source.
</p><p>
When video is stored on DVD, consecutive pairs of fields are
grouped as a frame, even though they are not intended to be shown
at the same moment in time.
The MPEG-2 standard used on DVD and digital TV provides a
way both to encode the original progressive frames and to store
the number of fields for which a frame should be shown in the
header of that frame.
If this method has been used, the movie will often be described
as "soft-telecined", since the process only directs the
DVD player to apply pulldown to the movie rather than altering
the movie itself.
This case is highly preferable since it can easily be reversed
(actually ignored) by the encoder, and since it preserves maximal
quality.
However, many DVD and broadcast production studios do not use
proper encoding techniques but instead produce movies with
"hard telecine", where fields are actually duplicated in the
encoded MPEG-2.
</p><p>
The procedures for dealing with these cases will be covered
<a class="link" href="#menc-feat-telecine" title="7.2. How to deal with telecine and interlacing within NTSC DVDs">later in this guide</a>.
For now, we leave you with some guides to identifying which type
of material you are dealing with:
</p><div class="itemizedlist"><p class="title"><b>NTSC regions:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  If <span class="application">MPlayer</span> prints that the framerate
  has changed to 24000/1001 when watching your movie, and never changes
  back, it is almost certainly progressive content that has been
  "soft telecined".
</p></li><li class="listitem"><p>
  If <span class="application">MPlayer</span> shows the framerate
  switching back and forth between 24000/1001 and 30000/1001, and you see
  "combing" at times, then there are several possibilities.
  The 24000/1001 fps segments are almost certainly progressive
  content, "soft telecined", but the 30000/1001 fps parts could be
  either hard-telecined 24000/1001 fps content or 60000/1001 fields per second
  NTSC video.
  Use the same guidelines as the following two cases to determine which.
</p></li><li class="listitem"><p>
  If <span class="application">MPlayer</span> never shows the framerate
  changing, and every single frame with motion appears combed, your
  movie is NTSC video at 60000/1001 fields per second.
</p></li><li class="listitem"><p>
  If <span class="application">MPlayer</span> never shows the framerate
  changing, and two frames out of every five appear combed, your
  movie is "hard telecined" 24000/1001fps content.
</p></li></ul></div><div class="itemizedlist"><p class="title"><b>PAL regions:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  If you never see any combing, your movie is 2:2 pulldown.
</p></li><li class="listitem"><p>
  If you see combing alternating in and out every half second,
  then your movie is 2:2:2:2:2:2:2:2:2:2:2:3 pulldown.
</p></li><li class="listitem"><p>
  If you always see combing during motion, then your movie is PAL
  video at 50 fields per second.
</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Hint:</h3><p>
  <span class="application">MPlayer</span> can slow down movie playback
  with the -speed option or play it frame-by-frame.
  Try using <tt class="option">-speed</tt> 0.2 to watch the movie very
  slowly or press the "<span class="keycap"><b>.</b></span>" key repeatedly to play one frame at
  a time and identify the pattern, if you cannot see it at full speed.
</p></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-2pass"></a>7.1.2. Constant quantizer vs. multipass</h3></div></div></div><p>
It is possible to encode your movie at a wide range of qualities.
With modern video encoders and a bit of pre-codec compression
(downscaling and denoising), it is possible to achieve very good
quality at 700 MB, for a 90-110 minute widescreen movie.
Furthermore, all but the longest movies can be encoded with near-perfect
quality at 1400 MB.
</p><p>
There are three approaches to encoding the video: constant bitrate
(CBR), constant quantizer, and multipass (ABR, or average bitrate).
</p><p>
The complexity of the frames of a movie, and thus the number of bits
required to compress them, can vary greatly from one scene to another.
Modern video encoders can adjust to these needs as they go and vary
the bitrate.
In simple modes such as CBR, however, the encoders do not know the
bitrate needs of future scenes and so cannot exceed the requested
average bitrate for long stretches of time.
More advanced modes, such as multipass encode, can take into account
the statistics from previous passes; this fixes the problem mentioned
above.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note:</h3><p>
Most codecs which support ABR encode only support two pass encode
while some others such as <code class="systemitem">x264</code>,
<code class="systemitem">Xvid</code>
and <code class="systemitem">libavcodec</code> support
multipass, which slightly improves quality at each pass,
yet this improvement is no longer measurable nor noticeable after the
4th or so pass.
Therefore, in this section, two pass and multipass will be used
interchangeably.
</p></div><p>
In each of these modes, the video codec (such as
<code class="systemitem">libavcodec</code>)
breaks the video frame into 16x16 pixel macroblocks and then applies a
quantizer to each macroblock. The lower the quantizer, the better the
quality and higher the bitrate.
The method the movie encoder uses to determine
which quantizer to use for a given macroblock varies and is highly
tunable. (This is an extreme over-simplification of the actual
process, but the basic concept is useful to understand.)
</p><p>
When you specify a constant bitrate, the video codec will encode the video,
discarding
detail as much as necessary and as little as possible in order to remain
lower than the given bitrate. If you truly do not care about file size,
you could as well use CBR and specify a bitrate of infinity. (In
practice, this means a value high enough so that it poses no limit, like
10000Kbit.) With no real restriction on bitrate, the result is that
the codec will use the lowest
possible quantizer for each macroblock (as specified by
<tt class="option">vqmin</tt> for
<code class="systemitem">libavcodec</code>, which is 2 by default).
As soon as you specify a
low enough bitrate that the codec
is forced to use a higher quantizer, then you are almost certainly ruining
the quality of your video.
In order to avoid that, you should probably downscale your video, according
to the method described later on in this guide.
In general, you should avoid CBR altogether if you care about quality.
</p><p>
With constant quantizer, the codec uses the same quantizer, as
specified by the <tt class="option">vqscale</tt> option (for
<code class="systemitem">libavcodec</code>), on every macroblock.
If you want the highest quality rip possible, again ignoring bitrate,
you can use <tt class="option">vqscale=2</tt>.
This will yield the same bitrate and PSNR (peak signal-to-noise ratio)
as CBR with
<tt class="option">vbitrate</tt>=infinity and the default <tt class="option">vqmin</tt>
of 2.
</p><p>
The problem with constant quantizing is that it uses the given quantizer
whether the macroblock needs it or not. That is, it might be possible
to use a higher quantizer on a macroblock without sacrificing visual
quality. Why waste the bits on an unnecessarily low quantizer? Your
CPU has as many cycles as there is time, but there is only so many bits
on your hard disk.
</p><p>
With a two pass encode, the first pass will rip the movie as though it
were CBR, but it will keep a log of properties for each frame. This
data is then used during the second pass in order to make intelligent
decisions about which quantizers to use. During fast action or high
detail scenes, higher quantizers will likely be used, and during
slow moving or low detail scenes, lower quantizers will be used.
Normally, the amount of motion is much more important than the
amount of detail.
</p><p>
If you use <tt class="option">vqscale=2</tt>, then you are wasting bits. If you
use <tt class="option">vqscale=3</tt>, then you are not getting the highest
quality rip. Suppose you rip a DVD at <tt class="option">vqscale=3</tt>, and
the result is 1800Kbit. If you do a two pass encode with
<tt class="option">vbitrate=1800</tt>, the resulting video will have
<span class="bold"><strong>higher quality</strong></span> for the
<span class="bold"><strong>same bitrate</strong></span>.
</p><p>
Since you are now convinced that two pass is the way to go, the real
question now is what bitrate to use? The answer is that there is no
single answer. Ideally you want to choose a bitrate that yields the
best balance between quality and file size. This is going to vary
depending on the source video.
</p><p>
If size does not matter, a good starting point for a very high quality
rip is about 2000Kbit plus or minus 200Kbit.
For fast action or high detail source video, or if you just have a very
critical eye, you might decide on 2400 or 2600.
For some DVDs, you might not notice a difference at 1400Kbit. It is a
good idea to experiment with scenes at different bitrates to get a feel.
</p><p>
If you aim at a certain size, you will have to somehow calculate the bitrate.
But before that, you need to know how much space you should reserve for the
audio track(s), so you should
<a class="link" href="#menc-feat-dvd-mpeg4-audio" title="7.1.11. Audio">rip those</a> first.
You can compute the bitrate with the following equation:
<code class="systemitem">bitrate = (target_size_in_Mbytes - sound_size_in_Mbytes) *
1024 * 1024 / length_in_secs * 8 / 1000</code>
For instance, to squeeze a two-hour movie onto a 702MB CD, with 60MB
of audio track, the video bitrate will have to be:
<code class="systemitem">(702 - 60) * 1024 * 1024 / (120*60) * 8 / 1000
= 740kbps</code>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-constraints"></a>7.1.3. Constraints for efficient encoding</h3></div></div></div><p>
Due to the nature of MPEG-type compression, there are various
constraints you should follow for maximal quality.
MPEG splits the video up into 16x16 squares called macroblocks,
each composed of 4 8x8 blocks of luma (intensity) information and two
half-resolution 8x8 chroma (color) blocks (one for red-cyan axis and
the other for the blue-yellow axis).
Even if your movie width and height are not multiples of 16, the
encoder will use enough 16x16 macroblocks to cover the whole picture
area, and the extra space will go to waste.
So in the interests of maximizing quality at a fixed file size, it is
a bad idea to use dimensions that are not multiples of 16.
</p><p>
Most DVDs also have some degree of black borders at the edges. Leaving
these in place will hurt quality <span class="bold"><strong>a lot</strong></span>
in several ways.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  MPEG-type compression is highly dependent on frequency domain
  transformations, in particular the Discrete Cosine Transform (DCT),
  which is similar to the Fourier transform. This sort of encoding is
  efficient for representing patterns and smooth transitions, but it
  has a hard time with sharp edges. In order to encode them it must
  use many more bits, or else an artifact known as ringing will
  appear.
  </p><p>
  The frequency transform (DCT) takes place separately on each
  macroblock (actually each block), so this problem only applies when
  the sharp edge is inside a block. If your black borders begin
  exactly at multiple-of-16 pixel boundaries, this is not a problem.
  However, the black borders on DVDs rarely come nicely aligned, so
  in practice you will always need to crop to avoid this penalty.
  </p></li></ol></div><p>
In addition to frequency domain transforms, MPEG-type compression uses
motion vectors to represent the change from one frame to the next.
Motion vectors naturally work much less efficiently for new content
coming in from the edges of the picture, because it is not present in
the previous frame. As long as the picture extends all the way to the
edge of the encoded region, motion vectors have no problem with
content moving out the edges of the picture. However, in the presence
of black borders, there can be trouble:
</p><div class="orderedlist"><ol class="orderedlist" start="2" type="1"><li class="listitem"><p>
  For each macroblock, MPEG-type compression stores a vector
  identifying which part of the previous frame should be copied into
  this macroblock as a base for predicting the next frame. Only the
  remaining differences need to be encoded. If a macroblock spans the
  edge of the picture and contains part of the black border, then
  motion vectors from other parts of the picture will overwrite the
  black border. This means that lots of bits must be spent either
  re-blackening the border that was overwritten, or (more likely) a
  motion vector will not be used at all and all the changes in this
  macroblock will have to be coded explicitly. Either way, encoding
  efficiency is greatly reduced.
  </p><p>
  Again, this problem only applies if black borders do not line up on
  multiple-of-16 boundaries.
  </p></li><li class="listitem"><p>
  Finally, suppose we have a macroblock in the interior of the
  picture, and an object is moving into this block from near the edge
  of the image. MPEG-type coding cannot say "copy the part that is
  inside the picture but not the black border." So the black border
  will get copied inside too, and lots of bits will have to be spent
  encoding the part of the picture that is supposed to be there.
  </p><p>
  If the picture runs all the way to the edge of the encoded area,
  MPEG has special optimizations to repeatedly copy the pixels at the
  edge of the picture when a motion vector comes from outside the
  encoded area. This feature becomes useless when the movie has black
  borders. Unlike problems 1 and 2, aligning the borders at multiples
  of 16 does not help here.
  </p></li><li class="listitem"><p>
  Despite the borders being entirely black and never changing, there
  is at least a minimal amount of overhead involved in having more
  macroblocks.
</p></li></ol></div><p>
For all of these reasons, it is recommended to fully crop black
borders. Further, if there is an area of noise/distortion at the edge
of the picture, cropping this will improve encoding efficiency as
well. Videophile purists who want to preserve the original as close as
possible may object to this cropping, but unless you plan to encode at
constant quantizer, the quality you gain from cropping will
considerably exceed the amount of information lost at the edges.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-crop"></a>7.1.4. Cropping and Scaling</h3></div></div></div><p>
Recall from the previous section that the final picture size you
encode should be a multiple of 16 (in both width and height).
This can be achieved by cropping, scaling, or a combination of both.
</p><p>
When cropping, there are a few guidelines that must be followed to
avoid damaging your movie.
The normal YUV format, 4:2:0, stores chroma (color) information
subsampled, i.e. chroma is only sampled half as often in each
direction as luma (intensity) information.
Observe this diagram, where L indicates luma sampling points and C
chroma.
</p><div class="informaltable"><table border="1" width="40%"><colgroup><col align="center" class="col1"><col align="center" class="col2"><col align="center" class="col3"><col align="center" class="col4"><col align="center" class="col5"><col align="center" class="col6"><col align="center" class="col7"><col align="center" class="col8"></colgroup><tbody><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr></tbody></table></div><p>
As you can see, rows and columns of the image naturally come in pairs.
Thus your crop offsets and dimensions <span class="emphasis"><em>must</em></span> be
even numbers.
If they are not, the chroma will no longer line up correctly with the
luma.
In theory, it is possible to crop with odd offsets, but it requires
resampling the chroma which is potentially a lossy operation and not
supported by the crop filter.
</p><p>
Further, interlaced video is sampled as follows:
</p><div class="informaltable"><table border="1" width="80%"><colgroup><col align="center" class="col1"><col align="center" class="col2"><col align="center" class="col3"><col align="center" class="col4"><col align="center" class="col5"><col align="center" class="col6"><col align="center" class="col7"><col align="center" class="col8"><col align="center" class="col9"><col align="center" class="col10"><col align="center" class="col11"><col align="center" class="col12"><col align="center" class="col13"><col align="center" class="col14"><col align="center" class="col15"><col align="center" class="col16"></colgroup><tbody><tr><td colspan="8" align="center">Top field</td><td colspan="8" align="center">Bottom field</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr></tbody></table></div><p>
As you can see, the pattern does not repeat until after 4 lines.
So for interlaced video, your y-offset and height for cropping must
be multiples of 4.
</p><p>
Native DVD resolution is 720x480 for NTSC, and 720x576 for PAL, but
there is an aspect flag that specifies whether it is full-screen (4:3) or
wide-screen (16:9). Many (if not most) widescreen DVDs are not strictly
16:9, and will be either 1.85:1 or 2.35:1 (cinescope). This means that
there will be black bands in the video that will need to be cropped out.
</p><p>
<span class="application">MPlayer</span> provides a crop detection filter that
will determine the crop rectangle (<tt class="option">-vf cropdetect</tt>).
Run <span class="application">MPlayer</span> with
<tt class="option">-vf cropdetect</tt> and it will print out the crop
settings to remove the borders.
You should let the movie run long enough that the whole picture
area is used, in order to get accurate crop values.
</p><p>
Then, test the values you get with <span class="application">MPlayer</span>,
using the command line which was printed by
<tt class="option">cropdetect</tt>, and adjust the rectangle as needed.
The <tt class="option">rectangle</tt> filter can help by allowing you to
interactively position the crop rectangle over your movie.
Remember to follow the above divisibility guidelines so that you
do not misalign the chroma planes.
</p><p>
In certain cases, scaling may be undesirable.
Scaling in the vertical direction is difficult with interlaced
video, and if you wish to preserve the interlacing, you should
usually refrain from scaling.
If you will not be scaling but you still want to use multiple-of-16
dimensions, you will have to overcrop.
Do not undercrop, since black borders are very bad for encoding!
</p><p>
Because MPEG-4 uses 16x16 macroblocks, you will want to make sure that each
dimension of the video you are encoding is a multiple of 16 or else you
will be degrading quality, especially at lower bitrates. You can do this
by rounding the width and height of the crop rectangle down to the nearest
multiple of 16.
As stated earlier, when cropping, you will want to increase the Y offset by
half the difference of the old and the new height so that the resulting
video is taken from the center of the frame. And because of the way DVD
video is sampled, make sure the offset is an even number. (In fact, as a
rule, never use odd values for any parameter when you are cropping and
scaling video.) If you are not comfortable throwing a few extra pixels
away, you might prefer to scale the video instead. We will look
at this in our example below.
You can actually let the <tt class="option">cropdetect</tt> filter do all of the
above for you, as it has an optional <tt class="option">round</tt> parameter that
is equal to 16 by default.
</p><p>
Also, be careful about "half black" pixels at the edges. Make sure you
crop these out too, or else you will be wasting bits there that
are better spent elsewhere.
</p><p>
After all is said and done, you will probably end up with video whose pixels
are not quite 1.85:1 or 2.35:1, but rather something close to that. You
could calculate the new aspect ratio manually, but
<span class="application">MEncoder</span> offers an option for <code class="systemitem">libavcodec</code> called <tt class="option">autoaspect</tt>
that will do this for you. Absolutely do not scale this video up in order to
square the pixels unless you like to waste your hard disk space. Scaling
should be done on playback, and the player will use the aspect stored in
the AVI to determine the correct resolution.
Unfortunately, not all players enforce this auto-scaling information,
therefore you may still want to rescale.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-resolution-bitrate"></a>7.1.5. Choosing resolution and bitrate</h3></div></div></div><p>
If you will not be encoding in constant quantizer mode, you need to
select a bitrate.
The concept of bitrate is quite simple.
It is the (average) number of bits that will be consumed to store your
movie, per second.
Normally bitrate is measured in kilobits (1000 bits) per second.
The size of your movie on disk is the bitrate times the length of the
movie in time, plus a small amount of "overhead" (see the section on
<a class="link" href="#menc-feat-dvd-mpeg4-muxing-avi-limitations" title="7.1.12.2. Limitations of the AVI container">the AVI container</a>
for instance).
Other parameters such as scaling, cropping, etc. will
<span class="bold"><strong>not</strong></span> alter the file size unless you
change the bitrate as well!
</p><p>
Bitrate does <span class="bold"><strong>not</strong></span> scale proportionally
to resolution.
That is to say, a 320x240 file at 200 kbit/sec will not be the same
quality as the same movie at 640x480 and 800 kbit/sec!
There are two reasons for this:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  <span class="bold"><strong>Perceptual</strong></span>: You notice MPEG
  artifacts more if they are scaled up bigger!
  Artifacts appear on the scale of blocks (8x8).
  Your eye will not see errors in 4800 small blocks as easily as it
  sees errors in 1200 large blocks (assuming you will be scaling both
  to fullscreen).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Theoretical</strong></span>: When you scale down
  an image but still use the same size (8x8) blocks for the frequency
  space transform, you move more data to the high frequency bands.
  Roughly speaking, each pixel contains more of the detail than it
  did before.
  So even though your scaled-down picture contains 1/4 the information
  in the spacial directions, it could still contain a large portion
  of the information in the frequency domain (assuming that the high
  frequencies were underutilized in the original 640x480 image).
</p></li></ol></div><p>
</p><p>
Past guides have recommended choosing a bitrate and resolution based
on a "bits per pixel" approach, but this is usually not valid due to
the above reasons.
A better estimate seems to be that bitrates scale proportional to the
square root of resolution, so that 320x240 and 400 kbit/sec would be
comparable to 640x480 at 800 kbit/sec.
However this has not been verified with theoretical or empirical
rigor.
Further, given that movies vary greatly with regard to noise, detail,
degree of motion, etc., it is futile to make general recommendations
for bits per length-of-diagonal (the analog of bits per pixel,
using the square root).
</p><p>
So far we have discussed the difficulty of choosing a bitrate and
resolution.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-resolution-bitrate-compute"></a>7.1.5.1. Computing the resolution</h4></div></div></div><p>
The following steps will guide you in computing the resolution of your
encode without distorting the video too much, by taking into account several
types of information about the source video.
First, you should compute the encoded aspect ratio:
<code class="systemitem">ARc = (Wc x (ARa / PRdvd )) / Hc</code>

</p><div class="itemizedlist"><p class="title"><b>where:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Wc and Hc are the width and height of the cropped video,
</p></li><li class="listitem"><p>
  ARa is the displayed aspect ratio, which usually is 4/3 or 16/9,
</p></li><li class="listitem"><p>
  PRdvd is the pixel ratio of the DVD which is equal to 1.25=(720/576) for PAL
  DVDs and 1.5=(720/480) for NTSC DVDs.
</p></li></ul></div><p>
</p><p>
Then, you can compute the X and Y resolution, according to a certain
Compression Quality (CQ) factor:
<code class="systemitem">ResY = INT(SQRT( 1000*Bitrate/25/ARc/CQ )/16) * 16</code>
and
<code class="systemitem">ResX = INT( ResY * ARc / 16) * 16</code>
</p><p>
Okay, but what is the CQ?
The CQ represents the number of bits per pixel and per frame of the encode.
Roughly speaking, the greater the CQ, the less the likelihood to see
encoding artifacts.
However, if you have a target size for your movie (1 or 2 CDs for instance),
there is a limited total number of bits that you can spend; therefore it is
necessary to find a good tradeoff between compressibility and quality.
</p><p>
The CQ depends on the bitrate, the video codec efficiency and the
movie resolution.
In order to raise the CQ, typically you would downscale the movie given that the
bitrate is computed in function of the target size and the length of the
movie, which are constant.
With MPEG-4 ASP codecs such as <code class="systemitem">Xvid</code>
and <code class="systemitem">libavcodec</code>, a CQ below 0.18
usually results in a pretty blocky picture, because there
are not enough bits to code the information of each macroblock. (MPEG4, like
many other codecs, groups pixels by blocks of several pixels to compress the
image; if there are not enough bits, the edges of those blocks are
visible.)
It is therefore wise to take a CQ ranging from 0.20 to 0.22 for a 1 CD rip,
and 0.26-0.28 for 2 CDs rip with standard encoding options.
More advanced encoding options such as those listed here for
<a class="link" href="#menc-feat-mpeg4-lavc-example-settings" title="7.3.4. Encoding setting examples"><code class="systemitem">libavcodec</code></a>
and
<a class="link" href="#menc-feat-xvid-example-settings" title="7.4.4. Encoding setting examples"><code class="systemitem">Xvid</code></a>
should make it possible to get the same quality with CQ ranging from
0.18 to 0.20 for a 1 CD rip, and 0.24 to 0.26 for a 2 CD rip.
With MPEG-4 AVC codecs such as <code class="systemitem">x264</code>,
you can use a CQ ranging from 0.14 to 0.16 with standard encoding options,
and should be able to go as low as 0.10 to 0.12 with
<a class="link" href="#menc-feat-x264-example-settings" title="7.5.2. Encoding setting examples"><code class="systemitem">x264</code>'s advanced encoding settings</a>.
</p><p>
Please take note that the CQ is just an indicative figure, as depending on
the encoded content, a CQ of 0.18 may look just fine for a Bergman, contrary
to a movie such as The Matrix, which contains many high-motion scenes.
On the other hand, it is worthless to raise CQ higher than 0.30 as you would
be wasting bits without any noticeable quality gain.
Also note that as mentioned earlier in this guide, low resolution videos
need a bigger CQ (compared to, for instance, DVD resolution) to look good.
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-filtering"></a>7.1.6. Filtering</h3></div></div></div><p>
Learning how to use <span class="application">MEncoder</span>'s video filters
is essential to producing good encodes.
All video processing is performed through the filters -- cropping,
scaling, color adjustment, noise removal, sharpening, deinterlacing,
telecine, inverse telecine, and deblocking, just to name a few.
Along with the vast number of supported input formats, the variety of
filters available in <span class="application">MEncoder</span> is one of its
main advantages over other similar programs.
</p><p>
Filters are loaded in a chain using the -vf option:

</p><pre class="screen">-vf filter1=options,filter2=options,...</pre><p>

Most filters take several numeric options separated by colons, but
the syntax for options varies from filter to filter, so read the man
page for details on the filters you wish to use.
</p><p>
Filters operate on the video in the order they are loaded.
For example, the following chain:

</p><pre class="screen">-vf crop=688:464:12:4,scale=640:464</pre><p>

will first crop the 688x464 region of the picture with upper-left
corner at (12,4), and then scale the result down to 640x464.
</p><p>
Certain filters need to be loaded at or near the beginning of the
filter chain, in order to take advantage of information from the
video decoder that will be lost or invalidated by other filters.
The principal examples are <tt class="option">pp</tt> (postprocessing, only
when it is performing deblock or dering operations),
<tt class="option">spp</tt> (another postprocessor to remove MPEG artifacts),
<tt class="option">pullup</tt> (inverse telecine), and
<tt class="option">softpulldown</tt> (for converting soft telecine to hard telecine).
</p><p>
In general, you want to do as little filtering as possible to the movie
in order to remain close to the original DVD source. Cropping is often
necessary (as described above), but avoid to scale the video. Although
scaling down is sometimes preferred to using higher quantizers, we want
to avoid both these things: remember that we decided from the start to
trade bits for quality.
</p><p>
Also, do not adjust gamma, contrast, brightness, etc. What looks good
on your display may not look good on others. These adjustments should
be done on playback only.
</p><p>
One thing you might want to do, however, is pass the video through a
very light denoise filter, such as <tt class="option">-vf hqdn3d=2:1:2</tt>.
Again, it is a matter of putting those bits to better use: why waste them
encoding noise when you can just add that noise back in during playback?
Increasing the parameters for <tt class="option">hqdn3d</tt> will further
improve compressibility, but if you increase the values too much, you
risk degrading the image visibly. The suggested values above
(<tt class="option">2:1:2</tt>) are quite conservative; you should feel free to
experiment with higher values and observe the results for yourself.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-interlacing"></a>7.1.7. Interlacing and Telecine</h3></div></div></div><p>
Almost all movies are shot at 24 fps. Because NTSC is 30000/1001 fps, some
processing must be done to this 24 fps video to make it run at the correct
NTSC framerate. The process is called 3:2 pulldown, commonly referred to
as telecine (because pulldown is often applied during the telecine
process), and, naively described, it works by slowing the film down to
24000/1001 fps, and repeating every fourth frame.
</p><p>
No special processing, however, is done to the video for PAL DVDs, which
run at 25 fps. (Technically, PAL can be telecined, called 2:2 pulldown,
but this does not become an issue in practice.) The 24 fps film is simply
played back at 25 fps. The result is that the movie runs slightly faster,
but unless you are an alien, you probably will not notice the difference.
Most PAL DVDs have pitch-corrected audio, so when they are played back at
25 fps things will sound right, even though the audio track (and hence the
whole movie) has a running time that is 4% less than NTSC DVDs.
</p><p>
Because the video in a PAL DVD has not been altered, you need not worry
much about framerate. The source is 25 fps, and your rip will be 25
fps. However, if you are ripping an NTSC DVD movie, you may need to
apply inverse telecine.
</p><p>
For movies shot at 24 fps, the video on the NTSC DVD is either telecined
30000/1001, or else it is progressive 24000/1001 fps and intended to be
telecined on-the-fly by a DVD player. On the other hand, TV series are usually
only interlaced, not telecined. This is not a hard rule: some TV series
are interlaced (such as Buffy the Vampire Slayer) whereas some are a
mixture of progressive and interlaced (such as Angel, or 24).
</p><p>
It is highly recommended that you read the section on
<a class="link" href="#menc-feat-telecine" title="7.2. How to deal with telecine and interlacing within NTSC DVDs">How to deal with telecine and interlacing in NTSC DVDs</a>
to learn how to handle the different possibilities.
</p><p>
However, if you are mostly just ripping movies, likely you are either
dealing with 24 fps progressive or telecined video, in which case you can
use the <tt class="option">pullup</tt> filter <tt class="option">-vf
pullup,softskip</tt>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-encoding-interlaced"></a>7.1.8. Encoding interlaced video</h3></div></div></div><p>
If the movie you want to encode is interlaced (NTSC video or
PAL video), you will need to choose whether you want to
deinterlace or not.
While deinterlacing will make your movie usable on progressive
scan displays such a computer monitors and projectors, it comes
at a cost: The fieldrate of 50 or 60000/1001 fields per second
is halved to 25 or 30000/1001 frames per second, and roughly half of
the information in your movie will be lost during scenes with
significant motion.
</p><p>
Therefore, if you are encoding for high quality archival purposes,
it is recommended not to deinterlace.
You can always deinterlace the movie at playback time when
displaying it on progressive scan devices.
The power of currently available computers forces players to use a
deinterlacing filter, which results in a slight degradation in
image quality.
But future players will be able to mimic the interlaced display of
a TV, deinterlacing to full fieldrate and interpolating 50 or
60000/1001 entire frames per second from the interlaced video.
</p><p>
Special care must be taken when working with interlaced video:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Crop height and y-offset must be multiples of 4.
</p></li><li class="listitem"><p>
  Any vertical scaling must be performed in interlaced mode.
</p></li><li class="listitem"><p>
  Postprocessing and denoising filters may not work as expected
  unless you take special care to operate them a field at a time,
  and they may damage the video if used incorrectly.
</p></li></ol></div><p>
With these things in mind, here is our first example:
</p><pre class="screen">
mencoder <em class="replaceable"><code>capture.avi</code></em> -mc 0 -oac lavc -ovc lavc -lavcopts \
    vcodec=mpeg2video:vbitrate=6000:ilme:ildct:acodec=mp2:abitrate=224
</pre><p>
Note the <tt class="option">ilme</tt> and <tt class="option">ildct</tt> options.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-av-sync"></a>7.1.9. Notes on Audio/Video synchronization</h3></div></div></div><p>
<span class="application">MEncoder</span>'s audio/video synchronization
algorithms were designed with the intention of recovering files with
broken sync.
However, in some cases they can cause unnecessary skipping and duplication of
frames, and possibly slight A/V desync, when used with proper input
(of course, A/V sync issues apply only if you process or copy the
audio track while transcoding the video, which is strongly encouraged).
Therefore, you may have to switch to basic A/V sync with
the <tt class="option">-mc 0</tt> option, or put this in your
<code class="systemitem">~/.mplayer/mencoder</code> config file, as long as
you are only working with good sources (DVD, TV capture, high quality
MPEG-4 rips, etc) and not broken ASF/RM/MOV files.
</p><p>
If you want to further guard against strange frame skips and
duplication, you can use both <tt class="option">-mc 0</tt> and
<tt class="option">-noskip</tt>.
This will prevent <span class="emphasis"><em>all</em></span> A/V sync, and copy frames
one-to-one, so you cannot use it if you will be using any filters that
unpredictably add or drop frames, or if your input file has variable
framerate!
Therefore, using <tt class="option">-noskip</tt> is not in general recommended.
</p><p>
The so-called "three-pass" audio encoding which
<span class="application">MEncoder</span> supports has been reported to cause A/V
desync.
This will definitely happen if it is used in conjunction with certain
filters, therefore, it is now recommended <span class="emphasis"><em>not</em></span> to
use three-pass audio mode.
This feature is only left for compatibility purposes and for expert
users who understand when it is safe to use and when it is not.
If you have never heard of three-pass mode before, forget that we
even mentioned it!
</p><p>
There have also been reports of A/V desync when encoding from stdin
with <span class="application">MEncoder</span>.
Do not do this! Always use a file or CD/DVD/etc device as input.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-codec"></a>7.1.10. Choosing the video codec</h3></div></div></div><p>
Which video codec is best to choose depends on several factors,
like size, quality, streamability, usability and popularity, some of
which widely depend on personal taste and technical constraints.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>Compression efficiency</strong></span>:
  It is quite easy to understand that most newer-generation codecs are
  made to increase quality and compression.
  Therefore, the authors of this guide and many other people suggest that
  you cannot go wrong
  <a href="#ftn.fn-menc-feat-dvd-mpeg4-codec-cpu" class="footnote" name="fn-menc-feat-dvd-mpeg4-codec-cpu"><sup class="footnote">[1]</sup></a>
  when choosing MPEG-4 AVC codecs like
  <code class="systemitem">x264</code> instead of MPEG-4 ASP codecs
  such as <code class="systemitem">libavcodec</code> MPEG-4 or
  <code class="systemitem">Xvid</code>.
  (Advanced codec developers may be interested in reading Michael
  Niedermayer's opinion on
  "<a class="ulink" href="http://guru.multimedia.cx/?p=10" target="_top">why MPEG4-ASP sucks</a>".)
  Likewise, you should get better quality using MPEG-4 ASP than you
  would with MPEG-2 codecs.
  </p><p>
  However, newer codecs which are in heavy development can suffer from
  bugs which have not yet been noticed and which can ruin an encode.
  This is simply the tradeoff for using bleeding-edge technology.
  </p><p>
  What is more, beginning to use a new codec requires that you spend some
  time becoming familiar with its options, so that you know what
  to adjust to achieve a desired picture quality.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Hardware compatibility</strong></span>:
  It usually takes a long time for standalone video players to begin to
  include support for the latest video codecs.
  As a result, most only support MPEG-1 (like VCD, XVCD and KVCD), MPEG-2
  (like DVD, SVCD and KVCD) and MPEG-4 ASP (like DivX,
  <code class="systemitem">libavcodec</code>'s LMP4 and
  <code class="systemitem">Xvid</code>)
  (Beware: Usually, not all MPEG-4 ASP features are supported).
  Please refer to the technical specs of your player (if they are available),
  or google around for more information.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Best quality per encoding time</strong></span>:
  Codecs that have been around for some time (such as
  <code class="systemitem">libavcodec</code> MPEG-4 and
  <code class="systemitem">Xvid</code>) are usually heavily
  optimized with all kinds of smart algorithms and SIMD assembly code.
  That is why they tend to yield the best quality per encoding time ratio.
  However, they may have some very advanced options that, if enabled,
  will make the encode really slow for marginal gains.
  </p><p>
  If you are after blazing speed you should stick around the default
  settings of the video codec (although you should still try the other
  options which are mentioned in other sections of this guide).
  </p><p>
  You may also consider choosing a codec which can do multi-threaded
  processing, though this is only useful for users of machines with
  several CPUs.
  <code class="systemitem">libavcodec</code> MPEG-4 does
  allow that, but speed gains are limited, and there is a slight
  negative effect on picture quality.
  <code class="systemitem">Xvid</code>'s multi-threaded encoding,
  activated by the <tt class="option">threads</tt> option, can be used to
  boost encoding speed — by about 40-60% in typical cases —
  with little if any picture degradation.
  <code class="systemitem">x264</code> also allows multi-threaded
  encoding, which currently speeds up encoding by 94% per CPU core while
  lowering PSNR between 0.005dB and 0.01dB on a typical setup.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Personal taste</strong></span>:
  This is where it gets almost irrational: For the same reason that some
  hung on to DivX 3 for years when newer codecs were already doing wonders,
  some folks will prefer <code class="systemitem">Xvid</code>
  or <code class="systemitem">libavcodec</code> MPEG-4 over
  <code class="systemitem">x264</code>.
  </p><p>
  You should make your own judgement; do not take advice from people who
  swear by one codec.
  Take a few sample clips from raw sources and compare different
  encoding options and codecs to find one that suits you best.
  The best codec is the one you master, and the one that looks
  best to your eyes on your display
  <a href="#ftn.fn-menc-feat-dvd-mpeg4-codec-playback" class="footnote" name="fn-menc-feat-dvd-mpeg4-codec-playback"><sup class="footnote">[2]</sup></a>!
  </p></li></ul></div><p>
Please refer to the section
<a class="link" href="#menc-feat-selecting-codec" title="6.1. Selecting codecs and container formats">selecting codecs and container formats</a>
to get a list of supported codecs.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-audio"></a>7.1.11. Audio</h3></div></div></div><p>
Audio is a much simpler problem to solve: if you care about quality, just
leave it as is.
Even AC-3 5.1 streams are at most 448Kbit/s, and they are worth every bit.
You might be tempted to transcode the audio to high quality Vorbis, but
just because you do not have an A/V receiver for AC-3 pass-through today
does not mean you will not have one tomorrow. Future-proof your DVD rips by
preserving the AC-3 stream.
You can keep the AC-3 stream either by copying it directly into the video
stream <a class="link" href="#menc-feat-mpeg4" title='6.3. Encoding two pass MPEG-4 ("DivX")'>during the encoding</a>.
You can also extract the AC-3 stream in order to mux it into containers such
as NUT or Matroska.
</p><pre class="screen">
mplayer <em class="replaceable"><code>source_file.vob</code></em> -aid 129 -dumpaudio -dumpfile <em class="replaceable"><code>sound.ac3</code></em>
</pre><p>
will dump into the file <em class="replaceable"><code>sound.ac3</code></em> the
audio track number 129 from the file
<em class="replaceable"><code>source_file.vob</code></em> (NB: DVD VOB files
usually use a different audio numbering,
which means that the VOB audio track 129 is the 2nd audio track of the file).
</p><p>
But sometimes you truly have no choice but to further compress the
sound so that more bits can be spent on the video.
Most people choose to compress audio with either MP3 or Vorbis audio codecs.
While the latter is a very space-efficient codec, MP3 is better supported
by hardware players, although this trend is changing.
</p><p>
Do <span class="emphasis"><em>not</em></span> use <tt class="option">-nosound</tt> when encoding
a file with audio, even if you will be encoding and muxing audio
separately later.
Though it may work in ideal cases, using <tt class="option">-nosound</tt> is
likely to hide some problems in your encoding command line setting.
In other words, having a soundtrack during your encode assures you that,
provided you do not see messages such as
<span class="quote">“<span class="quote">Too many audio packets in the buffer</span>”</span>, you will be able
to get proper sync.
</p><p>
You need to have <span class="application">MEncoder</span> process the sound.
You can for example copy the original soundtrack during the encode with
<tt class="option">-oac copy</tt> or convert it to a "light" 4 kHz mono WAV
PCM with <tt class="option">-oac pcm -channels 1 -srate 4000</tt>.
Otherwise, in some cases, it will generate a video file that will not sync
with the audio.
Such cases are when the number of video frames in the source file does
not match up to the total length of audio frames or whenever there
are discontinuities/splices where there are missing or extra audio frames.
The correct way to handle this kind of problem is to insert silence or
cut audio at these points.
However <span class="application">MPlayer</span> cannot do that, so if you
demux the AC-3 audio and encode it with a separate app (or dump it to PCM with
<span class="application">MPlayer</span>), the splices will be left incorrect
and the only way to correct them is to drop/duplicate video frames at the
splice.
As long as <span class="application">MEncoder</span> sees the audio when it is
encoding the video, it can do this dropping/duping (which is usually OK
since it takes place at full black/scene change), but if
<span class="application">MEncoder</span> cannot see the audio, it will just
process all frames as-is and they will not fit the final audio stream when
you for example merge your audio and video track into a Matroska file.
</p><p>
First of all, you will have to convert the DVD sound into a WAV file that the
audio codec can use as input.
For example:
</p><pre class="screen">
mplayer <em class="replaceable"><code>source_file.vob</code></em> -ao pcm:file=<em class="replaceable"><code>destination_sound.wav</code></em> \
    -vc dummy -aid 1 -vo null
</pre><p>
will dump the second audio track from the file
<em class="replaceable"><code>source_file.vob</code></em> into the file
<em class="replaceable"><code>destination_sound.wav</code></em>.
You may want to normalize the sound before encoding, as DVD audio tracks
are commonly recorded at low volumes.
You can use the tool <span class="application">normalize</span> for instance,
which is available in most distributions.
If you are using Windows, a tool such as <span class="application">BeSweet</span>
can do the same job.
You will compress in either Vorbis or MP3.
For example:
</p><pre class="screen">oggenc -q1 <em class="replaceable"><code>destination_sound.wav</code></em></pre><p>
will encode <em class="replaceable"><code>destination_sound.wav</code></em> with
the encoding quality 1, which is roughly equivalent to 80Kb/s, and
is the minimum quality at which you should encode if you care about
quality.
Please note that <span class="application">MEncoder</span> currently cannot
mux Vorbis audio tracks
into the output file because it only supports AVI and MPEG
containers as an output, each of which may lead to audio/video
playback synchronization problems with some players when the AVI file
contain VBR audio streams such as Vorbis.
Do not worry, this document will show you how you can do that with third
party programs.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-muxing"></a>7.1.12. Muxing</h3></div></div></div><p>
Now that you have encoded your video, you will most likely want
to mux it with one or more audio tracks into a movie container, such
as AVI, MPEG, Matroska or NUT.
<span class="application">MEncoder</span> is currently only able to natively output
audio and video into MPEG and AVI container formats.
for example:
</p><pre class="screen">
mencoder -oac copy -ovc copy  -o <em class="replaceable"><code>output_movie.avi</code></em> \
    -audiofile <em class="replaceable"><code>input_audio.mp2</code></em> <em class="replaceable"><code>input_video.avi</code></em>
</pre><p>
This would merge the video file <em class="replaceable"><code>input_video.avi</code></em>
and the audio file <em class="replaceable"><code>input_audio.mp2</code></em>
into the AVI file <em class="replaceable"><code>output_movie.avi</code></em>.
This command works with MPEG-1 layer I, II and III (more commonly known
as MP3) audio, WAV and a few other audio formats too.
</p><p>
<span class="application">MEncoder</span> features experimental support for
<code class="systemitem">libavformat</code>, which is a
library from the FFmpeg project that supports muxing and demuxing
a variety of containers.
For example:
</p><pre class="screen">
mencoder -oac copy -ovc copy -o <em class="replaceable"><code>output_movie.asf</code></em> -audiofile <em class="replaceable"><code>input_audio.mp2</code></em> \
    <em class="replaceable"><code>input_video.avi</code></em> -of lavf -lavfopts format=asf
</pre><p>
This will do the same thing as the previous example, except that
the output container will be ASF.
Please note that this support is highly experimental (but getting
better every day), and will only work if you compiled
<span class="application">MPlayer</span> with the support for
<code class="systemitem">libavformat</code> enabled (which
means that a pre-packaged binary version will not work in most cases).
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-filter-issues"></a>7.1.12.1. Improving muxing and A/V sync reliability</h4></div></div></div><p>
You may experience some serious A/V sync problems while trying to mux
your video and some audio tracks, where no matter how you adjust the
audio delay, you will never get proper sync.
That may happen when you use some video filters that will drop or
duplicate some frames, like the inverse telecine filters.
It is strongly encouraged to append the <tt class="option">harddup</tt> video
filter at the end of the filter chain to avoid this kind of problem.
</p><p>
Without <tt class="option">harddup</tt>, if <span class="application">MEncoder</span>
wants to duplicate a frame, it relies on the muxer to put a mark on the
container so that the last frame will be displayed again to maintain
sync while writing no actual frame.
With <tt class="option">harddup</tt>, <span class="application">MEncoder</span>
will instead just push the last frame displayed again into the filter
chain.
This means that the encoder receives the <span class="emphasis"><em>exact</em></span>
same frame twice, and compresses it.
This will result in a slightly bigger file, but will not cause problems
when demuxing or remuxing into other container formats.
</p><p>
You may also have no choice but to use <tt class="option">harddup</tt> with
container formats that are not too tightly linked with
<span class="application">MEncoder</span> such as the ones supported through
<code class="systemitem">libavformat</code>, which may not
support frame duplication at the container level.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-avi-limitations"></a>7.1.12.2. Limitations of the AVI container</h4></div></div></div><p>
Although it is the most widely-supported container format after MPEG-1,
AVI also has some major drawbacks.
Perhaps the most obvious is the overhead.
For each chunk of the AVI file, 24 bytes are wasted on headers and index.
This translates into a little over 5 MB per hour, or 1-2.5%
overhead for a 700 MB movie. This may not seem like much, but it could
mean the difference between being able to use 700 kbit/sec video or
714 kbit/sec, and every bit of quality counts.
</p><p>
In addition this gross inefficiency, AVI also has the following major
limitations:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Only fixed-fps content can be stored. This is particularly limiting
  if the original material you want to encode is mixed content, for
  example a mix of NTSC video and film material.
  Actually there are hacks that can be used to store mixed-framerate
  content in AVI, but they increase the (already huge) overhead
  fivefold or more and so are not practical.
</p></li><li class="listitem"><p>
  Audio in AVI files must be either constant-bitrate (CBR) or
  constant-framesize (i.e. all frames decode to the same number of
  samples).
  Unfortunately, the most efficient codec, Vorbis, does not meet
  either of these requirements.
  Therefore, if you plan to store your movie in AVI, you will have to
  use a less efficient codec such as MP3 or AC-3.
</p></li></ol></div><p>
Having said all that, <span class="application">MEncoder</span> does not
currently support variable-fps output or Vorbis encoding.
Therefore, you may not see these as limitations if
<span class="application">MEncoder</span> is the
only tool you will be using to produce your encodes.
However, it is possible to use <span class="application">MEncoder</span>
only for video encoding, and then use external tools to encode
audio and mux it into another container format.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-matroska"></a>7.1.12.3. Muxing into the Matroska container</h4></div></div></div><p>
Matroska is a free, open standard container format, aiming
to offer a lot of advanced features, which older containers
like AVI cannot handle.
For example, Matroska supports variable bitrate audio content
(VBR), variable framerates (VFR), chapters, file attachments,
error detection code (EDC) and modern A/V Codecs like "Advanced Audio
Coding" (AAC), "Vorbis" or "MPEG-4 AVC" (H.264), next to nothing
handled by AVI.
</p><p>
The tools required to create Matroska files are collectively called
<span class="application">mkvtoolnix</span>, and are available for most
Unix platforms as well as <span class="application">Windows</span>.
Because Matroska is an open standard you may find other
tools that suit you better, but since mkvtoolnix is the most
common, and is supported by the Matroska team itself, we will
only cover its usage.
</p><p>
Probably the easiest way to get started with Matroska is to use
<span class="application">MMG</span>, the graphical frontend shipped with
<span class="application">mkvtoolnix</span>, and follow the
<a class="ulink" href="http://www.bunkus.org/videotools/mkvtoolnix/doc/mkvmerge-gui.html" target="_top">guide to mkvmerge GUI (mmg)</a>
</p><p>
You may also mux audio and video files using the command line:
</p><pre class="screen">
mkvmerge -o <em class="replaceable"><code>output.mkv</code></em> <em class="replaceable"><code>input_video.avi</code></em> <em class="replaceable"><code>input_audio1.mp3</code></em> <em class="replaceable"><code>input_audio2.ac3</code></em>
</pre><p>
This would merge the video file <em class="replaceable"><code>input_video.avi</code></em>
and the two audio files <em class="replaceable"><code>input_audio1.mp3</code></em>
and <em class="replaceable"><code>input_audio2.ac3</code></em> into the Matroska
file <em class="replaceable"><code>output.mkv</code></em>.
Matroska, as mentioned earlier, is able to do much more than that, like
multiple audio tracks (including fine-tuning of audio/video
synchronization), chapters, subtitles, splitting, etc...
Please refer to the documentation of those applications for
more details.
</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-telecine"></a>7.2. How to deal with telecine and interlacing within NTSC DVDs</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-intro"></a>7.2.1. Introduction</h3></div></div></div><p><b>What is telecine? </b>
If you do not understand much of what is written in this document, read the
<a class="ulink" href="http://en.wikipedia.org/wiki/Telecine" target="_top">Wikipedia entry on telecine</a>.
It is an understandable and reasonably comprehensive
description of what telecine is.
</p><p><b>A note about the numbers. </b>
Many documents, including the article linked above, refer to the fields
per second value of NTSC video as 59.94 and the corresponding frames
per second values as 29.97 (for telecined and interlaced) and 23.976
(for progressive). For simplicity, some documents even round these
numbers to 60, 30, and 24.
</p><p>
Strictly speaking, all those numbers are approximations. Black and
white NTSC video was exactly 60 fields per second, but 60000/1001
was later chosen to accommodate color data while remaining compatible
with contemporary black and white televisions. Digital NTSC video
(such as on a DVD) is also 60000/1001 fields per second. From this,
interlaced and telecined video are derived to be 30000/1001 frames
per second; progressive video is 24000/1001 frames per second.
</p><p>
Older versions of the <span class="application">MEncoder</span> documentation
and many archived mailing list posts refer to 59.94, 29.97, and 23.976.
All <span class="application">MEncoder</span> documentation has been updated
to use the fractional values, and you should use them too.
</p><p>
<tt class="option">-ofps 23.976</tt> is incorrect.
<tt class="option">-ofps 24000/1001</tt> should be used instead.
</p><p><b>How telecine is used. </b>
All video intended to be displayed on an NTSC
television set must be 60000/1001 fields per second. Made-for-TV movies
and shows are often filmed directly at 60000/1001 fields per second, but
the majority of cinema is filmed at 24 or 24000/1001 frames per
second. When cinematic movie DVDs are mastered, the video is then
converted for television using a process called telecine.
</p><p>
On a DVD, the video is never actually stored as 60000/1001 fields per
second. For video that was originally 60000/1001, each pair of fields is
combined to form a frame, resulting in 30000/1001 frames per
second. Hardware DVD players then read a flag embedded in the video
stream to determine whether the odd- or even-numbered lines should
form the first field.
</p><p>
Usually, 24000/1001 frames per second content stays as it is when
encoded for a DVD, and the DVD player must perform telecining
on-the-fly. Sometimes, however, the video is telecined
<span class="emphasis"><em>before</em></span> being stored on the DVD; even though it
was originally 24000/1001 frames per second, it becomes 60000/1001 fields per
second. When it is stored on the DVD, pairs of fields are combined to form
30000/1001 frames per second.
</p><p>
When looking at individual frames formed from 60000/1001 fields per
second video, telecined or otherwise, interlacing is clearly visible
wherever there is any motion, because one field (say, the
even-numbered lines) represents a moment in time 1/(60000/1001)
seconds later than the other. Playing interlaced video on a computer
looks ugly both because the monitor is higher resolution and because
the video is shown frame-after-frame instead of field-after-field.
</p><div class="itemizedlist"><p class="title"><b>Notes:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  This section only applies to NTSC DVDs, and not PAL.
</p></li><li class="listitem"><p>
  The example <span class="application">MEncoder</span> lines throughout the
  document are <span class="bold"><strong>not</strong></span> intended for
  actual use. They are simply the bare minimum required to encode the
  pertaining video category. How to make good DVD rips or fine-tune
  <code class="systemitem">libavcodec</code> for maximal
  quality is not within the scope of this section; refer to other
  sections within the <a class="link" href="#encoding-guide" title="Chapter 7. Encoding with MEncoder">MEncoder encoding
  guide</a>.
</p></li><li class="listitem"><p>
  There are a couple footnotes specific to this guide, linked like this:
  <a class="link" href="#menc-feat-telecine-footnotes" title="7.2.4. Footnotes">[1]</a>
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-ident"></a>7.2.2. How to tell what type of video you have</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-progressive"></a>7.2.2.1. Progressive</h4></div></div></div><p>
Progressive video was originally filmed at 24000/1001 fps, and stored
on the DVD without alteration.
</p><p>
When you play a progressive DVD in <span class="application">MPlayer</span>,
<span class="application">MPlayer</span> will print the following line as
soon as the movie begins to play:
</p><pre class="screen">
demux_mpg: 24000/1001 fps progressive NTSC content detected, switching framerate.
</pre><p>
From this point forward, demux_mpg should never say it finds
"30000/1001 fps NTSC content."
</p><p>
When you watch progressive video, you should never see any
interlacing. Beware, however, because sometimes there is a tiny bit
of telecine mixed in where you would not expect. I have encountered TV
show DVDs that have one second of telecine at every scene change, or
at seemingly random places. I once watched a DVD that had a
progressive first half, and the second half was telecined. If you
want to be <span class="emphasis"><em>really</em></span> thorough, you can scan the
entire movie:
</p><pre class="screen">mplayer dvd://1 -nosound -vo null -benchmark</pre><p>
Using <tt class="option">-benchmark</tt> makes
<span class="application">MPlayer</span> play the movie as quickly as it
possibly can; still, depending on your hardware, it can take a
while. Every time demux_mpg reports a framerate change, the line
immediately above will show you the time at which the change
occurred.
</p><p>
Sometimes progressive video on DVDs is referred to as
"soft-telecine" because it is intended to
be telecined by the DVD player.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-telecined"></a>7.2.2.2. Telecined</h4></div></div></div><p>
Telecined video was originally filmed at 24000/1001, but was telecined
<span class="emphasis"><em>before</em></span> it was written to the DVD.
</p><p>
<span class="application">MPlayer</span> does not (ever) report any
framerate changes when it plays telecined video.
</p><p>
Watching a telecined video, you will see interlacing artifacts that
seem to "blink": they repeatedly appear and disappear.
You can look closely at this by
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><pre class="screen">mplayer dvd://1</pre></li><li class="listitem"><p>
  Seek to a part with motion.
</p></li><li class="listitem"><p>
  Use the <span class="keycap"><b>.</b></span> key to step forward one frame at a time.
</p></li><li class="listitem"><p>
  Look at the pattern of interlaced-looking and progressive-looking
  frames. If the pattern you see is PPPII,PPPII,PPPII,... then the
  video is telecined. If you see some other pattern, then the video
  may have been telecined using some non-standard method;
  <span class="application">MEncoder</span> cannot losslessly convert
  non-standard telecine to progressive. If you do not see any
  pattern at all, then it is most likely interlaced.
</p></li></ol></div><p>
</p><p>
Sometimes telecined video on DVDs is referred to as
"hard-telecine". Since hard-telecine is already 60000/1001 fields
per second, the DVD player plays the video without any manipulation.
</p><p>
Another way to tell if your source is telecined or not is to play
the source with the <tt class="option">-vf pullup</tt> and <tt class="option">-v</tt>
command line options to see how <tt class="option">pullup</tt> matches frames.
If the source is telecined, you should see on the console a 3:2 pattern
with <code class="systemitem">0+.1.+2</code> and <code class="systemitem">0++1</code>
alternating.
This technique has the advantage that you do not need to watch the
source to identify it, which could be useful if you wish to automate
the encoding procedure, or to carry out said procedure remotely via
a slow connection.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-interlaced"></a>7.2.2.3. Interlaced</h4></div></div></div><p>
Interlaced video was originally filmed at 60000/1001 fields per second,
and stored on the DVD as 30000/1001 frames per second. The interlacing effect
(often called "combing") is a result of combining pairs of
fields into frames. Each field is supposed to be 1/(60000/1001) seconds apart,
and when they are displayed simultaneously the difference is apparent.
</p><p>
As with telecined video, <span class="application">MPlayer</span> should
not ever report any framerate changes when playing interlaced content.
</p><p>
When you view an interlaced video closely by frame-stepping with the
<span class="keycap"><b>.</b></span> key, you will see that every single frame is interlaced.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-mixedpt"></a>7.2.2.4. Mixed progressive and telecine</h4></div></div></div><p>
All of a "mixed progressive and telecine" video was originally
24000/1001 frames per second, but some parts of it ended up being telecined.
</p><p>
When <span class="application">MPlayer</span> plays this category, it will
(often repeatedly) switch back and forth between "30000/1001 fps NTSC"
and "24000/1001 fps progressive NTSC". Watch the bottom of
<span class="application">MPlayer</span>'s output to see these messages.
</p><p>
You should check the "30000/1001 fps NTSC" sections to make sure
they are actually telecine, and not just interlaced.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-mixedpi"></a>7.2.2.5. Mixed progressive and interlaced</h4></div></div></div><p>
In "mixed progressive and interlaced" content, progressive
and interlaced video have been spliced together.
</p><p>
This category looks just like "mixed progressive and telecine",
until you examine the 30000/1001 fps sections and see that they do not have the
telecine pattern.
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-encode"></a>7.2.3. How to encode each category</h3></div></div></div><p>
As I mentioned in the beginning, example <span class="application">MEncoder</span>
lines below are <span class="bold"><strong>not</strong></span> meant to actually be used;
they only demonstrate the minimum parameters to properly encode each category.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-progressive"></a>7.2.3.1. Progressive</h4></div></div></div><p>
Progressive video requires no special filtering to encode. The only
parameter you need to be sure to use is <tt class="option">-ofps 24000/1001</tt>.
Otherwise, <span class="application">MEncoder</span>
will try to encode at 30000/1001 fps and will duplicate frames.
</p><p>
</p><pre class="screen">mencoder dvd://1 -oac copy -ovc lavc -ofps 24000/1001</pre><p>
</p><p>
It is often the case, however, that a video that looks progressive
actually has very short parts of telecine mixed in. Unless you are
sure, it is safest to treat the video as
<a class="link" href="#menc-feat-telecine-encode-mixedpt" title="7.2.3.4. Mixed progressive and telecine">mixed progressive and telecine</a>.
The performance loss is small
<a class="link" href="#menc-feat-telecine-footnotes" title="7.2.4. Footnotes">[3]</a>.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-telecined"></a>7.2.3.2. Telecined</h4></div></div></div><p>
Telecine can be reversed to retrieve the original 24000/1001 content,
using a process called inverse-telecine.
<span class="application">MPlayer</span> contains several filters to
accomplish this; the best filter, <tt class="option">pullup</tt>, is described
in the <a class="link" href="#menc-feat-telecine-encode-mixedpt" title="7.2.3.4. Mixed progressive and telecine">mixed
progressive and telecine</a> section.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-interlaced"></a>7.2.3.3. Interlaced</h4></div></div></div><p>
For most practical cases it is not possible to retrieve a complete
progressive video from interlaced content. The only way to do so
without losing half of the vertical resolution is to double the
framerate and try to "guess" what ought to make up the
corresponding lines for each field (this has drawbacks - see method 3).
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Encode the video in interlaced form. Normally, interlacing wreaks
  havoc with the encoder's ability to compress well, but
  <code class="systemitem">libavcodec</code> has two
  parameters specifically for dealing with storing interlaced video a
  bit better: <tt class="option">ildct</tt> and <tt class="option">ilme</tt>. Also,
  using <tt class="option">mbd=2</tt> is strongly recommended
  <a class="link" href="#menc-feat-telecine-footnotes" title="7.2.4. Footnotes">[2] </a> because it
  will encode macroblocks as non-interlaced in places where there is
  no motion. Note that <tt class="option">-ofps</tt> is NOT needed here.
  </p><pre class="screen">mencoder dvd://1 -oac copy -ovc lavc -lavcopts ildct:ilme:mbd=2</pre><p>
</p></li><li class="listitem"><p>
  Use a deinterlacing filter before encoding. There are several of
  these filters available to choose from, each with its own advantages
  and disadvantages. Consult <tt class="option">mplayer -pphelp</tt> and
  <tt class="option">mplayer -vf help</tt> to see what is available
  (grep for "deint"), read Michael Niedermayer's
  <a class="ulink" href="http://guru.multimedia.cx/deinterlacing-filters/" target="_top">Deinterlacing filters comparison</a>,
  and search the
  <a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">
  MPlayer mailing lists</a> to find many discussions about the
  various filters.
  Again, the framerate is not changing, so no
  <tt class="option">-ofps</tt>. Also, deinterlacing should be done after
  cropping <a class="link" href="#menc-feat-telecine-footnotes" title="7.2.4. Footnotes">[1]</a> and
  before scaling.
  </p><pre class="screen">mencoder dvd://1 -oac copy -vf yadif -ovc lavc</pre><p>
</p></li><li class="listitem"><p>
  Unfortunately, this option is buggy with
  <span class="application">MEncoder</span>; it ought to work well with
  <span class="application">MEncoder G2</span>, but that is not here yet. You
  might experience crashes. Anyway, the purpose of <tt class="option"> -vf
  tfields</tt> is to create a full frame out of each field, which
  makes the framerate 60000/1001. The advantage of this approach is that no
  data is ever lost; however, since each frame comes from only one
  field, the missing lines have to be interpolated somehow. There are
  no very good methods of generating the missing data, and so the
  result will look a bit similar to when using some deinterlacing
  filters. Generating the missing lines creates other issues, as well,
  simply because the amount of data doubles. So, higher encoding
  bitrates are required to maintain quality, and more CPU power is
  used for both encoding and decoding. tfields has several different
  options for how to create the missing lines of each frame. If you
  use this method, then Reference the manual, and chose whichever
  option looks best for your material. Note that when using
  <tt class="option">tfields</tt> you
  <span class="bold"><strong>have to</strong></span> specify both
  <tt class="option">-fps</tt> and <tt class="option">-ofps</tt> to be twice the
  framerate of your original source.
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf tfields=2 -ovc lavc \
    -fps 60000/1001 -ofps 60000/1001</pre><p>
</p></li><li class="listitem"><p>
  If you plan on downscaling dramatically, you can extract and encode
  only one of the two fields. Of course, you will lose half the vertical
  resolution, but if you plan on downscaling to at most 1/2 of the
  original, the loss will not matter much. The result will be a
  progressive 30000/1001 frames per second file. The procedure is to use
  <tt class="option">-vf field</tt>, then crop
  <a class="link" href="#menc-feat-telecine-footnotes" title="7.2.4. Footnotes">[1]</a> and scale
  appropriately. Remember that you will have to adjust the scale to
  compensate for the vertical resolution being halved.
  </p><pre class="screen">mencoder dvd://1 -oac copy -vf field=0 -ovc lavc</pre><p>
</p></li></ol></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-mixedpt"></a>7.2.3.4. Mixed progressive and telecine</h4></div></div></div><p>
In order to turn mixed progressive and telecine video into entirely
progressive video, the telecined parts have to be
inverse-telecined. There are three ways to accomplish this,
described below. Note that you should
<span class="bold"><strong>always</strong></span> inverse-telecine before any
rescaling; unless you really know what you are doing,
inverse-telecine before cropping, too
<a class="link" href="#menc-feat-telecine-footnotes" title="7.2.4. Footnotes">[1]</a>.
<tt class="option">-ofps 24000/1001</tt> is needed here because the output video
will be 24000/1001 frames per second.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <tt class="option">-vf pullup</tt> is designed to inverse-telecine
  telecined material while leaving progressive data alone. In order to
  work properly, <tt class="option">pullup</tt> <span class="bold"><strong>must</strong></span>
  be followed by the <tt class="option">softskip</tt> filter or
  else <span class="application">MEncoder</span> will crash.
  <tt class="option">pullup</tt> is, however, the cleanest and most
  accurate method available for encoding both telecine and
  "mixed progressive and telecine".
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf pullup,softskip
    -ovc lavc -ofps 24000/1001</pre><p>
</p></li><li class="listitem"><p>
  <tt class="option">-vf filmdint</tt> is similar to
  <tt class="option">-vf pullup</tt>: both filters attempt to match a pair of
  fields to form a complete frame. <tt class="option">filmdint</tt> will
  deinterlace individual fields that it cannot match, however, whereas
  <tt class="option">pullup</tt> will simply drop them. Also, the two filters
  have separate detection code, and <tt class="option">filmdint</tt> may tend to match fields a
  bit less often. Which filter works better may depend on the input
  video and personal taste; feel free to experiment with fine-tuning
  the filters' options if you encounter problems with either one (see
  the man page for details). For most well-mastered input video,
  however, both filters work quite well, so either one is a safe choice
  to start with.
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf filmdint -ovc lavc -ofps 24000/1001</pre><p>
</p></li><li class="listitem"><p>
  An older method
  is to, rather than inverse-telecine the telecined parts, telecine
  the non-telecined parts and then inverse-telecine the whole
  video. Sound confusing? softpulldown is a filter that goes through
  a video and makes the entire file telecined. If we follow
  softpulldown with either <tt class="option">detc</tt> or
  <tt class="option">ivtc</tt>, the final result will be entirely
  progressive. <tt class="option">-ofps 24000/1001</tt> is needed.
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf softpulldown,ivtc=1 -ovc lavc -ofps 24000/1001
  </pre><p>
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-mixedpi"></a>7.2.3.5. Mixed progressive and interlaced</h4></div></div></div><p>
There are two options for dealing with this category, each of
which is a compromise. You should decide based on the
duration/location of each type.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Treat it as progressive. The interlaced parts will look interlaced,
  and some of the interlaced fields will have to be dropped, resulting
  in a bit of uneven jumpiness. You can use a postprocessing filter if
  you want to, but it may slightly degrade the progressive parts.
  </p><p>
  This option should definitely not be used if you want to eventually
  display the video on an interlaced device (with a TV card, for
  example). If you have interlaced frames in a 24000/1001 frames per
  second video, they will be telecined along with the progressive
  frames. Half of the interlaced "frames" will be displayed for three
  fields' duration (3/(60000/1001) seconds), resulting in a flicking
  "jump back in time" effect that looks quite bad. If you
  even attempt this, you <span class="bold"><strong>must</strong></span> use a
  deinterlacing filter like <tt class="option">lb</tt> or
  <tt class="option">l5</tt>.
  </p><p>
  It may also be a bad idea for progressive display, too. It will drop
  pairs of consecutive interlaced fields, resulting in a discontinuity
  that can be more visible than with the second method, which shows
  some progressive frames twice. 30000/1001 frames per second interlaced
  video is already a bit choppy because it really should be shown at
  60000/1001 fields per second, so the duplicate frames do not stand out as
  much.
  </p><p>
  Either way, it is best to consider your content and how you intend to
  display it. If your video is 90% progressive and you never intend to
  show it on a TV, you should favor a progressive approach. If it is
  only half progressive, you probably want to encode it as if it is all
  interlaced.
  </p></li><li class="listitem"><p>
  Treat it as interlaced. Some frames of the progressive parts will
  need to be duplicated, resulting in uneven jumpiness. Again,
  deinterlacing filters may slightly degrade the progressive parts.
</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-footnotes"></a>7.2.4. Footnotes</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><b>About cropping: </b>
  Video data on DVDs are stored in a format called YUV 4:2:0. In YUV
  video, luma ("brightness") and chroma ("color")
  are stored separately. Because the human eye is somewhat less
  sensitive to color than it is to brightness, in a YUV 4:2:0 picture
  there is only one chroma pixel for every four luma pixels. In a
  progressive picture, each square of four luma pixels (two on each
  side) has one common chroma pixel. You must crop progressive YUV
  4:2:0 to even resolutions, and use even offsets. For example,
  <tt class="option">crop=716:380:2:26</tt> is OK but
  <tt class="option">crop=716:380:3:26 </tt> is not.
  </p><p>
  When you are dealing with interlaced YUV 4:2:0, the situation is a
  bit more complicated. Instead of every four luma pixels in the
  <span class="emphasis"><em>frame</em></span> sharing a chroma pixel, every four luma
  pixels in each <span class="emphasis"><em> field</em></span> share a chroma
  pixel. When fields are interlaced to form a frame, each scanline is
  one pixel high. Now, instead of all four luma pixels being in a
  square, there are two pixels side-by-side, and the other two pixels
  are side-by-side two scanlines down. The two luma pixels in the
  intermediate scanline are from the other field, and so share a
  different chroma pixel with two luma pixels two scanlines away. All
  this confusion makes it necessary to have vertical crop dimensions
  and offsets be multiples of four. Horizontal can stay even.
  </p><p>
  For telecined video, I recommend that cropping take place after
  inverse telecining. Once the video is progressive you only need to
  crop by even numbers. If you really want to gain the slight speedup
  that cropping first may offer, you must crop vertically by multiples
  of four or else the inverse-telecine filter will not have proper data.
  </p><p>
  For interlaced (not telecined) video, you must always crop
  vertically by multiples of four unless you use <tt class="option">-vf
  field</tt> before cropping.
  </p></li><li class="listitem"><p><b>About encoding parameters and quality: </b>
  Just because I recommend <tt class="option">mbd=2</tt> here does not mean it
  should not be used elsewhere. Along with <tt class="option">trell</tt>,
  <tt class="option">mbd=2</tt> is one of the two
   <code class="systemitem">libavcodec</code> options that
  increases quality the most, and you should always use at least those
  two unless the drop in encoding speed is prohibitive (e.g. realtime
  encoding). There are many other options to
  <code class="systemitem">libavcodec</code> that increase
  encoding quality (and decrease encoding speed) but that is beyond
  the scope of this document.
  </p></li><li class="listitem"><p><b>About the performance of pullup: </b>
  It is safe to use <tt class="option">pullup</tt> (along with <tt class="option">softskip
  </tt>) on progressive video, and is usually a good idea unless
  the source has been definitively verified to be entirely progressive.
  The performance loss is small for most cases. On a bare-minimum encode,
  <tt class="option">pullup</tt> causes <span class="application">MEncoder</span> to
  be 50% slower. Adding sound processing and advanced <tt class="option">lavcopts
  </tt> overshadows that difference, bringing the performance
  decrease of using <tt class="option">pullup</tt> down to 2%.
  </p></li></ol></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-enc-libavcodec"></a>7.3. Encoding with the <code class="systemitem">libavcodec</code>
  codec family</h2></div></div></div><p>
<code class="systemitem">libavcodec</code>
provides simple encoding to a lot of interesting video and audio formats.
You can encode to the following codecs (more or less up to date):
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-libavcodec-video-codecs"></a>7.3.1. <code class="systemitem">libavcodec</code>'s
  video codecs</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Video codec name</th><th>Description</th></tr></thead><tbody><tr><td>mjpeg</td><td>Motion JPEG</td></tr><tr><td>ljpeg</td><td>lossless JPEG</td></tr><tr><td>jpegls</td><td>JPEG LS</td></tr><tr><td>targa</td><td>Targa image</td></tr><tr><td>gif</td><td>GIF image</td></tr><tr><td>bmp</td><td>BMP image</td></tr><tr><td>png</td><td>PNG image</td></tr><tr><td>h261</td><td>H.261</td></tr><tr><td>h263</td><td>H.263 </td></tr><tr><td>h263p</td><td>H.263+</td></tr><tr><td>mpeg4</td><td>ISO standard MPEG-4 (DivX, Xvid compatible)</td></tr><tr><td>msmpeg4</td><td>pre-standard MPEG-4 variant by MS, v3 (AKA DivX3)</td></tr><tr><td>msmpeg4v2</td><td>pre-standard MPEG-4 by MS, v2 (used in old ASF files)</td></tr><tr><td>wmv1</td><td>Windows Media Video, version 1 (AKA WMV7)</td></tr><tr><td>wmv2</td><td>Windows Media Video, version 2 (AKA WMV8)</td></tr><tr><td>rv10</td><td>RealVideo 1.0</td></tr><tr><td>rv20</td><td>RealVideo 2.0</td></tr><tr><td>mpeg1video</td><td>MPEG-1 video</td></tr><tr><td>mpeg2video</td><td>MPEG-2 video</td></tr><tr><td>huffyuv</td><td>lossless compression</td></tr><tr><td>ffvhuff</td><td>FFmpeg modified huffyuv lossless</td></tr><tr><td>asv1</td><td>ASUS Video v1</td></tr><tr><td>asv2</td><td>ASUS Video v2</td></tr><tr><td>ffv1</td><td>FFmpeg's lossless video codec</td></tr><tr><td>svq1</td><td>Sorenson video 1</td></tr><tr><td>flv</td><td>Sorenson H.263 used in Flash Video</td></tr><tr><td>flashsv</td><td>Flash Screen Video</td></tr><tr><td>dvvideo</td><td>Sony Digital Video</td></tr><tr><td>snow</td><td>FFmpeg's experimental wavelet-based codec</td></tr><tr><td>zmbv</td><td>Zip Motion Blocks Video</td></tr><tr><td>dnxhd</td><td>AVID DNxHD</td></tr></tbody></table></div><p>

The first column contains the codec names that should be passed after the
<code class="literal">vcodec</code> config,
like: <tt class="option">-lavcopts vcodec=msmpeg4</tt>
</p><div class="informalexample"><p>
An example with MJPEG compression:
</p><pre class="screen">
mencoder dvd://2 -o <em class="replaceable"><code>title2.avi</code></em> -ovc lavc -lavcopts vcodec=mjpeg -oac copy
</pre><p>
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-libavcodec-audio-codecs"></a>7.3.2. <code class="systemitem">libavcodec</code>'s
  audio codecs</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Audio codec name</th><th>Description</th></tr></thead><tbody><tr><td>ac3</td><td>Dolby Digital (AC-3)</td></tr><tr><td>adpcm_*</td><td>Adaptive PCM formats - see supplementary table</td></tr><tr><td>flac</td><td>Free Lossless Audio Codec (FLAC)</td></tr><tr><td>g726</td><td>G.726 ADPCM</td></tr><tr><td>libfaac</td><td>Advanced Audio Coding (AAC) - using FAAC</td></tr><tr><td>libgsm</td><td>ETSI GSM 06.10 full rate</td></tr><tr><td>libgsm_ms</td><td>Microsoft GSM</td></tr><tr><td>libmp3lame</td><td>MPEG-1 audio layer 3 (MP3) - using LAME</td></tr><tr><td>mp2</td><td>MPEG-1 audio layer 2 (MP2)</td></tr><tr><td>pcm_*</td><td>PCM formats - see supplementary table</td></tr><tr><td>roq_dpcm</td><td>Id Software RoQ DPCM</td></tr><tr><td>sonic</td><td>experimental FFmpeg lossy codec</td></tr><tr><td>sonicls</td><td>experimental FFmpeg lossless codec</td></tr><tr><td>vorbis</td><td>Vorbis</td></tr><tr><td>wmav1</td><td>Windows Media Audio v1</td></tr><tr><td>wmav2</td><td>Windows Media Audio v2</td></tr></tbody></table></div><p>

The first column contains the codec names that should be passed after the
<code class="literal">acodec</code> option, like: <tt class="option">-lavcopts acodec=ac3</tt>
</p><div class="informalexample"><p>
An example with AC-3 compression:
</p><pre class="screen">
mencoder dvd://2 -o <em class="replaceable"><code>title2.avi</code></em> -oac lavc -lavcopts acodec=ac3 -ovc copy
</pre><p>
</p></div><p>
Contrary to <code class="systemitem">libavcodec</code>'s video
codecs, its audio codecs do not make a wise usage of the bits they are
given as they lack some minimal psychoacoustic model (if at all)
which most other codec implementations feature.
However, note that all these audio codecs are very fast and work
out-of-the-box everywhere <span class="application">MEncoder</span> has been
compiled with <code class="systemitem">libavcodec</code> (which
is the case most of time), and do not depend on external libraries.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-enc-libavcodec-audio-codecs-pcmadpcm"></a>7.3.2.1. PCM/ADPCM format supplementary table</h4></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>PCM/ADPCM codec name</th><th>Description</th></tr></thead><tbody><tr><td>pcm_s32le</td><td>signed 32-bit little-endian</td></tr><tr><td>pcm_s32be</td><td>signed 32-bit big-endian</td></tr><tr><td>pcm_u32le</td><td>unsigned 32-bit little-endian</td></tr><tr><td>pcm_u32be</td><td>unsigned 32-bit big-endian</td></tr><tr><td>pcm_s24le</td><td>signed 24-bit little-endian</td></tr><tr><td>pcm_s24be</td><td>signed 24-bit big-endian</td></tr><tr><td>pcm_u24le</td><td>unsigned 24-bit little-endian</td></tr><tr><td>pcm_u24be</td><td>unsigned 24-bit big-endian</td></tr><tr><td>pcm_s16le</td><td>signed 16-bit little-endian</td></tr><tr><td>pcm_s16be</td><td>signed 16-bit big-endian</td></tr><tr><td>pcm_u16le</td><td>unsigned 16-bit little-endian</td></tr><tr><td>pcm_u16be</td><td>unsigned 16-bit big-endian</td></tr><tr><td>pcm_s8</td><td>signed 8-bit</td></tr><tr><td>pcm_u8</td><td>unsigned 8-bit</td></tr><tr><td>pcm_alaw</td><td>G.711 A-LAW </td></tr><tr><td>pcm_mulaw</td><td>G.711 μ-LAW</td></tr><tr><td>pcm_s24daud</td><td>signed 24-bit D-Cinema Audio format</td></tr><tr><td>pcm_zork</td><td>Activision Zork Nemesis</td></tr><tr><td>adpcm_ima_qt</td><td>Apple QuickTime</td></tr><tr><td>adpcm_ima_wav</td><td>Microsoft/IBM WAVE</td></tr><tr><td>adpcm_ima_dk3</td><td>Duck DK3</td></tr><tr><td>adpcm_ima_dk4</td><td>Duck DK4</td></tr><tr><td>adpcm_ima_ws</td><td>Westwood Studios</td></tr><tr><td>adpcm_ima_smjpeg</td><td>SDL Motion JPEG</td></tr><tr><td>adpcm_ms</td><td>Microsoft</td></tr><tr><td>adpcm_4xm</td><td>4X Technologies</td></tr><tr><td>adpcm_xa</td><td>Phillips Yellow Book CD-ROM eXtended Architecture</td></tr><tr><td>adpcm_ea</td><td>Electronic Arts</td></tr><tr><td>adpcm_ct</td><td>Creative 16-&gt;4-bit</td></tr><tr><td>adpcm_swf</td><td>Adobe Shockwave Flash</td></tr><tr><td>adpcm_yamaha</td><td>Yamaha</td></tr><tr><td>adpcm_sbpro_4</td><td>Creative VOC SoundBlaster Pro 8-&gt;4-bit</td></tr><tr><td>adpcm_sbpro_3</td><td>Creative VOC SoundBlaster Pro 8-&gt;2.6-bit</td></tr><tr><td>adpcm_sbpro_2</td><td>Creative VOC SoundBlaster Pro 8-&gt;2-bit</td></tr><tr><td>adpcm_thp</td><td>Nintendo GameCube FMV THP</td></tr><tr><td>adpcm_adx</td><td>Sega/CRI ADX</td></tr></tbody></table></div><p>
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-lavc-encoding-options"></a>7.3.3. Encoding options of libavcodec</h3></div></div></div><p>
Ideally, you would probably want to be able to just tell the encoder to switch
into "high quality" mode and move on.
That would probably be nice, but unfortunately hard to implement as different
encoding options yield different quality results depending on the source
material. That is because compression depends on the visual properties of the
video in question.
For example, Anime and live action have very different properties and
thus require different options to obtain optimum encoding.
The good news is that some options should never be left out, like
<tt class="option">mbd=2</tt>, <tt class="option">trell</tt>, and <tt class="option">v4mv</tt>.
See below for a detailed description of common encoding options.
</p><div class="itemizedlist"><p class="title"><b>Options to adjust:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>vmax_b_frames</strong></span>: 1 or 2 is good, depending on
  the movie.
  Note that if you need to have your encode be decodable by DivX5, you
  need to activate closed GOP support, using
  <code class="systemitem">libavcodec</code>'s <tt class="option">cgop</tt>
  option, but you need to deactivate scene detection, which
  is not a good idea as it will hurt encode efficiency a bit.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vb_strategy=1</strong></span>: helps in high-motion scenes.
  On some videos, vmax_b_frames may hurt quality, but vmax_b_frames=2 along
  with vb_strategy=1 helps.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>dia</strong></span>: motion search range. Bigger is better
  and slower.
  Negative values are a completely different scale.
  Good values are -1 for a fast encode, or 2-4 for slower.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>predia</strong></span>: motion search pre-pass.
  Not as important as dia. Good values are 1 (default) to 4. Requires preme=2
  to really be useful.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cmp, subcmp, precmp</strong></span>: Comparison function for
  motion estimation.
  Experiment with values of 0 (default), 2 (hadamard), 3 (dct), and 6 (rate
  distortion).
  0 is fastest, and sufficient for precmp.
  For cmp and subcmp, 2 is good for Anime, and 3 is good for live action.
  6 may or may not be slightly better, but is slow.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>last_pred</strong></span>: Number of motion predictors to
  take from the previous frame.
  1-3 or so help at little speed cost.
  Higher values are slow for no extra gain.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cbp, mv0</strong></span>: Controls the selection of
  macroblocks. Small speed cost for small quality gain.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qprd</strong></span>: adaptive quantization based on the
  macroblock's complexity.
  May help or hurt depending on the video and other options.
  This can cause artifacts unless you set vqmax to some reasonably small value
  (6 is good, maybe as low as 4); vqmin=1 should also help.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qns</strong></span>: very slow, especially when combined
  with qprd.
  This option will make the encoder minimize noise due to compression
  artifacts instead of making the encoded video strictly match the source.
  Do not use this unless you have already tweaked everything else as far as it
  will go and the results still are not good enough.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vqcomp</strong></span>: Tweak ratecontrol.
  What values are good depends on the movie.
  You can safely leave this alone if you want.
  Reducing vqcomp puts more bits on low-complexity scenes, increasing it puts
  them on high-complexity scenes (default: 0.5, range: 0-1. recommended range:
  0.5-0.7).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vlelim, vcelim</strong></span>: Sets the single coefficient
  elimination threshold for luminance and chroma planes.
  These are encoded separately in all MPEG-like algorithms.
  The idea behind these options is to use some good heuristics to determine
  when the change in a block is less than the threshold you specify, and in
  such a case, to just  encode the block as "no change".
  This saves bits and perhaps speeds up encoding. vlelim=-4 and vcelim=9
  seem to be good for live movies, but seem not to help with Anime;
  when encoding animation, you should probably leave them unchanged.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qpel</strong></span>: Quarter pixel motion estimation.
  MPEG-4 uses half pixel precision for its motion search by default,
  therefore this option comes with an overhead as more information will be
  stored in the encoded file.
  The compression gain/loss depends on the movie, but it is usually not very
  effective on Anime.
  qpel always incurs a significant cost in CPU decode time (+25% in
  practice).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>psnr</strong></span>: does not affect the actual encoding,
  but writes a log file giving the type/size/quality of each frame, and
  prints a summary of PSNR (Peak Signal to Noise Ratio) at the end.
</p></li></ul></div><div class="itemizedlist"><p class="title"><b>Options not recommended to play with:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>vme</strong></span>: The default is best.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lumi_mask, dark_mask</strong></span>: Psychovisual adaptive
  quantization.
  You do not want to play with those options if you care about quality.
  Reasonable values may be effective in your case, but be warned this is very
  subjective.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>scplx_mask</strong></span>: Tries to prevent blocky
  artifacts, but postprocessing is better.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-mpeg4-lavc-example-settings"></a>7.3.4. Encoding setting examples</h3></div></div></div><p>
The following settings are examples of different encoding
option combinations that affect the speed vs quality tradeoff
at the same target bitrate.
</p><p>
All the encoding settings were tested on a 720x448 @30000/1001 fps
video sample, the target bitrate was 900kbps, and the machine was an
AMD-64 3400+ at 2400 MHz in 64 bits mode.
Each encoding setting features the measured encoding speed (in
frames per second) and the PSNR loss (in dB) compared to the "very
high quality" setting.
Please understand that depending on your source, your machine type
and development advancements, you may get very different results.
</p><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Description</th><th>Encoding options</th><th>speed (in fps)</th><th>Relative PSNR loss (in dB)</th></tr></thead><tbody><tr><td>Very high quality</td><td><tt class="option">vcodec=mpeg4:mbd=2:mv0:trell:v4mv:cbp:last_pred=3:predia=2:dia=2:vmax_b_frames=2:vb_strategy=1:precmp=2:cmp=2:subcmp=2:preme=2:qns=2</tt></td><td>6fps</td><td>0dB</td></tr><tr><td>High quality</td><td><tt class="option">vcodec=mpeg4:mbd=2:trell:v4mv:last_pred=2:dia=-1:vmax_b_frames=2:vb_strategy=1:cmp=3:subcmp=3:precmp=0:vqcomp=0.6:turbo</tt></td><td>15fps</td><td>-0.5dB</td></tr><tr><td>Fast</td><td><tt class="option">vcodec=mpeg4:mbd=2:trell:v4mv:turbo</tt></td><td>42fps</td><td>-0.74dB</td></tr><tr><td>Realtime</td><td><tt class="option">vcodec=mpeg4:mbd=2:turbo</tt></td><td>54fps</td><td>-1.21dB</td></tr></tbody></table></div><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="custommatrices"></a>7.3.5. Custom inter/intra matrices</h3></div></div></div><p>
With this feature of
<code class="systemitem">libavcodec</code>
you are able to set custom inter (I-frames/keyframes) and intra
(P-frames/predicted frames) matrices. It is supported by many of the codecs:
<code class="systemitem">mpeg1video</code> and <code class="systemitem">mpeg2video</code>
are reported as working.
</p><p>
A typical usage of this feature is to set the matrices preferred by the
<a class="ulink" href="http://www.kvcd.net/" target="_top">KVCD</a> specifications.
</p><p>
The <span class="bold"><strong>KVCD "Notch" Quantization Matrix:</strong></span>
</p><p>
Intra:
</p><pre class="screen">
 8  9 12 22 26 27 29 34
 9 10 14 26 27 29 34 37
12 14 18 27 29 34 37 38
22 26 27 31 36 37 38 40
26 27 29 36 39 38 40 48
27 29 34 37 38 40 48 58
29 34 37 38 40 48 58 69
34 37 38 40 48 58 69 79
</pre><p>

Inter:
</p><pre class="screen">
16 18 20 22 24 26 28 30
18 20 22 24 26 28 30 32
20 22 24 26 28 30 32 34
22 24 26 30 32 32 34 36
24 26 28 32 34 34 36 38
26 28 30 32 34 36 38 40
28 30 32 34 36 38 42 42
30 32 34 36 38 40 42 44
</pre><p>
</p><p>
Usage:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -o <em class="replaceable"><code>output.avi</code></em> -oac copy -ovc lavc \
    -lavcopts inter_matrix=...:intra_matrix=...
</pre><p>
</p><p>
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -ovc lavc -lavcopts \
vcodec=mpeg2video:intra_matrix=8,9,12,22,26,27,29,34,9,10,14,26,27,29,34,37,\
12,14,18,27,29,34,37,38,22,26,27,31,36,37,38,40,26,27,29,36,39,38,40,48,27,\
29,34,37,38,40,48,58,29,34,37,38,40,48,58,69,34,37,38,40,48,58,69,79\
:inter_matrix=16,18,20,22,24,26,28,30,18,20,22,24,26,28,30,32,20,22,24,26,\
28,30,32,34,22,24,26,30,32,32,34,36,24,26,28,32,34,34,36,38,26,28,30,32,34,\
36,38,40,28,30,32,34,36,38,42,42,30,32,34,36,38,40,42,44 -oac copy -o svcd.mpg
</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-example"></a>7.3.6. Example</h3></div></div></div><p>
So, you have just bought your shiny new copy of Harry Potter and the Chamber
of Secrets (widescreen edition, of course), and you want to rip this DVD
so that you can add it to your Home Theatre PC. This is a region 1 DVD,
so it is NTSC. The example below will still apply to PAL, except you will
omit <tt class="option">-ofps 24000/1001</tt> (because the output framerate is the
same as the input framerate), and of course the crop dimensions will be
different.
</p><p>
After running <tt class="option">mplayer dvd://1</tt>, we follow the process
detailed in the section <a class="link" href="#menc-feat-telecine" title="7.2. How to deal with telecine and interlacing within NTSC DVDs">How to deal
with telecine and interlacing in NTSC DVDs</a> and discover that it is
24000/1001 fps progressive video, which means that we need not use an inverse
telecine filter, such as <tt class="option">pullup</tt> or
<tt class="option">filmdint</tt>.
</p><p><a name="menc-feat-dvd-mpeg4-example-crop"></a>
Next, we want to determine the appropriate crop rectangle, so we use the
cropdetect filter:
</p><pre class="screen">mplayer dvd://1 -vf cropdetect</pre><p>
Make sure you seek to a fully filled frame (such as a bright scene,
past the opening credits and logos), and
you will see in <span class="application">MPlayer</span>'s console output:
</p><pre class="screen">crop area: X: 0..719  Y: 57..419  (-vf crop=720:362:0:58)</pre><p>
We then play the movie back with this filter to test its correctness:
</p><pre class="screen">mplayer dvd://1 -vf crop=720:362:0:58</pre><p>
And we see that it looks perfectly fine. Next, we ensure the width and
height are a multiple of 16. The width is fine, however the height is
not. Since we did not fail 7th grade math, we know that the nearest
multiple of 16 lower than 362 is 352.
</p><p>
We could just use <tt class="option">crop=720:352:0:58</tt>, but it would be nice
to take a little off the top and a little off the bottom so that we
retain the center. We have shrunk the height by 10 pixels, but we do not
want to increase the y-offset by 5-pixels since that is an odd number and
will adversely affect quality. Instead, we will increase the y-offset by
4 pixels:
</p><pre class="screen">mplayer dvd://1 -vf crop=720:352:0:62</pre><p>
Another reason to shave pixels from both the top and the bottom is that we
ensure we have eliminated any half-black pixels if they exist. Note that if
your video is telecined, make sure the <tt class="option">pullup</tt> filter (or
whichever inverse telecine filter you decide to use) appears in the filter
chain before you crop. If it is interlaced, deinterlace before cropping.
(If you choose to preserve the interlaced video, then make sure your
vertical crop offset is a multiple of 4.)
</p><p>
If you are really concerned about losing those 10 pixels, you might
prefer instead to scale the dimensions down to the nearest multiple of 16.
The filter chain would look like:
</p><pre class="screen">-vf crop=720:362:0:58,scale=720:352</pre><p>
Scaling the video down like this will mean that some small amount of
detail is lost, though it probably will not be perceptible. Scaling up will
result in lower quality (unless you increase the bitrate). Cropping
discards those pixels altogether. It is a tradeoff that you will want to
consider for each circumstance. For example, if the DVD video was made
for television, you might want to avoid vertical scaling, since the line
sampling corresponds to the way the content was originally recorded.
</p><p>
On inspection, we see that our movie has a fair bit of action and high
amounts of detail, so we pick 2400Kbit for our bitrate.
</p><p>
We are now ready to do the two pass encode. Pass one:
</p><pre class="screen">
mencoder dvd://1 -ofps 24000/1001 -oac copy -o <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -ovc lavc \
    -lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:autoaspect:vpass=1 \
    -vf pullup,softskip,crop=720:352:0:62,hqdn3d=2:1:2
</pre><p>
And pass two is the same, except that we specify <tt class="option">vpass=2</tt>:
</p><pre class="screen">
mencoder dvd://1 -ofps 24000/1001 -oac copy -o <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -ovc lavc \
    -lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:autoaspect:vpass=2 \
    -vf pullup,softskip,crop=720:352:0:62,hqdn3d=2:1:2
</pre><p>
</p><p>
The options <tt class="option">v4mv:mbd=2:trell</tt> will greatly increase the
quality at the expense of encoding time. There is little reason to leave
these options out when the primary goal is quality. The options
<tt class="option">cmp=3:subcmp=3</tt> select a comparison function that
yields higher quality than the defaults. You might try experimenting with
this parameter (refer to the man page for the possible values) as
different functions can have a large impact on quality depending on the
source material. For example, if you find
<code class="systemitem">libavcodec</code> produces too much
blocky artifacts, you could try selecting the experimental NSSE as
comparison function via <tt class="option">*cmp=10</tt>.
</p><p>
For this movie, the resulting AVI will be 138 minutes long and nearly
3GB. And because you said that file size does not matter, this is a
perfectly acceptable size. However, if you had wanted it smaller, you
could try a lower bitrate. Increasing bitrates have diminishing
returns, so while we might clearly see an improvement from 1800Kbit to
2000Kbit, it might not be so noticeable above 2000Kbit. Feel
free to experiment until you are happy.
</p><p>
Because we passed the source video through a denoise filter, you may want
to add some of it back during playback. This, along with the
<tt class="option">spp</tt> post-processing filter, drastically improves the
perception of quality and helps eliminate blocky artifacts in the video.
With <span class="application">MPlayer</span>'s <tt class="option">autoq</tt> option,
you can vary the amount of post-processing done by the spp filter
depending on available CPU. Also, at this point, you may want to apply
gamma and/or color correction to best suit your display. For example:
</p><pre class="screen">
mplayer <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -vf spp,noise=9ah:5ah,eq2=1.2 -autoq 3
</pre><p>
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-xvid"></a>7.4. Encoding with the <code class="systemitem">Xvid</code>
  codec</h2></div></div></div><p>
<code class="systemitem">Xvid</code> is a free library for
encoding MPEG-4 ASP video streams.
Before starting to encode, you need to <a class="link" href="#xvid" title="2.5.1. Xvid">
set up <span class="application">MEncoder</span> to support it</a>.
</p><p>
This guide mainly aims at featuring the same kind of information
as x264's encoding guide.
Therefore, please begin by reading
<a class="link" href="#menc-feat-x264-encoding-options-intro" title="7.5.1.1. Introduction">the first part</a>
of that guide.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-intro"></a>7.4.1. What options should I use to get the best results?</h3></div></div></div><p>
Please begin by reviewing the
<code class="systemitem">Xvid</code> section of
<span class="application">MPlayer</span>'s man page.
This section is intended to be a supplement to the man page.
</p><p>
The Xvid default settings are already a good tradeoff between
speed and quality, therefore you can safely stick to them if
the following section puzzles you.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-options"></a>7.4.2. Encoding options of <code class="systemitem">Xvid</code></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>vhq</strong></span>
  This setting affects the macroblock decision algorithm, where the
  higher the setting, the wiser the decision.
  The default setting may be safely used for every encode, while
  higher settings always help PSNR but are significantly slower.
  Please note that a better PSNR does not necessarily mean
  that the picture will look better, but tells you that it is
  closer to the original.
  Turning it off will noticeably speed up encoding; if speed is
  critical for you, the tradeoff may be worth it.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bvhq</strong></span>
  This does the same job as vhq, but does it on B-frames.
  It has a negligible impact on speed, and slightly improves quality
  (around +0.1dB PSNR).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>max_bframes</strong></span>
  A higher number of consecutive allowed B-frames usually improves
  compressibility, although it may also lead to more blocking artifacts.
  The default setting is a good tradeoff between compressibility and
  quality, but you may increase it up to 3 if you are bitrate-starved.
  You may also decrease it to 1 or 0 if you are aiming at perfect
  quality, though in that case you should make sure your
  target bitrate is high enough to ensure that the encoder does not
  have to increase quantizers to reach it.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bf_threshold</strong></span>
  This controls the B-frame sensitivity of the encoder, where a higher
  value leads to more B-frames being used (and vice versa).
  This setting is to be used together with <tt class="option">max_bframes</tt>;
  if you are bitrate-starved, you should increase both
  <tt class="option">max_bframes</tt> and <tt class="option">bf_threshold</tt>,
  while you may increase <tt class="option">max_bframes</tt> and reduce
  <tt class="option">bf_threshold</tt> so that the encoder may use more
  B-frames in places that only <span class="bold"><strong>really</strong></span>
  need them.
  A low number of <tt class="option">max_bframes</tt> and a high value of
  <tt class="option">bf_threshold</tt> is probably not a wise choice as it
  will force the encoder to put B-frames in places that would not
  benefit from them, therefore reducing visual quality.
  However, if you need to be compatible with standalone players that
  only support old DivX profiles (which only supports up to 1
  consecutive B-frame), this would be your only way to
  increase compressibility through using B-frames.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>trellis</strong></span>
  Optimizes the quantization process to get an optimal tradeoff
  between PSNR and bitrate, which allows significant bit saving.
  These bits will in return be spent elsewhere on the video,
  raising overall visual quality.
  You should always leave it on as its impact on quality is huge.
  Even if you are looking for speed, do not disable it until you
  have turned down <tt class="option">vhq</tt> and all other more
  CPU-hungry options to the minimum.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>hq_ac</strong></span>
  Activates a better coefficient cost estimation method, which slightly
  reduces file size by around 0.15 to 0.19% (which corresponds to less
  than 0.01dB PSNR increase), while having a negligible impact on speed.
  It is therefore recommended to always leave it on.
</p></li><li class="listitem"><p>
 <span class="bold"><strong>cartoon</strong></span>
  Designed to better encode cartoon content, and has no impact on
  speed as it just tunes the mode decision heuristics for this type
  of content.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>me_quality</strong></span>
  This setting is to control the precision of the motion estimation.
  The higher <tt class="option">me_quality</tt>, the more
  precise the estimation of the original motion will be, and the
  better the resulting clip will capture the original motion.
  </p><p>
  The default setting is best in all cases;
  thus it is not recommended to turn it down unless you are
  really looking for speed, as all the bits saved by a good motion
  estimation would be spent elsewhere, raising overall quality.
  Therefore, do not go any lower than 5, and even that only as a last
  resort.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>chroma_me</strong></span>
  Improves motion estimation by also taking the chroma (color)
  information into account, whereas <tt class="option">me_quality</tt>
  alone only uses luma (grayscale).
  This slows down encoding by 5-10% but improves visual quality
  quite a bit by reducing blocking effects and reduces file size by
  around 1.3%.
  If you are looking for speed, you should disable this option before
  starting to consider reducing <tt class="option">me_quality</tt>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>chroma_opt</strong></span>
  Is intended to increase chroma image quality around pure
  white/black edges, rather than improving compression.
  This can help to reduce the "red stairs" effect.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lumi_mask</strong></span>
  Tries to give less bitrate to part of the picture that the
  human eye cannot see very well, which should allow the encoder
  to spend the saved bits on more important parts of the picture.
  The quality of the encode yielded by this option highly depends
  on personal preferences and on the type and monitor settings
  used to watch it (typically, it will not look as good if it is
  bright or if it is a TFT monitor).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qpel</strong></span>
  Raise the number of candidate motion vectors by increasing
  the precision of the motion estimation from halfpel to
  quarterpel.
  The idea is to find better motion vectors which will in return
  reduce bitrate (hence increasing quality).
  However, motion vectors with quarterpel precision require a
  few extra bits to code, but the candidate vectors do not always
  give (much) better results.
  Quite often, the codec still spends bits on the extra precision,
  but little or no extra quality is gained in return.
  Unfortunately, there is no way to foresee the possible gains of
  <tt class="option">qpel</tt>, so you need to actually encode with and
  without it to know for sure.
  </p><p>
  <tt class="option">qpel</tt> can be almost double encoding time, and
  requires as much as 25% more processing power to decode.
  It is not supported by all standalone players.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>gmc</strong></span>
  Tries to save bits on panning scenes by using a single motion
  vector for the whole frame.
  This almost always raises PSNR, but significantly slows down
  encoding (as well as decoding).
  Therefore, you should only use it when you have turned
  <tt class="option">vhq</tt> to the maximum.
  <code class="systemitem">Xvid</code>'s GMC is more
  sophisticated than DivX's, but is only supported by few
  standalone players.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-profiles"></a>7.4.3. Encoding profiles</h3></div></div></div><p>
Xvid supports encoding profiles through the <tt class="option">profile</tt> option,
which are used to impose restrictions on the properties of the Xvid video
stream such that it will be playable on anything which supports the
chosen profile.
The restrictions relate to resolutions, bitrates and certain MPEG-4
features.
The following table shows what each profile supports.
</p><div class="informaltable"><table border="1"><colgroup><col align="center" class="col1"><col align="center" class="col2"><col align="center" class="col3"><col align="center" class="col4"><col align="center" class="col5"><col align="center" class="col6"><col align="center" class="col7"><col align="center" class="col8"><col align="center" class="col9"><col align="center" class="col10"><col align="center" class="col11"><col align="center" class="col12"><col align="center" class="col13"><col align="center" class="col14"><col align="center" class="col15"><col align="center" class="col16"></colgroup><tbody><tr><td align="center"> </td><td colspan="4" align="center">Simple</td><td colspan="6" align="center">Advanced Simple</td><td colspan="6" align="center">DivX</td></tr><tr><td align="center">Profile name</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">Handheld</td><td align="center">Portable NTSC</td><td align="center">Portable PAL</td><td align="center">Home Theater NTSC</td><td align="center">Home Theater PAL</td><td align="center">HDTV</td></tr><tr><td align="center">Width [pixels]</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">720</td><td align="center">1280</td></tr><tr><td align="center">Height [pixels]</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">576</td><td align="center">576</td><td align="center">144</td><td align="center">240</td><td align="center">288</td><td align="center">480</td><td align="center">576</td><td align="center">720</td></tr><tr><td align="center">Frame rate [fps]</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">25</td><td align="center">30</td><td align="center">25</td><td align="center">30</td></tr><tr><td align="center">Max average bitrate [kbps]</td><td align="center">64</td><td align="center">64</td><td align="center">128</td><td align="center">384</td><td align="center">128</td><td align="center">128</td><td align="center">384</td><td align="center">768</td><td align="center">3000</td><td align="center">8000</td><td align="center">537.6</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">9708.4</td></tr><tr><td align="center">Peak average bitrate over 3 secs [kbps]</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">800</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">16000</td></tr><tr><td align="center">Max. B-frames</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">2</td></tr><tr><td align="center">MPEG quantization</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Adaptive quantization</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Interlaced encoding</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Quarterpixel</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Global motion compensation</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-example-settings"></a>7.4.4. Encoding setting examples</h3></div></div></div><p>
The following settings are examples of different encoding
option combinations that affect the speed vs quality tradeoff
at the same target bitrate.
</p><p>
All the encoding settings were tested on a 720x448 @30000/1001 fps
video sample, the target bitrate was 900kbps, and the machine was an
AMD-64 3400+ at 2400 MHz in 64 bits mode.
Each encoding setting features the measured encoding speed (in
frames per second) and the PSNR loss (in dB) compared to the "very
high quality" setting.
Please understand that depending on your source, your machine type
and development advancements, you may get very different results.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Description</th><th>Encoding options</th><th>speed (in fps)</th><th>Relative PSNR loss (in dB)</th></tr></thead><tbody><tr><td>Very high quality</td><td><tt class="option">chroma_opt:vhq=4:bvhq=1:quant_type=mpeg</tt></td><td>16fps</td><td>0dB</td></tr><tr><td>High quality</td><td><tt class="option">vhq=2:bvhq=1:chroma_opt:quant_type=mpeg</tt></td><td>18fps</td><td>-0.1dB</td></tr><tr><td>Fast</td><td><tt class="option">turbo:vhq=0</tt></td><td>28fps</td><td>-0.69dB</td></tr><tr><td>Realtime</td><td><tt class="option">turbo:nochroma_me:notrellis:max_bframes=0:vhq=0</tt></td><td>38fps</td><td>-1.48dB</td></tr></tbody></table></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-x264"></a>7.5. Encoding with the
  <code class="systemitem">x264</code> codec</h2></div></div></div><p>
<code class="systemitem">x264</code> is a free library for
encoding H.264/AVC video streams.
Before starting to encode, you need to
<a class="link" href="#x264" title="2.5.2. x264">set up <span class="application">MEncoder</span> to support it</a>.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-x264-encoding-options"></a>7.5.1. Encoding options of x264</h3></div></div></div><p>
Please begin by reviewing the
<code class="systemitem">x264</code> section of
<span class="application">MPlayer</span>'s man page.
This section is intended to be a supplement to the man page.
Here you will find quick hints about which options are most
likely to interest most people. The man page is more terse,
but also more exhaustive, and it sometimes offers much better
technical detail.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-intro"></a>7.5.1.1. Introduction</h4></div></div></div><p>
This guide considers two major categories of encoding options:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Options which mainly trade off encoding time vs. quality
</p></li><li class="listitem"><p>
  Options which may be useful for fulfilling various personal
  preferences and special requirements
</p></li></ol></div><p>
Ultimately, only you can decide which options are best for your
purposes. The decision for the first class of options is the simplest:
you only have to decide whether you think the quality differences
justify the speed differences. For the second class of options,
preferences may be far more subjective, and more factors may be
involved. Note that some of the "personal preferences and special
requirements" options can still have large impacts on speed or quality,
but that is not what they are primarily useful for. A couple of the
"personal preference" options may even cause changes that look better
to some people, but look worse to others.
</p><p>
Before continuing, you need to understand that this guide uses only one
quality metric: global PSNR.
For a brief explanation of what PSNR is, see
<a class="ulink" href="http://en.wikipedia.org/wiki/PSNR" target="_top">the Wikipedia article on PSNR</a>.
Global PSNR is the last PSNR number reported when you include
the <tt class="option">psnr</tt> option in <tt class="option">x264encopts</tt>.
Any time you read a claim about PSNR, one of the assumptions
behind the claim is that equal bitrates are used.
</p><p>
Nearly all of this guide's comments assume you are using two pass.
When comparing options, there are two major reasons for using
two pass encoding.
First, using two pass often gains around 1dB PSNR, which is a
very big difference.
Secondly, testing options by doing direct quality comparisons
with one pass encodes introduces a major confounding
factor: bitrate often varies significantly with each encode.
It is not always easy to tell whether quality changes are due
mainly to changed options, or if they mostly reflect essentially
random differences in the achieved bitrate.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-speedvquality"></a>7.5.1.2. Options which primarily affect speed and quality</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>subq</strong></span>:
  Of the options which allow you to trade off speed for quality,
  <tt class="option">subq</tt> and <tt class="option">frameref</tt> (see below) are usually
  by far the most important.
  If you are interested in tweaking either speed or quality, these
  are the first options you should consider.
  On the speed dimension, the <tt class="option">frameref</tt> and
  <tt class="option">subq</tt> options interact with each other fairly
  strongly.
  Experience shows that, with one reference frame,
  <tt class="option">subq=5</tt> (the default setting) takes about 35% more time than
  <tt class="option">subq=1</tt>.
  With 6 reference frames, the penalty grows to over 60%.
  <tt class="option">subq</tt>'s effect on PSNR seems fairly constant
  regardless of the number of reference frames.
  Typically, <tt class="option">subq=5</tt> achieves 0.2-0.5 dB higher global
  PSNR in comparison <tt class="option">subq=1</tt>.
  This is usually enough to be visible.
  </p><p>
  <tt class="option">subq=6</tt> is slower and yields better quality at a reasonable
  cost.
  In comparison to <tt class="option">subq=5</tt>, it usually gains 0.1-0.4 dB
  global PSNR with speed costs varying from 25%-100%.
  Unlike other levels of <tt class="option">subq</tt>, the behavior of
  <tt class="option">subq=6</tt> does not depend much on <tt class="option">frameref</tt>
  and <tt class="option">me</tt>.  Instead, the effectiveness of <tt class="option">subq=6
  </tt> depends mostly upon the number of B-frames used. In normal
  usage, this means <tt class="option">subq=6</tt> has a large impact on both speed
  and quality in complex, high motion scenes, but it may not have much effect
  in low-motion scenes. Note that it is still recommended to always set
  <tt class="option">bframes</tt> to something other than zero (see below).
  </p><p>
  <tt class="option">subq=7</tt> is the slowest, highest quality mode.
  In comparison to <tt class="option">subq=6</tt>, it usually gains 0.01-0.05 dB
  global PSNR with speed costs varying from 15%-33%.
  Since the tradeoff encoding time vs. quality is quite low, you should
  only use it if you are after every bit saving and if encoding time is
  not an issue.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>frameref</strong></span>:
  <tt class="option">frameref</tt> is set to 1 by default, but this
  should not be taken to imply that it is reasonable to set it to 1.
  Merely raising <tt class="option">frameref</tt> to 2 gains around
  0.15dB PSNR with a 5-10% speed penalty; this seems like a good tradeoff.
  <tt class="option">frameref=3</tt> gains around 0.25dB PSNR over
  <tt class="option">frameref=1</tt>, which should be a visible difference.
  <tt class="option">frameref=3</tt> is around 15% slower than
  <tt class="option">frameref=1</tt>.
  Unfortunately, diminishing returns set in rapidly.
  <tt class="option">frameref=6</tt> can be expected to gain only
  0.05-0.1 dB over <tt class="option">frameref=3</tt> at an additional
  15% speed penalty.
  Above <tt class="option">frameref=6</tt>, the quality gains are
  usually very small (although you should keep in mind throughout
  this whole discussion that it can vary quite a lot depending on your source).
  In a fairly typical case, <tt class="option">frameref=12</tt>
  will improve global PSNR by a tiny 0.02dB over
  <tt class="option">frameref=6</tt>, at a speed cost of 15%-20%.
  At such high <tt class="option">frameref</tt> values, the only really
  good thing that can be said is that increasing it even further will
  almost certainly never <span class="bold"><strong>harm</strong></span>
  PSNR, but the additional quality benefits are barely even
  measurable, let alone perceptible.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note:</h3><p>
  Raising <tt class="option">frameref</tt> to unnecessarily high values
  <span class="bold"><strong>can</strong></span> and
  <span class="bold"><strong>usually does</strong></span>
  hurt coding efficiency if you turn CABAC off.
  With CABAC on (the default behavior), the possibility of setting
  <tt class="option">frameref</tt> "too high" currently seems too remote
  to even worry about, and in the future, optimizations may remove
  the possibility altogether.
  </p></div><p>
  If you care about speed, a reasonable compromise is to use low
  <tt class="option">subq</tt> and <tt class="option">frameref</tt> values on
  the first pass, and then raise them on the second pass.
  Typically, this has a negligible negative effect on the final
  quality: You will probably lose well under 0.1dB PSNR, which
  should be much too small of a difference to see.
  However, different values of <tt class="option">frameref</tt> can
  occasionally affect frame type decision.
  Most likely, these are rare outlying cases, but if you want to
  be pretty sure, consider whether your video has either
  fullscreen repetitive flashing patterns or very large temporary
  occlusions which might force an I-frame.
  Adjust the first-pass <tt class="option">frameref</tt> so it is large
  enough to contain the duration of the flashing cycle (or occlusion).
  For example, if the scene flashes back and forth between two images
  over a duration of three frames, set the first pass
  <tt class="option">frameref</tt> to 3 or higher.
  This issue is probably extremely rare in live action video material,
  but it does sometimes come up in video game captures.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>me</strong></span>:
  This option is for choosing the motion estimation search method.
  Altering this option provides a straightforward quality-vs-speed
  tradeoff. <tt class="option">me=dia</tt> is only a few percent faster than
  the default search, at a cost of under 0.1dB global PSNR. The
  default setting (<tt class="option">me=hex</tt>) is a reasonable tradeoff
  between speed and quality. <tt class="option">me=umh</tt> gains a little under
  0.1dB global PSNR, with a speed penalty that varies depending on
  <tt class="option">frameref</tt>.  At high values of
  <tt class="option">frameref</tt> (e.g. 12 or so), <tt class="option">me=umh</tt>
  is about 40% slower than the default <tt class="option"> me=hex</tt>. With
  <tt class="option">frameref=3</tt>, the speed penalty incurred drops to
  25%-30%.
  </p><p>
  <tt class="option">me=esa</tt> uses an exhaustive search that is too slow for
  practical use.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>partitions=all</strong></span>:
  This option enables the use of 8x4, 4x8 and 4x4 subpartitions in
  predicted macroblocks (in addition to the default partitions).
  Enabling it results in a fairly consistent
  10%-15% loss of speed. This option is rather useless in source
  containing only low motion, however in some high-motion source,
  particularly source with lots of small moving objects, gains of
  about 0.1dB can be expected.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bframes</strong></span>:
  If you are used to encoding with other codecs, you may have found
  that B-frames are not always useful.
  In H.264, this has changed: there are new techniques and block
  types that are possible in B-frames.
  Usually, even a naive B-frame choice algorithm can have a
  significant PSNR benefit.
  It is interesting to note that using B-frames usually speeds up
  the second pass somewhat, and may also speed up a single
  pass encode if adaptive B-frame decision is turned off.
  </p><p>
  With adaptive B-frame decision turned off
  (<tt class="option">x264encopts</tt>'s <tt class="option">nob_adapt</tt>),
  the optimal value for this setting is usually no more than
  <tt class="option">bframes=1</tt>, or else high-motion scenes can suffer.
  With adaptive B-frame decision on (the default behavior), it is
  safe to use higher values; the encoder will reduce the use of
  B-frames in scenes where they would hurt compression.
  The encoder rarely chooses to use more than 3 or 4 B-frames;
  setting this option any higher will have little effect.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>b_adapt</strong></span>:
  Note: This is on by default.
  </p><p>
  With this option enabled, the encoder will use a reasonably fast
  decision process to reduce the number of B-frames used in scenes that
  might not benefit from them as much.
  You can use <tt class="option">b_bias</tt> to tweak how B-frame-happy
  the encoder is.
  The speed penalty of adaptive B-frames is currently rather modest,
  but so is the potential quality gain.
  It usually does not hurt, however.
  Note that this only affects speed and frame type decision on the
  first pass.
  <tt class="option">b_adapt</tt> and <tt class="option">b_bias</tt> have no
  effect on subsequent passes.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>b_pyramid</strong></span>:
  You might as well enable this option if you are using &gt;=2 B-frames;
  as the man page says, you get a little quality improvement at no
  speed cost.
  Note that these videos cannot be read by libavcodec-based decoders
  older than about March 5, 2005.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>weight_b</strong></span>:
  In typical cases, there is not much gain with this option.
  However, in crossfades or fade-to-black scenes, weighted
  prediction gives rather large bitrate savings.
  In MPEG-4 ASP, a fade-to-black is usually best coded as a series
  of expensive I-frames; using weighted prediction in B-frames
  makes it possible to turn at least some of these into much smaller
  B-frames.
  Encoding time cost is minimal, as no extra decisions need to be made.
  Also, contrary to what some people seem to guess, the decoder
  CPU requirements are not much affected by weighted prediction,
  all else being equal.
  </p><p>
  Unfortunately, the current adaptive B-frame decision algorithm
  has a strong tendency to avoid B-frames during fades.
  Until this changes, it may be a good idea to add
  <tt class="option">nob_adapt</tt> to your x264encopts, if you expect
  fades to have a large effect in your particular video
  clip.
  </p></li><li class="listitem"><p><a name="menc-feat-x264-encoding-options-speedvquality-threads"></a>
  <span class="bold"><strong>threads</strong></span>:
  This option allows to spawn threads to encode in parallel on multiple CPUs.
  You can manually select the number of threads to be created or, better, set
  <tt class="option">threads=auto</tt> and let
  <code class="systemitem">x264</code> detect how many CPUs are
  available and pick an appropriate number of threads.
  If you have a multi-processor machine, you should really consider using it
  as it can to increase encoding speed linearly with the number of CPU cores
  (about 94% per CPU core), with very little quality reduction (about 0.005dB
  for dual processor, about 0.01dB for a quad processor machine).
  </p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-misc-preferences"></a>7.5.1.3. Options pertaining to miscellaneous preferences</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>Two pass encoding</strong></span>:
  Above, it was suggested to always use two pass encoding, but there
  are still reasons for not using it. For instance, if you are capturing
  live TV and encoding in realtime, you are forced to use single-pass.
  Also, one pass is obviously faster than two passes; if you use the
  exact same set of options on both passes, two pass encoding is almost
  twice as slow.
  </p><p>
  Still, there are very good reasons for using two pass encoding. For
  one thing, single pass ratecontrol is not psychic, and it often makes
  unreasonable choices because it cannot see the big picture. For example,
  suppose you have a two minute long video consisting of two distinct
  halves.  The first half is a very high-motion scene lasting 60 seconds
  which, in isolation, requires about 2500kbps in order to look decent.
  Immediately following it is a much less demanding 60-second scene
  that looks good at 300kbps. Suppose you ask for 1400kbps on the theory
  that this is enough to accommodate both scenes. Single pass ratecontrol
  will make a couple of "mistakes" in such a case. First of all, it
  will target 1400kbps in both segments. The first segment may end up
  heavily overquantized, causing it to look unacceptably and unreasonably
  blocky. The second segment will be heavily underquantized; it may look
  perfect, but the bitrate cost of that perfection will be completely
  unreasonable. What is even harder to avoid is the problem at the
  transition between the two scenes. The first seconds of the low motion
  half will be hugely over-quantized, because the ratecontrol is still
  expecting the kind of bitrate requirements it met in the first half
  of the video. This "error period" of heavily over-quantized low motion
  will look jarringly bad, and will actually use less than the 300kbps
  it would have taken to make it look decent. There are ways to
  mitigate the pitfalls of single-pass encoding, but they may tend to
  increase bitrate misprediction.
  </p><p>
  Multipass ratecontrol can offer huge advantages over a single pass.
  Using the statistics gathered from the first pass encode, the encoder
  can estimate, with reasonable accuracy, the "cost" (in bits) of
  encoding any given frame, at any given quantizer. This allows for
  a much more rational, better planned allocation of bits between the
  expensive (high-motion) and cheap (low-motion) scenes. See
  <tt class="option">qcomp</tt> below for some ideas on how to tweak this
  allocation to your liking.
  </p><p>
  Moreover, two passes need not take twice as long as one pass. You can
  tweak the options in the first pass for higher speed and lower quality.
  If you choose your options well, you can get a very fast first pass.
  The resulting quality in the second pass will be slightly lower because size
  prediction is less accurate, but the quality difference is normally much
  too small to be visible. Try, for example, adding
  <tt class="option">subq=1:frameref=1</tt> to the first pass
  <tt class="option">x264encopts</tt>. Then, on the second pass, use slower,
  higher-quality options:
  <tt class="option">subq=6:frameref=15:partitions=all:me=umh</tt>
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Three pass encoding</strong></span>?
  x264 offers the ability to make an arbitrary number of consecutive
  passes. If you specify <tt class="option">pass=1</tt> on the first pass,
  then use <tt class="option">pass=3</tt> on a subsequent pass, the subsequent
  pass will both read the statistics from the previous pass, and write
  its own statistics. An additional pass following this one will have
  a very good base from which to make highly accurate predictions of
  frame sizes at a chosen quantizer. In practice, the overall quality
  gain from this is usually close to zero, and quite possibly a third
  pass will result in slightly worse global PSNR than the pass before
  it. In typical usage, three passes help if you get either bad bitrate
  prediction or bad looking scene transitions when using only two passes.
  This is somewhat likely to happen on extremely short clips. There are
  also a few special cases in which three (or more) passes are handy
  for advanced users, but for brevity, this guide omits discussing those
  special cases.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qcomp</strong></span>:
  <tt class="option">qcomp</tt> trades off the number of bits allocated
  to "expensive" high-motion versus "cheap" low-motion frames. At
  one extreme, <tt class="option">qcomp=0</tt> aims for true constant
  bitrate. Typically this would make high-motion scenes look completely
  awful, while low-motion scenes would probably look absolutely
  perfect, but would also use many times more bitrate than they
  would need in order to look merely excellent. At the other extreme,
  <tt class="option">qcomp=1</tt> achieves nearly constant quantization parameter
  (QP). Constant QP does not look bad, but most people think it is more
  reasonable to shave some bitrate off of the extremely expensive scenes
  (where the loss of quality is not as noticeable) and reallocate it to
  the scenes that are easier to encode at excellent quality.
  <tt class="option">qcomp</tt> is set to 0.6 by default, which may be slightly
  low for many peoples' taste (0.7-0.8 are also commonly used).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>keyint</strong></span>:
  <tt class="option">keyint</tt> is solely for trading off file seekability against
  coding efficiency. By default, <tt class="option">keyint</tt> is set to 250. In
  25fps material, this guarantees the ability to seek to within 10 seconds
  precision. If you think it would be important and useful to be able to
  seek within 5 seconds of precision, set <tt class="option">keyint=125</tt>;
  this will hurt quality/bitrate slightly. If you care only about quality
  and not about seekability, you can set it to much higher values
  (understanding that there are diminishing returns which may become
  vanishingly low, or even zero). The video stream will still have seekable
  points as long as there are some scene changes.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>deblock</strong></span>:
  This topic is going to be a bit controversial.
  </p><p>
  H.264 defines a simple deblocking procedure on I-blocks that uses
  pre-set strengths and thresholds depending on the QP of the block
  in question.
  By default, high QP blocks are filtered heavily, and low QP blocks
  are not deblocked at all.
  The pre-set strengths defined by the standard are well-chosen and
  the odds are very good that they are PSNR-optimal for whatever
  video you are trying to encode.
  The <tt class="option">deblock</tt> allow you to specify offsets to the preset
  deblocking thresholds.
  </p><p>
  Many people seem to think it is a good idea to lower the deblocking
  filter strength by large amounts (say, -3).
  This is however almost never a good idea, and in most cases,
  people who are doing this do not understand very well how
  deblocking works by default.
  </p><p>
  The first and most important thing to know about the in-loop
  deblocking filter is that the default thresholds are almost always
  PSNR-optimal.
  In the rare cases that they are not optimal, the ideal offset is
  plus or minus 1.
  Adjusting deblocking parameters by a larger amount is almost
  guaranteed to hurt PSNR.
  Strengthening the filter will smear more details; weakening the
  filter will increase the appearance of blockiness.
  </p><p>
  It is definitely a bad idea to lower the deblocking thresholds if
  your source is mainly low in spacial complexity (i.e., not a lot
  of detail or noise).
  The in-loop filter does a rather excellent job of concealing
  the artifacts that occur.
  If the source is high in spacial complexity, however, artifacts
  are less noticeable.
  This is because the ringing tends to look like detail or noise.
  Human visual perception easily notices when detail is removed,
  but it does not so easily notice when the noise is wrongly
  represented.
  When it comes to subjective quality, noise and detail are somewhat
  interchangeable.
  By lowering the deblocking filter strength, you are most likely
  increasing error by adding ringing artifacts, but the eye does
  not notice because it confuses the artifacts with detail.
  </p><p>
  This <span class="bold"><strong>still</strong></span> does not justify
  lowering the deblocking filter strength, however.
  You can generally get better quality noise from postprocessing.
  If your H.264 encodes look too blurry or smeared, try playing with
  <tt class="option">-vf noise</tt> when you play your encoded movie.
  <tt class="option">-vf noise=8a:4a</tt> should conceal most mild
  artifacts.
  It will almost certainly look better than the results you
  would have gotten just by fiddling with the deblocking filter.
  </p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-x264-example-settings"></a>7.5.2. Encoding setting examples</h3></div></div></div><p>
The following settings are examples of different encoding
option combinations that affect the speed vs quality tradeoff
at the same target bitrate.
</p><p>
All the encoding settings were tested on a 720x448 @30000/1001 fps
video sample, the target bitrate was 900kbps, and the machine was an
AMD-64 3400+ at 2400 MHz in 64 bits mode.
Each encoding setting features the measured encoding speed (in
frames per second) and the PSNR loss (in dB) compared to the "very
high quality" setting.
Please understand that depending on your source, your machine type
and development advancements, you may get very different results.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Description</th><th>Encoding options</th><th>speed (in fps)</th><th>Relative PSNR loss (in dB)</th></tr></thead><tbody><tr><td>Very high quality</td><td><tt class="option">subq=6:partitions=all:8x8dct:me=umh:frameref=5:bframes=3:b_pyramid=normal:weight_b</tt></td><td>6fps</td><td>0dB</td></tr><tr><td>High quality</td><td><tt class="option">subq=5:8x8dct:frameref=2:bframes=3:b_pyramid=normal:weight_b</tt></td><td>13fps</td><td>-0.89dB</td></tr><tr><td>Fast</td><td><tt class="option">subq=4:bframes=2:b_pyramid=normal:weight_b</tt></td><td>17fps</td><td>-1.48dB</td></tr></tbody></table></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-video-for-windows"></a>7.6. 
  Encoding with the <code class="systemitem">Video For Windows</code>
  codec family
</h2></div></div></div><p>
Video for Windows provides simple encoding by means of binary video codecs.
You can encode with the following codecs (if you have more, please tell us!)
</p><p>
Note that support for this is very experimental and some codecs may not work
correctly. Some codecs will only work in certain colorspaces, try
<tt class="option">-vf format=bgr24</tt> and <tt class="option">-vf format=yuy2</tt>
if a codec fails or gives wrong output.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-vfw-video-codecs"></a>7.6.1. Video for Windows supported codecs</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Video codec file name</th><th>Description (FourCC)</th><th>md5sum</th><th>Comment</th></tr></thead><tbody><tr><td>aslcodec_vfw.dll</td><td>Alparysoft lossless codec vfw (ASLC)</td><td>608af234a6ea4d90cdc7246af5f3f29a</td><td> </td></tr><tr><td>avimszh.dll</td><td>AVImszh (MSZH)</td><td>253118fe1eedea04a95ed6e5f4c28878</td><td>needs <tt class="option">-vf format</tt></td></tr><tr><td>avizlib.dll</td><td>AVIzlib (ZLIB)</td><td>2f1cc76bbcf6d77d40d0e23392fa8eda</td><td> </td></tr><tr><td>divx.dll</td><td>DivX4Windows-VFW</td><td>acf35b2fc004a89c829531555d73f1e6</td><td> </td></tr><tr><td>huffyuv.dll</td><td>HuffYUV (lossless) (HFYU)</td><td>b74695b50230be4a6ef2c4293a58ac3b</td><td> </td></tr><tr><td>iccvid.dll</td><td>Cinepak Video (cvid)</td><td>cb3b7ee47ba7dbb3d23d34e274895133</td><td> </td></tr><tr><td>icmw_32.dll</td><td>Motion Wavelets (MWV1)</td><td>c9618a8fc73ce219ba918e3e09e227f2</td><td> </td></tr><tr><td>jp2avi.dll</td><td>ImagePower MJPEG2000 (IPJ2)</td><td>d860a11766da0d0ea064672c6833768b</td><td><tt class="option">-vf flip</tt></td></tr><tr><td>m3jp2k32.dll</td><td>Morgan MJPEG2000 (MJ2C)</td><td>f3c174edcbaef7cb947d6357cdfde7ff</td><td> </td></tr><tr><td>m3jpeg32.dll</td><td>Morgan Motion JPEG Codec (MJPEG)</td><td>1cd13fff5960aa2aae43790242c323b1</td><td> </td></tr><tr><td>mpg4c32.dll</td><td>Microsoft MPEG-4 v1/v2</td><td>b5791ea23f33010d37ab8314681f1256</td><td> </td></tr><tr><td>tsccvid.dll</td><td>TechSmith Camtasia Screen Codec (TSCC)</td><td>8230d8560c41d444f249802a2700d1d5</td><td>shareware error on windows</td></tr><tr><td>vp31vfw.dll</td><td>On2 Open Source VP3 Codec (VP31)</td><td>845f3590ea489e2e45e876ab107ee7d2</td><td> </td></tr><tr><td>vp4vfw.dll</td><td>On2 VP4 Personal Codec (VP40)</td><td>fc5480a482ccc594c2898dcc4188b58f</td><td> </td></tr><tr><td>vp6vfw.dll</td><td>On2 VP6 Personal Codec (VP60)</td><td>04d635a364243013898fd09484f913fb</td><td> </td></tr><tr><td>vp7vfw.dll</td><td>On2 VP7 Personal Codec (VP70)</td><td>cb4cc3d4ea7c94a35f1d81c3d750bc8d</td><td><tt class="option">-ffourcc VP70</tt></td></tr><tr><td>ViVD2.dll</td><td>SoftMedia ViVD V2 codec VfW (GXVE)</td><td>a7b4bf5cac630bb9262c3f80d8a773a1</td><td> </td></tr><tr><td>msulvc06.DLL</td><td>MSU Lossless codec (MSUD)</td><td>294bf9288f2f127bb86f00bfcc9ccdda</td><td>
  Decodable by <span class="application">Window Media Player</span>,
  not <span class="application">MPlayer</span> (yet).
  </td></tr><tr><td>camcodec.dll</td><td>CamStudio lossless video codec (CSCD)</td><td>0efe97ce08bb0e40162ab15ef3b45615</td><td>sf.net/projects/camstudio</td></tr></tbody></table></div><p>

The first column contains the codec names that should be passed after the
<code class="literal">codec</code> parameter,
like: <tt class="option">-xvfwopts codec=divx.dll</tt>
The FourCC code used by each codec is given in the parentheses.
</p><div class="informalexample"><p>
An example to convert an ISO DVD trailer to a VP6 flash video file
using compdata bitrate settings:
</p><pre class="screen">
mencoder -dvd-device <em class="replaceable"><code>zeiram.iso</code></em> dvd://7 -o <em class="replaceable"><code>trailer.flv</code></em> \
-ovc vfw -xvfwopts codec=vp6vfw.dll:compdata=onepass.mcf -oac mp3lame \
-lameopts cbr:br=64 -af lavcresample=22050 -vf yadif,scale=320:240,flip \
-of lavf
</pre><p>
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-video-for-windows-bitrate-settings"></a>7.6.2. Using vfw2menc to create a codec settings file.</h3></div></div></div><p>
To encode with the Video for Windows codecs, you will need to set bitrate
and other options. This is known to work on x86 on both *NIX and Windows.
</p><p>
First you must build the <span class="application">vfw2menc</span> program.
It is located in the <tt class="filename">TOOLS</tt> subdirectory
of the MPlayer source tree.
To build on Linux, this can be done using <span class="application">Wine</span>:
</p><pre class="screen">winegcc vfw2menc.c -o vfw2menc -lwinmm -lole32</pre><p>

To build on Windows in <span class="application">MinGW</span> or
<span class="application">Cygwin</span> use:
</p><pre class="screen">gcc vfw2menc.c -o vfw2menc.exe -lwinmm -lole32</pre><p>

To build on <span class="application">MSVC</span> you will need getopt.
Getopt can be found in the original <span class="application">vfw2menc</span>
archive available at:
The <a class="ulink" href="http://oss.netfarm.it/mplayer-win32.php" target="_top">MPlayer on win32</a> project.
</p><div class="informalexample"><p>
Below is an example with the VP6 codec.
</p><pre class="screen">
vfw2menc -f VP62 -d vp6vfw.dll -s firstpass.mcf
</pre><p>
This will open the VP6 codec dialog window.
Repeat this step for the second pass
and use <tt class="option">-s <em class="replaceable"><code>secondpass.mcf</code></em></tt>.
</p></div><p>
Windows users can use
<tt class="option">-xvfwopts codec=vp6vfw.dll:compdata=dialog</tt> to have
the codec dialog display before encoding starts.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-quicktime-7"></a>7.7. Using <span class="application">MEncoder</span> to create
<span class="application">QuickTime</span>-compatible files</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-why-use-it"></a>7.7.1. Why would one want to produce <span class="application">QuickTime</span>-compatible Files?</h3></div></div></div><p>
  There are several reasons why producing
  <span class="application">QuickTime</span>-compatible files can be desirable.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  You want any computer illiterate to be able to watch your encode on
  any major platform (Windows, Mac OS X, Unices …).
</p></li><li class="listitem"><p>
  <span class="application">QuickTime</span> is able to take advantage of more
  hardware and software acceleration features of Mac OS X than
  platform-independent players like <span class="application">MPlayer</span>
  or <span class="application">VLC</span>.
  That means that your encodes have a chance to be played smoothly by older
  G4-powered machines.
</p></li><li class="listitem"><p>
  <span class="application">QuickTime</span> 7 supports the next-generation codec H.264,
  which yields significantly better picture quality than previous codec
  generations (MPEG-2, MPEG-4 …).
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-constraints"></a>7.7.2. <span class="application">QuickTime</span> 7 limitations</h3></div></div></div><p>
  <span class="application">QuickTime</span> 7 supports H.264 video and AAC audio,
  but it does not support them muxed in the AVI container format.
  However, you can use <span class="application">MEncoder</span> to encode
  the video and audio, and then use an external program such as
  <span class="application">mp4creator</span> (part of the
  <a class="ulink" href="http://mpeg4ip.sourceforge.net/" target="_top">MPEG4IP suite</a>)
  to remux the video and audio tracks into an MP4 container.
</p><p>
  <span class="application">QuickTime</span>'s support for H.264 is limited,
  so you will need to drop some advanced features.
  If you encode your video with features that
  <span class="application">QuickTime</span> 7 does not support,
  <span class="application">QuickTime</span>-based players will show you a pretty
  white screen instead of your expected video.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>B-frames</strong></span>:
  <span class="application">QuickTime</span> 7 supports a maximum of 1 B-frame, i.e.
  <tt class="option">-x264encopts bframes=1</tt>. This means that
  <tt class="option">b_pyramid</tt> and <tt class="option">weight_b</tt> will have no
  effect, since they require <tt class="option">bframes</tt> to be greater than 1.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Macroblocks</strong></span>:
  <span class="application">QuickTime</span> 7 does not support 8x8 DCT macroblocks.
  This option (<tt class="option">8x8dct</tt>) is off by default, so just be sure
  not to explicitly enable it. This also means that the <tt class="option">i8x8</tt>
  option will have no effect, since it requires <tt class="option">8x8dct</tt>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Aspect ratio</strong></span>:
  <span class="application">QuickTime</span> 7 does not support SAR (sample
  aspect ratio) information in MPEG-4 files; it assumes that SAR=1. Read
  <a class="link" href="#menc-feat-quicktime-7-scale" title="7.7.4. Scaling">the section on scaling</a>
  for a workaround. <span class="application">QuickTime</span> X no longer has this
  limitation.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-crop"></a>7.7.3. Cropping</h3></div></div></div><p>
  Suppose you want to rip your freshly bought copy of "The Chronicles of
  Narnia". Your DVD is region 1,
  which means it is NTSC. The example below would still apply to PAL,
  except you would omit <tt class="option">-ofps 24000/1001</tt> and use slightly
  different <tt class="option">crop</tt> and <tt class="option">scale</tt> dimensions.
</p><p>
  After running <tt class="option">mplayer dvd://1</tt>, you follow the process
  detailed in the section <a class="link" href="#menc-feat-telecine" title="7.2. How to deal with telecine and interlacing within NTSC DVDs">How to deal
  with telecine and interlacing in NTSC DVDs</a> and discover that it is
  24000/1001 fps progressive video. This simplifies the process somewhat,
  since you do not need to use an inverse telecine filter such as
  <tt class="option">pullup</tt> or a deinterlacing filter such as
  <tt class="option">yadif</tt>.
</p><p>
  Next, you need to crop out the black bars from the top and bottom of the
  video, as detailed in <a class="link" href="#menc-feat-dvd-mpeg4-example-crop">this</a>
  previous section.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-scale"></a>7.7.4. Scaling</h3></div></div></div><p>
  The next step is truly heartbreaking.
  <span class="application">QuickTime</span> 7 does not support MPEG-4 videos
  with a sample aspect ratio other than 1, so you will need to upscale
  (which wastes a lot of disk space) or downscale (which loses some
  details of the source) the video to square pixels.
  Either way you do it, this is highly inefficient, but simply cannot
  be avoided if you want your video to be playable by
  <span class="application">QuickTime</span> 7.
  <span class="application">MEncoder</span> can apply the appropriate upscaling
  or downscaling by specifying respectively <tt class="option">-vf scale=-10:-1</tt>
  or <tt class="option">-vf scale=-1:-10</tt>.
  This will scale your video to the correct width for the cropped height,
  rounded to the closest multiple of 16 for optimal compression.
  Remember that if you are cropping, you should crop first, then scale:

  </p><pre class="screen">-vf crop=720:352:0:62,scale=-10:-1</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-avsync"></a>7.7.5. A/V sync</h3></div></div></div><p>
  Because you will be remuxing into a different container, you should
  always use the <tt class="option">harddup</tt> option to ensure that duplicated
  frames are actually duplicated in the video output. Without this option,
  <span class="application">MEncoder</span> will simply put a marker in the video
  stream that a frame was duplicated, and rely on the client software to
  show the same frame twice. Unfortunately, this "soft duplication" does
  not survive remuxing, so the audio would slowly lose sync with the video.
</p><p>
  The final filter chain looks like this:
  </p><pre class="screen">-vf crop=720:352:0:62,scale=-10:-1,harddup</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-bitrate"></a>7.7.6. Bitrate</h3></div></div></div><p>
  As always, the selection of bitrate is a matter of the technical properties
  of the source, as explained
  <a class="link" href="#menc-feat-dvd-mpeg4-resolution-bitrate" title="7.1.5. Choosing resolution and bitrate">here</a>, as
  well as a matter of taste.
  This movie has a fair bit of action and lots of detail, but H.264 video
  looks good at much lower bitrates than XviD or other MPEG-4 codecs.
  After much experimentation, the author of this guide chose to encode
  this movie at 900kbps, and thought that it looked very good.
  You may decrease bitrate if you need to save more space, or increase
  it if you need to improve quality.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-example"></a>7.7.7. Encoding example</h3></div></div></div><p>
  You are now ready to encode the video. Since you care about
  quality, of course you will be doing a two-pass encode. To shave off
  some encoding time, you can specify the <tt class="option">turbo</tt> option
  on the first pass; this reduces <tt class="option">subq</tt> and
  <tt class="option">frameref</tt> to 1. To save some disk space, you can
  use the <tt class="option">ss</tt> option to strip off the first few seconds
  of the video. (I found that this particular movie has 32 seconds of
  credits and logos.)  <tt class="option">bframes</tt> can be 0 or 1.
  The other options are documented in <a class="link" href="#menc-feat-x264-encoding-options-speedvquality" title="7.5.1.2. Options which primarily affect speed and quality">Encoding with
  the <code class="systemitem">x264</code> codec</a> and
  the man page.

  </p><pre class="screen">mencoder dvd://1 -o /dev/null -ss 32 -ovc x264 \
-x264encopts pass=1:turbo:bitrate=900:bframes=1:\
me=umh:partitions=all:trellis=1:qp_step=4:qcomp=0.7:direct_pred=auto:keyint=300 \
-vf crop=720:352:0:62,scale=-10:-1,harddup \
-oac faac -faacopts br=192:mpeg=4:object=2 -channels 2 -srate 48000 \
-ofps 24000/1001</pre><p>

  If you have a multi-processor machine, don't miss the opportunity to
  dramatically speed-up encoding by enabling
  <a class="link" href="#menc-feat-x264-encoding-options-speedvquality-threads">
  <code class="systemitem">x264</code>'s multi-threading mode</a>
  by adding <tt class="option">threads=auto</tt> to your <tt class="option">x264encopts</tt>
  command-line.
</p><p>
  The second pass is the same, except that you specify the output file
  and set <tt class="option">pass=2</tt>.

  </p><pre class="screen">mencoder dvd://1 <span class="bold"><strong>-o narnia.avi</strong></span> -ss 32 -ovc x264 \
-x264encopts <span class="bold"><strong>pass=2</strong></span>:turbo:bitrate=900:frameref=5:bframes=1:\
me=umh:partitions=all:trellis=1:qp_step=4:qcomp=0.7:direct_pred=auto:keyint=300 \
-vf crop=720:352:0:62,scale=-10:-1,harddup \
-oac faac -faacopts br=192:mpeg=4:object=2 -channels 2 -srate 48000 \
-ofps 24000/1001</pre><p>
</p><p>
  The resulting AVI should play perfectly in
  <span class="application">MPlayer</span>, but of course
  <span class="application">QuickTime</span> can not play it because it does
  not support H.264 muxed in AVI.
  So the next step is to remux the video into an MP4 container.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-remux"></a>7.7.8. Remuxing as MP4</h3></div></div></div><p>
  There are several ways to remux AVI files to MP4. You can use
  <span class="application">mp4creator</span>, which is part of the
  <a class="ulink" href="http://mpeg4ip.sourceforge.net/" target="_top">MPEG4IP suite</a>.
</p><p>
  First, demux the AVI into separate audio and video streams using
  <span class="application">MPlayer</span>.

  </p><pre class="screen">mplayer narnia.avi -dumpaudio -dumpfile narnia.aac
mplayer narnia.avi -dumpvideo -dumpfile narnia.h264</pre><p>

  The file names are important; <span class="application">mp4creator</span>
  requires that AAC audio streams be named <code class="systemitem">.aac</code>
  and H.264 video streams be named <code class="systemitem">.h264</code>.
</p><p>
  Now use <span class="application">mp4creator</span> to create a new
  MP4 file out of the audio and video streams.

  </p><pre class="screen">mp4creator -create=narnia.aac narnia.mp4
mp4creator -create=narnia.h264 -rate=23.976 narnia.mp4</pre><p>

  Unlike the encoding step, you must specify the framerate as a
  decimal (such as 23.976), not a fraction (such as 24000/1001).
</p><p>
  This <code class="systemitem">narnia.mp4</code> file should now be playable
  with any <span class="application">QuickTime</span> 7 application, such as
  <span class="application">QuickTime Player</span> or
  <span class="application">iTunes</span>. If you are planning to view the
  video in a web browser with the <span class="application">QuickTime</span>
  plugin, you should also hint the movie so that the
  <span class="application">QuickTime</span> plugin can start playing it
  while it is still downloading.  <span class="application">mp4creator</span>
  can create these hint tracks:

  </p><pre class="screen">mp4creator -hint=1 narnia.mp4
mp4creator -hint=2 narnia.mp4
mp4creator -optimize narnia.mp4</pre><p>

  You can check the final result to ensure that the hint tracks were
  created successfully:

  </p><pre class="screen">mp4creator -list narnia.mp4</pre><p>

  You should see a list of tracks: 1 audio, 1 video, and 2 hint tracks.

</p><pre class="screen">Track   Type    Info
1       audio   MPEG-4 AAC LC, 8548.714 secs, 190 kbps, 48000 Hz
2       video   H264 Main@5.1, 8549.132 secs, 899 kbps, 848x352 @ 23.976001 fps
3       hint    Payload mpeg4-generic for track 1
4       hint    Payload H264 for track 2
</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-metadata"></a>7.7.9. Adding metadata tags</h3></div></div></div><p>
  If you want to add tags to your video that show up in iTunes, you can use
  <a class="ulink" href="http://atomicparsley.sourceforge.net/" target="_top">AtomicParsley</a>.

  </p><pre class="screen">AtomicParsley narnia.mp4 --metaEnema --title "The Chronicles of Narnia" --year 2005 --stik Movie --freefree --overWrite</pre><p>

  The <tt class="option">--metaEnema</tt> option removes any existing metadata
  (<span class="application">mp4creator</span> inserts its name in the
  "encoding tool" tag), and <tt class="option">--freefree</tt> reclaims the
  space from the deleted metadata.
  The <tt class="option">--stik</tt> option sets the type of video (such as Movie
  or TV Show), which iTunes uses to group related video files.
  The <tt class="option">--overWrite</tt> option overwrites the original file;
  without it, <span class="application">AtomicParsley</span> creates a new
  auto-named file in the same directory and leaves the original file
  untouched.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-vcd-dvd"></a>7.8. Using <span class="application">MEncoder</span>
  to create VCD/SVCD/DVD-compliant files</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-constraints"></a>7.8.1. Format Constraints</h3></div></div></div><p>
<span class="application">MEncoder</span> is capable of creating VCD, SCVD
and DVD format MPEG files using the
<code class="systemitem">libavcodec</code> library.
These files can then be used in conjunction with
<a class="ulink" href="http://www.gnu.org/software/vcdimager/vcdimager.html" target="_top">vcdimager</a>
or
<a class="ulink" href="http://dvdauthor.sourceforge.net/" target="_top">dvdauthor</a>
to create discs that will play on a standard set-top player.
</p><p>
The DVD, SVCD, and VCD formats are subject to heavy constraints.
Only a small selection of encoded picture sizes and aspect ratios are
available.
If your movie does not already meet these requirements, you may have
to scale, crop or add black borders to the picture to make it
compliant.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-resolution"></a>7.8.1.1. Format Constraints</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col><col><col><col><col></colgroup><thead><tr><th>Format</th><th>Resolution</th><th>V. Codec</th><th>V. Bitrate</th><th>Sample Rate</th><th>A. Codec</th><th>A. Bitrate</th><th>FPS</th><th>Aspect</th></tr></thead><tbody><tr><td>NTSC DVD</td><td>720x480, 704x480, 352x480, 352x240</td><td>MPEG-2</td><td>9800 kbps</td><td>48000 Hz</td><td>AC-3,PCM</td><td>1536 kbps (max)</td><td>30000/1001, 24000/1001</td><td>4:3, 16:9 (only for 720x480)</td></tr><tr><td>NTSC DVD</td><td>352x240<a href="#ftn.fn-rare-resolutions" class="footnote" name="fn-rare-resolutions"><sup class="footnote">[a]</sup></a></td><td>MPEG-1</td><td>1856 kbps</td><td>48000 Hz</td><td>AC-3,PCM</td><td>1536 kbps (max)</td><td>30000/1001, 24000/1001</td><td>4:3, 16:9</td></tr><tr><td>NTSC SVCD</td><td>480x480</td><td>MPEG-2</td><td>2600 kbps</td><td>44100 Hz</td><td>MP2</td><td>384 kbps (max)</td><td>30000/1001</td><td>4:3</td></tr><tr><td>NTSC VCD</td><td>352x240</td><td>MPEG-1</td><td>1150 kbps</td><td>44100 Hz</td><td>MP2</td><td>224 kbps</td><td>24000/1001, 30000/1001</td><td>4:3</td></tr><tr><td>PAL DVD</td><td>720x576, 704x576, 352x576, 352x288</td><td>MPEG-2</td><td>9800 kbps</td><td>48000 Hz</td><td>MP2,AC-3,PCM</td><td>1536 kbps (max)</td><td>25</td><td>4:3, 16:9 (only for 720x576)</td></tr><tr><td>PAL DVD</td><td>352x288<a href="#ftn.fn-rare-resolutions" class="footnoteref"><sup class="footnoteref">[a]</sup></a></td><td>MPEG-1</td><td>1856 kbps</td><td>48000 Hz</td><td>MP2,AC-3,PCM</td><td>1536 kbps (max)</td><td>25</td><td>4:3, 16:9</td></tr><tr><td>PAL SVCD</td><td>480x576</td><td>MPEG-2</td><td>2600 kbps</td><td>44100 Hz</td><td>MP2</td><td>384 kbps (max)</td><td>25</td><td>4:3</td></tr><tr><td>PAL VCD</td><td>352x288</td><td>MPEG-1</td><td>1152 kbps</td><td>44100 Hz</td><td>MP2</td><td>224 kbps</td><td>25</td><td>4:3</td></tr></tbody><tbody class="footnotes"><tr><td colspan="9"><div id="ftn.fn-rare-resolutions" class="footnote"><p><a href="#fn-rare-resolutions" class="para"><sup class="para">[a] </sup></a>
  These resolutions are rarely used for DVDs because
  they are fairly low quality.</p></div></td></tr></tbody></table></div><p>
If your movie has 2.35:1 aspect (most recent action movies), you will
have to add black borders or crop the movie down to 16:9 to make a DVD or VCD.
If you add black borders, try to align them at 16-pixel boundaries in
order to minimize the impact on encoding performance.
Thankfully DVD has sufficiently excessive bitrate that you do not have
to worry too much about encoding efficiency, but SVCD and VCD are
highly bitrate-starved and require effort to obtain acceptable quality.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-gop"></a>7.8.1.2. GOP Size Constraints</h4></div></div></div><p>
DVD, VCD, and SVCD also constrain you to relatively low
GOP (Group of Pictures) sizes.
For 30 fps material the largest allowed GOP size is 18.
For 25 or 24 fps, the maximum is 15.
The GOP size is set using the <tt class="option">keyint</tt> option.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-bitrate"></a>7.8.1.3. Bitrate Constraints</h4></div></div></div><p>
VCD video is required to be CBR at 1152 kbps.
This highly limiting constraint also comes along with an extremely low vbv
buffer size of 327 kilobits.
SVCD allows varying video bitrates up to 2500 kbps, and a somewhat less
restrictive vbv buffer size of 917 kilobits is allowed.
DVD video bitrates may range anywhere up to 9800 kbps (though typical
bitrates are about half that), and the vbv buffer size is 1835 kilobits.
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-output"></a>7.8.2. Output Options</h3></div></div></div><p>
<span class="application">MEncoder</span> has options to control the output
format.
Using these options we can instruct it to create the correct type of
file.
</p><p>
The options for VCD and SVCD are called xvcd and xsvcd, because they
are extended formats.
They are not strictly compliant, mainly because the output does not
contain scan offsets.
If you need to generate an SVCD image, you should pass the output file to
<a class="ulink" href="http://www.gnu.org/software/vcdimager/vcdimager.html" target="_top">vcdimager</a>.
</p><p>
VCD:
</p><pre class="screen">-of mpeg -mpegopts format=xvcd</pre><p>
</p><p>
SVCD:
</p><pre class="screen">-of mpeg -mpegopts format=xsvcd</pre><p>
</p><p>
DVD (with timestamps on every frame, if possible):
</p><pre class="screen">-of mpeg -mpegopts format=dvd:tsaf</pre><p>
</p><p>
DVD with NTSC Pullup:
</p><pre class="screen">-of mpeg -mpegopts format=dvd:tsaf:telecine -ofps 24000/1001</pre><p>
This allows 24000/1001 fps progressive content to be encoded at 30000/1001
fps whilst maintaining DVD-compliance.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-output-aspect"></a>7.8.2.1. Aspect Ratio</h4></div></div></div><p>
The aspect argument of <tt class="option">-lavcopts</tt> is used to encode
the aspect ratio of the file.
During playback the aspect ratio is used to restore the video to the
correct size.
</p><p>
16:9 or "Widescreen"
</p><pre class="screen">-lavcopts aspect=16/9</pre><p>
</p><p>
4:3 or "Fullscreen"
</p><pre class="screen">-lavcopts aspect=4/3</pre><p>
</p><p>
2.35:1 or "Cinemascope" NTSC
</p><pre class="screen">-vf scale=720:368,expand=720:480 -lavcopts aspect=16/9</pre><p>
To calculate the correct scaling size, use the expanded NTSC width of
854/2.35 = 368
</p><p>
2.35:1 or "Cinemascope" PAL
</p><pre class="screen">-vf scale=720:432,expand=720:576 -lavcopts aspect=16/9</pre><p>
To calculate the correct scaling size, use the expanded PAL width of
1024/2.35 = 432
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-a-v-sync"></a>7.8.2.2. Maintaining A/V sync</h4></div></div></div><p>
In order to maintain audio/video synchronization throughout the encode,
<span class="application">MEncoder</span> has to drop or duplicate frames.
This works rather well when muxing into an AVI file, but is almost
guaranteed to fail to maintain A/V sync with other muxers such as MPEG.
This is why it is necessary to append the
<tt class="option">harddup</tt> video filter at the end of the filter chain
to avoid this kind of problem.
You can find more technical information about <tt class="option">harddup</tt>
in the section
<a class="link" href="#menc-feat-dvd-mpeg4-muxing-filter-issues" title="7.1.12.1. Improving muxing and A/V sync reliability">Improving muxing and A/V sync reliability</a>
or in the manual page.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-output-srate"></a>7.8.2.3. Sample Rate Conversion</h4></div></div></div><p>
If the audio sample rate in the original file is not the same as
required by the target format, sample rate conversion is required.
This is achieved using the <tt class="option">-srate</tt> option and
the <tt class="option">-af lavcresample</tt> audio filter together.
</p><p>
DVD:
</p><pre class="screen">-srate 48000 -af lavcresample=48000</pre><p>
</p><p>
VCD and SVCD:
</p><pre class="screen">-srate 44100 -af lavcresample=44100</pre><p>
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-lavc"></a>7.8.3. Using libavcodec for VCD/SVCD/DVD Encoding</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-intro"></a>7.8.3.1. Introduction</h4></div></div></div><p>
<code class="systemitem">libavcodec</code> can be used to
create VCD/SVCD/DVD compliant video by using the appropriate options.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-options"></a>7.8.3.2. lavcopts</h4></div></div></div><p>
This is a list of fields in <tt class="option">-lavcopts</tt> that you may
be required to change in order to make a complaint movie for VCD, SVCD,
or DVD:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>acodec</strong></span>:
  <tt class="option">mp2</tt> for VCD, SVCD, or PAL DVD;
  <tt class="option">ac3</tt> is most commonly used for DVD.
  PCM audio may also be used for DVD, but this is mostly a big waste of
  space.
  Note that MP3 audio is not compliant for any of these formats, but
  players often have no problem playing it anyway.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>abitrate</strong></span>:
  224 for VCD; up to 384 for SVCD; up to 1536 for  DVD, but commonly
  used values range from 192 kbps for stereo to 384 kbps for 5.1 channel
  sound.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vcodec</strong></span>:
  <tt class="option">mpeg1video</tt> for VCD;
  <tt class="option">mpeg2video</tt> for SVCD;
  <tt class="option">mpeg2video</tt> is usually used for DVD but you may also use
  <tt class="option">mpeg1video</tt> for CIF resolutions.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>keyint</strong></span>:
  Used to set the GOP size.
  18 for 30fps material, or 15 for 25/24 fps material.
  Commercial producers seem to prefer keyframe intervals of 12.
  It is possible to make this much larger and still retain compatibility
  with most players.
  A <tt class="option">keyint</tt> of 25 should never cause any problems.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_buf_size</strong></span>:
  327 for VCD, 917 for SVCD, and 1835 for DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_minrate</strong></span>:
  1152, for VCD. May be left alone for SVCD and DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_maxrate</strong></span>:
  1152 for VCD; 2500 for SVCD; 9800 for DVD.
  For SVCD and DVD, you might wish to use lower values depending on your
  own personal preferences and requirements.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vbitrate</strong></span>:
  1152 for VCD;
  up to 2500 for SVCD;
  up to 9800 for DVD.
  For the latter two formats, vbitrate should be set based on personal
  preference.
  For instance, if you insist on fitting 20 or so hours on a DVD, you
  could use vbitrate=400.
  The resulting video quality would probably be quite bad.
  If you are trying to squeeze out the maximum possible quality on a DVD,
  use vbitrate=9800, but be warned that this could constrain you to less
  than an hour of video on a single-layer DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vstrict</strong></span>:
  <tt class="option">vstrict</tt>=0 should be used to create DVDs.
  Without this option, <span class="application">MEncoder</span> creates a
  stream that cannot be correctly decoded by some standalone DVD
  players.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-examples"></a>7.8.3.3. Examples</h4></div></div></div><p>
This is a typical minimum set of <tt class="option">-lavcopts</tt> for
encoding video:
</p><p>
VCD:
</p><pre class="screen">
-lavcopts vcodec=mpeg1video:vrc_buf_size=327:vrc_minrate=1152:\
vrc_maxrate=1152:vbitrate=1152:keyint=15:acodec=mp2
</pre><p>
</p><p>
SVCD:
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=917:vrc_maxrate=2500:vbitrate=1800:\
keyint=15:acodec=mp2
</pre><p>
</p><p>
DVD:
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:acodec=ac3
</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-advanced"></a>7.8.3.4. Advanced Options</h4></div></div></div><p>
For higher quality encoding, you may also wish to add quality-enhancing
options to lavcopts, such as <tt class="option">trell</tt>,
<tt class="option">mbd=2</tt>, and others.
Note that <tt class="option">qpel</tt> and <tt class="option">v4mv</tt>, while often
useful with MPEG-4, are not usable with MPEG-1 or MPEG-2.
Also, if you are trying to make a very high quality DVD encode, it may
be useful to add <tt class="option">dc=10</tt> to lavcopts.
Doing so may help reduce the appearance of blocks in flat-colored areas.
Putting it all together, this is an example of a set of lavcopts for a
higher quality DVD:
</p><p>
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=8000:\
keyint=15:trell:mbd=2:precmp=2:subcmp=2:cmp=2:dia=-10:predia=-10:cbp:mv0:\
vqmin=1:lmin=1:dc=10:vstrict=0
</pre><p>
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-audio"></a>7.8.4. Encoding Audio</h3></div></div></div><p>
VCD and SVCD support MPEG-1 layer II audio, using one of
<code class="systemitem">toolame</code>,
<code class="systemitem">twolame</code>,
or <code class="systemitem">libavcodec</code>'s MP2 encoder.
The libavcodec MP2 is far from being as good as the other two libraries,
however it should always be available to use.
VCD only supports constant bitrate audio (CBR) whereas SVCD supports
variable bitrate (VBR), too.
Be careful when using VBR because some bad standalone players might not
support it too well.
</p><p>
For DVD audio, <code class="systemitem">libavcodec</code>'s
AC-3 codec is used.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-toolame"></a>7.8.4.1. toolame</h4></div></div></div><p>
For VCD and SVCD:
</p><pre class="screen">-oac toolame -toolameopts br=224</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-twolame"></a>7.8.4.2. twolame</h4></div></div></div><p>
For VCD and SVCD:
</p><pre class="screen">-oac twolame -twolameopts br=224</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-lavc"></a>7.8.4.3. libavcodec</h4></div></div></div><p>
For DVD with 2 channel sound:
</p><pre class="screen">-oac lavc -lavcopts acodec=ac3:abitrate=192</pre><p>
</p><p>
For DVD with 5.1 channel sound:
</p><pre class="screen">-channels 6 -oac lavc -lavcopts acodec=ac3:abitrate=384</pre><p>
</p><p>
For VCD and SVCD:
</p><pre class="screen">-oac lavc -lavcopts acodec=mp2:abitrate=224</pre><p>
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-all"></a>7.8.5. Putting it all Together</h3></div></div></div><p>
This section shows some complete commands for creating VCD/SVCD/DVD
compliant videos.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-dvd"></a>7.8.5.1. PAL DVD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:576,harddup -srate 48000 -af lavcresample=48000 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:acodec=ac3:abitrate=192:aspect=16/9 -ofps 25 \
  -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-dvd"></a>7.8.5.2. NTSC DVD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:480,harddup -srate 48000 -af lavcresample=48000 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=18:vstrict=0:acodec=ac3:abitrate=192:aspect=16/9 -ofps 30000/1001 \
  -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-ac3-copy"></a>7.8.5.3. PAL AVI Containing AC-3 Audio to DVD</h4></div></div></div><p>
If the source already has AC-3 audio, use -oac copy instead of re-encoding it.
</p><pre class="screen">
mencoder -oac copy -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:576,harddup -ofps 25 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:aspect=16/9 -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-ac3-copy"></a>7.8.5.4. NTSC AVI Containing AC-3 Audio to DVD</h4></div></div></div><p>
If the source already has AC-3 audio, and is NTSC @ 24000/1001 fps:
</p><pre class="screen">
mencoder -oac copy -ovc lavc -of mpeg -mpegopts format=dvd:tsaf:telecine \
  -vf scale=720:480,harddup -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:\
  vrc_maxrate=9800:vbitrate=5000:keyint=15:vstrict=0:aspect=16/9 -ofps 24000/1001 \
  -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-svcd"></a>7.8.5.5. PAL SVCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xsvcd -vf \
    scale=480:576,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg2video:mbd=2:keyint=15:vrc_buf_size=917:vrc_minrate=600:\
vbitrate=2500:vrc_maxrate=2500:acodec=mp2:abitrate=224:aspect=16/9 -ofps 25 \
    -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
  </pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-svcd"></a>7.8.5.6. NTSC SVCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xsvcd  -vf \
    scale=480:480,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg2video:mbd=2:keyint=18:vrc_buf_size=917:vrc_minrate=600:\
vbitrate=2500:vrc_maxrate=2500:acodec=mp2:abitrate=224:aspect=16/9 -ofps 30000/1001 \
    -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-vcd"></a>7.8.5.7. PAL VCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xvcd -vf \
    scale=352:288,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg1video:keyint=15:vrc_buf_size=327:vrc_minrate=1152:\
vbitrate=1152:vrc_maxrate=1152:acodec=mp2:abitrate=224:aspect=16/9 -ofps 25 \
    -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-vcd"></a>7.8.5.8. NTSC VCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xvcd -vf \
    scale=352:240,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg1video:keyint=18:vrc_buf_size=327:vrc_minrate=1152:\
vbitrate=1152:vrc_maxrate=1152:acodec=mp2:abitrate=224:aspect=16/9 -ofps 30000/1001 \
    -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div></div></div><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.fn-menc-feat-dvd-mpeg4-codec-cpu" class="footnote"><p><a href="#fn-menc-feat-dvd-mpeg4-codec-cpu" class="para"><sup class="para">[1] </sup></a>
  Be careful, however: Decoding DVD-resolution MPEG-4 AVC videos
  requires a fast machine (i.e. a Pentium 4 over 1.5GHz or a Pentium M
  over 1GHz).
  </p></div><div id="ftn.fn-menc-feat-dvd-mpeg4-codec-playback" class="footnote"><p><a href="#fn-menc-feat-dvd-mpeg4-codec-playback" class="para"><sup class="para">[2] </sup></a>
  The same encode may not look the same on someone else's monitor or
  when played back by a different decoder, so future-proof your encodes by
  playing them back on different setups.
  </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="faq"></a>Chapter 8. Frequently Asked Questions</h1></div></div></div><div class="qandaset"><a name="idp2768877232"></a><dl><dt>8.1.  <a href="#faq-development">Development</a></dt><dd><dl><dt>Q: <a href="#idp2768878928">
How do I create a proper patch for MPlayer?
</a></dt><dt>Q: <a href="#idp2768924800">
How do I translate MPlayer to a new language?
</a></dt><dt>Q: <a href="#idp2768928688">
How can I support MPlayer development?
</a></dt><dt>Q: <a href="#idp2768932560">
How can I become an MPlayer developer?
</a></dt><dt>Q: <a href="#idp2768937408">
Why don't you use autoconf/automake?
</a></dt></dl></dd><dt>8.2.  <a href="#faq-compilation-installation">Compilation and installation</a></dt><dd><dl><dt>Q: <a href="#idp2768941584">
Compilation fails with an error and gcc bails out
with some cryptic message containing the phrase
internal compiler error or
unable to find a register to spill or
can't find a register in class `GENERAL_REGS'
while reloading `asm'.
</a></dt><dt>Q: <a href="#idp2768948832">
Are there binary (RPM/Debian) packages of MPlayer?
</a></dt><dt>Q: <a href="#idp2768952896">
How can I build a 32 bit MPlayer on a 64 bit Athlon?
</a></dt><dt>Q: <a href="#idp2768956096">
Configure ends with this text, and MPlayer won't compile!
Your gcc does not support even i386 for '-march' and '-mcpu'
</a></dt><dt>Q: <a href="#idp2768959856">
I have a Matrox G200/G400/G450/G550, how do I compile/use the
mga_vid driver?
</a></dt><dt>Q: <a href="#idp2768963024">
During 'make', MPlayer complains about
missing X11 libraries. I don't understand, I do
have X11 installed!?
</a></dt></dl></dd><dt>8.3.  <a href="#faq-general">General questions</a></dt><dd><dl><dt>Q: <a href="#idp2768971888">
Are there any mailing lists on MPlayer?
</a></dt><dt>Q: <a href="#idp2768974912">
I've found a nasty bug when I tried to play my favorite video!
Who should I inform?
</a></dt><dt>Q: <a href="#idp2768977584">
I get a core dump when trying to dump streams, what's wrong?
</a></dt><dt>Q: <a href="#idp2768980496">
When I start playing, I get this message but everything seems fine:
Linux RTC init: ioctl (rtc_pie_on): Permission denied
</a></dt><dt>Q: <a href="#idp2768983888">
How can I make a screenshot?
</a></dt><dt>Q: <a href="#idp2768989680">
What is the meaning of the numbers on the status line?
</a></dt><dt>Q: <a href="#idp2769016112">
There are error messages about file not found
/usr/local/lib/codecs/ ...
</a></dt><dt>Q: <a href="#idp2769019248">
How can I make MPlayer remember the options I
use for a particular file, e.g. movie.avi?
</a></dt><dt>Q: <a href="#idp2769024160">
Subtitles are very nice, the most beautiful I've ever seen, but they
slow down playing! I know it's unlikely ...
</a></dt><dt>Q: <a href="#idp2769028784">
How can I run MPlayer in the background?
</a></dt></dl></dd><dt>8.4.  <a href="#faq-playback">Playback problems</a></dt><dd><dl><dt>Q: <a href="#idp2769034192">
I cannot pinpoint the cause of some strange playback problem.
</a></dt><dt>Q: <a href="#idp2769040800">
How can I get subtitles to appear on the black margins around a movie?
</a></dt><dt>Q: <a href="#idp2769044048">
How can I select audio/subtitle tracks from a DVD, OGM, Matroska or NUT file?
</a></dt><dt>Q: <a href="#idp2769050896">
I'm trying to play a random stream off the internet but it fails.
</a></dt><dt>Q: <a href="#idp2769052976">
I downloaded a movie off a P2P network and it doesn't work!
</a></dt><dt>Q: <a href="#idp2769055520">
I'm having trouble getting my subtitles to display, help!!
</a></dt><dt>Q: <a href="#idp2769059504">
Why doesn't MPlayer work on Fedora Core?
</a></dt><dt>Q: <a href="#idp2769077200">
MPlayer dies with
MPlayer interrupted by signal 4 in module: decode_video
</a></dt><dt>Q: <a href="#idp2769081744">
When I try to grab from my tuner, it works, but colors are strange.
It's OK with other applications.
</a></dt><dt>Q: <a href="#idp2769084528">
I get very strange percentage values (way too big)
while playing files on my notebook.
</a></dt><dt>Q: <a href="#idp2769088112">
The audio/video gets totally out of sync when I run
MPlayer as
root on my notebook.
It works normal when i run it as a user.
</a></dt><dt>Q: <a href="#idp2769092960">
While playing a movie it suddenly gets jerky and I get the following message:
Badly interleaved AVI file detected - switching to -ni mode...
</a></dt></dl></dd><dt>8.5.  <a href="#faq-driver">Video/audio driver problems (vo/ao)</a></dt><dd><dl><dt>Q: <a href="#idp2769097904">
When I go into fullscreen mode I just get black borders around the image
and no real scaling to fullscreen mode.
</a></dt><dt>Q: <a href="#idp2769104080">
I've just installed MPlayer. When I want to
open a video file it causes a fatal error:
Error opening/initializing the selected video_out (-vo) device.
How can I solve my problem?
</a></dt><dt>Q: <a href="#idp2769112032">
I have problems with [your window manager]
and fullscreen xv/xmga/sdl/x11 modes ...
</a></dt><dt>Q: <a href="#idp2769115392">
Audio goes out of sync playing an AVI file.
</a></dt><dt>Q: <a href="#idp2769118832">
How can I use dmix with
MPlayer?
</a></dt><dt>Q: <a href="#idp2769123008">
I have no sound when playing a video and get error messages similar to this one:

AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
[AO OSS] audio_setup: Can't open audio device /dev/dsp: Device or resource busy
Could not open/initialize audio device -&gt; no sound.
Audio: no sound
Starting playback...

</a></dt><dt>Q: <a href="#idp2769128176">
When starting MPlayer under KDE I just get a black
screen and nothing happens. After about one minute the video starts playing.
</a></dt><dt>Q: <a href="#idp2769132752">
I have A/V sync problems.
Some of my AVIs play fine, but some play with double speed!
</a></dt><dt>Q: <a href="#idp2769135392">
When I play this movie I get video-audio desync and/or
MPlayer crashes with the following message:

Too many (945 in 8390980 bytes) video packets in the buffer!

</a></dt><dt>Q: <a href="#idp2769146448">
How can I get rid of A/V desynchronization
while seeking through RealMedia streams?
</a></dt></dl></dd><dt>8.6.  <a href="#faq-dvd">DVD playback</a></dt><dd><dl><dt>Q: <a href="#idp2769150048">
What about DVD navigation/menus?
</a></dt><dt>Q: <a href="#idp2769152384">
What about subtitles? Can MPlayer display them?
</a></dt><dt>Q: <a href="#idp2769155440">
How can I set the region code of my DVD-drive? I don't have Windows!
</a></dt><dt>Q: <a href="#idp2769157808">
I can't play a DVD, MPlayer hangs or outputs "Encrypted VOB file!" errors.
</a></dt><dt>Q: <a href="#idp2769159728">
Do I need to be (setuid) root to be able to play a DVD?
</a></dt><dt>Q: <a href="#idp2769162448">
Is it possible to play/encode only selected chapters?
</a></dt><dt>Q: <a href="#idp2769164496">
My DVD playback is sluggish!
</a></dt><dt>Q: <a href="#idp2769167376">
I copied a DVD using vobcopy. How do I play/encode it from my hard disk?
</a></dt></dl></dd><dt>8.7.  <a href="#faq-features">Feature requests</a></dt><dd><dl><dt>Q: <a href="#idp2769171984">
If MPlayer is paused and I try to seek or press any
key at all, MPlayer ceases to be paused.
I would like to be able to seek in the paused movie.
</a></dt><dt>Q: <a href="#idp2769175392">
I'd like to seek +/- 1 frame instead of 10 seconds.
</a></dt></dl></dd><dt>8.8.  <a href="#faq-encoding">Encoding</a></dt><dd><dl><dt>Q: <a href="#idp2769179696">
How can I encode?
</a></dt><dt>Q: <a href="#idp2769182448">
How can I dump a full DVD title into a file?
</a></dt><dt>Q: <a href="#idp2769186992">
How can I create (S)VCDs automatically?
</a></dt><dt>Q: <a href="#idp2769190432">
How can I create (S)VCDs?
</a></dt><dt>Q: <a href="#idp2769194064">
How can I join two video files?
</a></dt><dt>Q: <a href="#idp2769200912">
How can I fix AVI files with a broken index or bad interleaving?
</a></dt><dt>Q: <a href="#idp2769205424">
How can I fix the aspect ratio of an AVI file?
</a></dt><dt>Q: <a href="#idp2769210000">
How can I backup and encode a VOB file with a broken beginning?
</a></dt><dt>Q: <a href="#idp2769216960">
I can't encode DVD subtitles into the AVI!
</a></dt><dt>Q: <a href="#idp2769219008">
How can I encode only selected chapters from a DVD?
</a></dt><dt>Q: <a href="#idp2769221536">
I'm trying to work with 2GB+ files on a VFAT file system. Does it work?
</a></dt><dt>Q: <a href="#idp2769223232">
What is the meaning of the numbers on the status line
during the encoding process?
</a></dt><dt>Q: <a href="#idp2769240288">
Why is the recommended bitrate printed by MEncoder
negative?
</a></dt><dt>Q: <a href="#idp2769242800">
I can't encode an ASF file to AVI/MPEG-4 (DivX) because it uses 1000 fps.
</a></dt><dt>Q: <a href="#idp2769245056">
How can I put subtitles in the output file?
</a></dt><dt>Q: <a href="#idp2769248320">
How do I encode only sound from a music video?
</a></dt><dt>Q: <a href="#idp2769256384">
Why do third-party players fail to play MPEG-4 movies encoded by
MEncoder versions later than 1.0pre7?
</a></dt><dt>Q: <a href="#idp2769269968">
How can I encode an audio only file?
</a></dt><dt>Q: <a href="#idp2769273312">
How can I play subtitles embedded in AVI?
</a></dt><dt>Q: <a href="#idp2769277424">
MEncoder won't...
</a></dt></dl></dd></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-development"></a>8.1. Development</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Q: <a href="#idp2768878928">
How do I create a proper patch for MPlayer?
</a></dt><dt>Q: <a href="#idp2768924800">
How do I translate MPlayer to a new language?
</a></dt><dt>Q: <a href="#idp2768928688">
How can I support MPlayer development?
</a></dt><dt>Q: <a href="#idp2768932560">
How can I become an MPlayer developer?
</a></dt><dt>Q: <a href="#idp2768937408">
Why don't you use autoconf/automake?
</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768878928"></a><a name="idp2768879184"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How do I create a proper patch for <span class="application">MPlayer</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
We made a <a class="ulink" href="../../tech/patches.txt" target="_top">short document</a>
describing all the necessary details. Please follow the instructions.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768924800"></a><a name="idp2768925056"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How do I translate <span class="application">MPlayer</span> to a new language?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Read the <a class="ulink" href="../../tech/translations.txt" target="_top">translation HOWTO</a>,
it should explain everything. You can get further help on the
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-translations" target="_top">MPlayer-translations</a>
mailing list.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768928688"></a><a name="idp2768928944"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I support <span class="application">MPlayer</span> development?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
We are more than happy to accept your hardware and software
<a class="ulink" href="http://www.mplayerhq.hu/donations.html" target="_top">donations</a>.
They help us in continuously improving <span class="application">MPlayer</span>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768932560"></a><a name="idp2768932816"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I become an <span class="application">MPlayer</span> developer?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
We always welcome coders and documenters. Read the
<a class="ulink" href="../../tech/" target="_top">technical documentation</a>
to get a first grasp. Then you should subscribe to the
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dev-eng" target="_top">MPlayer-dev-eng</a>
mailing list and start coding. If you want to help out with the documentation,
join the
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-docs" target="_top">MPlayer-docs</a>
mailing list.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768937408"></a><a name="idp2768937664"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Why don't you use autoconf/automake?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
We have a modular, handwritten build system. It does a reasonably good
job, so why change? Besides, we dislike the auto* tools, just like
<a class="ulink" href="http://freshmeat.net/articles/view/889/" target="_top">other people</a>.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-compilation-installation"></a>8.2. Compilation and installation</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Q: <a href="#idp2768941584">
Compilation fails with an error and gcc bails out
with some cryptic message containing the phrase
internal compiler error or
unable to find a register to spill or
can't find a register in class `GENERAL_REGS'
while reloading `asm'.
</a></dt><dt>Q: <a href="#idp2768948832">
Are there binary (RPM/Debian) packages of MPlayer?
</a></dt><dt>Q: <a href="#idp2768952896">
How can I build a 32 bit MPlayer on a 64 bit Athlon?
</a></dt><dt>Q: <a href="#idp2768956096">
Configure ends with this text, and MPlayer won't compile!
Your gcc does not support even i386 for '-march' and '-mcpu'
</a></dt><dt>Q: <a href="#idp2768959856">
I have a Matrox G200/G400/G450/G550, how do I compile/use the
mga_vid driver?
</a></dt><dt>Q: <a href="#idp2768963024">
During 'make', MPlayer complains about
missing X11 libraries. I don't understand, I do
have X11 installed!?
</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768941584"></a><a name="idp2768941840"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Compilation fails with an error and <span class="application">gcc</span> bails out
with some cryptic message containing the phrase
<code class="systemitem">internal compiler error</code> or
<code class="systemitem">unable to find a register to spill</code> or
<code class="systemitem">can't find a register in class `GENERAL_REGS'
while reloading `asm'</code>.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
You have stumbled over a bug in <span class="application">gcc</span>. Please
<a class="ulink" href="http://gcc.gnu.org/bugs.html" target="_top">report it to the gcc team</a>
but not to us. For some reason <span class="application">MPlayer</span> seems to
trigger compiler bugs frequently. Nevertheless we cannot fix them and do not
add workarounds for compiler bugs to our sources. To avoid this problem,
either stick with a compiler version that is known to be reliable and
stable, or upgrade frequently.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768948832"></a><a name="idp2768949088"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Are there binary (RPM/Debian) packages of <span class="application">MPlayer</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
See the <a class="link" href="#debian" title="5.1.1. Debian packaging">Debian</a> and <a class="link" href="#rpm" title="5.1.2. RPM packaging">RPM</a>
section for details.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768952896"></a><a name="idp2768953152"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I build a 32 bit <span class="application">MPlayer</span> on a 64 bit Athlon?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Try the following configure options:
</p><pre class="screen">
./configure --target=i386-linux --cc="gcc -m32" --as="as --32" --with-extralibdir=/usr/lib
</pre><p>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768956096"></a><a name="idp2768956352"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Configure ends with this text, and <span class="application">MPlayer</span> won't compile!
</p><pre class="screen">Your gcc does not support even i386 for '-march' and '-mcpu'</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Your gcc isn't installed correctly, check the <tt class="filename">config.log</tt>
file for details.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768959856"></a><a name="idp2768960112"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I have a Matrox G200/G400/G450/G550, how do I compile/use the
<code class="systemitem">mga_vid</code> driver?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Read the <a class="link" href="#mga_vid" title="4.5. Matrox framebuffer (mga_vid)">mga_vid</a> section.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768963024"></a><a name="idp2768963280"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
During 'make', <span class="application">MPlayer</span> complains about
missing X11 libraries. I don't understand, I <span class="emphasis"><em>do</em></span>
have X11 installed!?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
... but you don't have the X11 development package installed. Or not correctly.
It's called <tt class="filename">XFree86-devel*</tt> under Red Hat,
<tt class="filename">xlibs-dev</tt> under Debian Woody and
<tt class="filename">libx11-dev</tt> under Debian Sarge. Also check if the
<tt class="filename">/usr/X11</tt> and
<tt class="filename">/usr/include/X11</tt> symlinks exist.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-general"></a>8.3. General questions</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Q: <a href="#idp2768971888">
Are there any mailing lists on MPlayer?
</a></dt><dt>Q: <a href="#idp2768974912">
I've found a nasty bug when I tried to play my favorite video!
Who should I inform?
</a></dt><dt>Q: <a href="#idp2768977584">
I get a core dump when trying to dump streams, what's wrong?
</a></dt><dt>Q: <a href="#idp2768980496">
When I start playing, I get this message but everything seems fine:
Linux RTC init: ioctl (rtc_pie_on): Permission denied
</a></dt><dt>Q: <a href="#idp2768983888">
How can I make a screenshot?
</a></dt><dt>Q: <a href="#idp2768989680">
What is the meaning of the numbers on the status line?
</a></dt><dt>Q: <a href="#idp2769016112">
There are error messages about file not found
/usr/local/lib/codecs/ ...
</a></dt><dt>Q: <a href="#idp2769019248">
How can I make MPlayer remember the options I
use for a particular file, e.g. movie.avi?
</a></dt><dt>Q: <a href="#idp2769024160">
Subtitles are very nice, the most beautiful I've ever seen, but they
slow down playing! I know it's unlikely ...
</a></dt><dt>Q: <a href="#idp2769028784">
How can I run MPlayer in the background?
</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768971888"></a><a name="idp2768972144"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Are there any mailing lists on <span class="application">MPlayer</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Yes. Look at the
<a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">mailing lists section</a>
of our homepage.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768974912"></a><a name="idp2768975168"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I've found a nasty bug when I tried to play my favorite video!
Who should I inform?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Please read the <a class="link" href="#bugreports" title="Appendix A. How to report bugs">bug reporting guidelines</a>
and follow the instructions.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768977584"></a><a name="idp2768977840"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I get a core dump when trying to dump streams, what's wrong?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Don't panic. Make sure you know where your towel is.</p><p>
Seriously, notice the smiley and start looking for files that end in
<tt class="filename">.dump</tt>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768980496"></a><a name="idp2768980752"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
When I start playing, I get this message but everything seems fine:
</p><pre class="screen">Linux RTC init: ioctl (rtc_pie_on): Permission denied</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
You need a specially set up kernel to use the RTC timing code.
For details see the <a class="link" href="#rtc" title="2.6. RTC">RTC</a> section of the documentation.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768983888"></a><a name="idp2768984144"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I make a screenshot?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
You have to use a video output driver that does not employ an overlay to be
able to take a screenshot. Under X11, <tt class="option">-vo x11</tt> will do, under
Windows <tt class="option">-vo directx:noaccel</tt> works.
</p><p>
Alternatively you can run <span class="application">MPlayer</span> with the
<code class="systemitem">screenshot</code> video filter
(<tt class="option">-vf screenshot</tt>), and press the <span class="keycap"><b>s</b></span>
key to grab a screenshot.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2768989680"></a><a name="idp2768989936"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
What is the meaning of the numbers on the status line?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Example:
</p><pre class="screen">
A: 2.1 V: 2.2 A-V: -0.167 ct: 0.042 57/57 41% 0% 2.6% 0 4 49% 1.00x
</pre><p>
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="systemitem">A: 2.1</code></span></dt><dd><p>audio position in seconds</p></dd><dt><span class="term"><code class="systemitem">V: 2.2</code></span></dt><dd><p>video position in seconds</p></dd><dt><span class="term"><code class="systemitem">A-V: -0.167</code></span></dt><dd><p>audio-video difference in seconds (delay)</p></dd><dt><span class="term"><code class="systemitem">ct: 0.042</code></span></dt><dd><p>total A-V sync correction done</p></dd><dt><span class="term"><code class="systemitem">57/57</code></span></dt><dd><p>
  frames played/decoded (counting from last seek)
  </p></dd><dt><span class="term"><code class="systemitem">41%</code></span></dt><dd><p>
  video codec CPU usage in percent
  (for slice rendering and direct rendering this includes video_out)
  </p></dd><dt><span class="term"><code class="systemitem">0%</code></span></dt><dd><p>video_out CPU usage</p></dd><dt><span class="term"><code class="systemitem">2.6%</code></span></dt><dd><p>audio codec CPU usage in percent</p></dd><dt><span class="term"><code class="systemitem">0</code></span></dt><dd><p>frames dropped to maintain A-V sync</p></dd><dt><span class="term"><code class="systemitem">4</code></span></dt><dd><p>
  current level of image postprocessing (when using <tt class="option">-autoq</tt>)
  </p></dd><dt><span class="term"><code class="systemitem">49%</code></span></dt><dd><p>
  current cache size used (around 50% is normal)
  </p></dd><dt><span class="term"><code class="systemitem">1.00x</code></span></dt><dd><p>playback speed as a factor of original speed</p></dd></dl></div><p>
Most of them are for debug purposes, use the <tt class="option">-quiet</tt>
option to make them disappear.
You might notice that video_out CPU usage is zero (0%) for some files.
This is because it is called directly from the codec and thus cannot
be measured separately. If you wish to know the video_out speed, compare
the difference when playing the file with <tt class="option">-vo null</tt> and
your usual video output driver.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769016112"></a><a name="idp2769016368"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
There are error messages about file not found
<tt class="filename">/usr/local/lib/codecs/</tt> ...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Download and install the binary codecs from our
<a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html" target="_top">download page</a>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769019248"></a><a name="idp2769019504"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I make <span class="application">MPlayer</span> remember the options I
use for a particular file, e.g. <tt class="filename">movie.avi</tt>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Create a file named <tt class="filename">movie.avi.conf</tt> with the file-specific
options in it and put it in <tt class="filename">~/.mplayer</tt>
or in the same directory as the file.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769024160"></a><a name="idp2769024416"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Subtitles are very nice, the most beautiful I've ever seen, but they
slow down playing! I know it's unlikely ...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
After running <tt class="filename">./configure</tt>,
edit <tt class="filename">config.h</tt> and replace
<code class="systemitem">#undef FAST_OSD</code> with
<code class="systemitem">#define FAST_OSD</code>. Then recompile.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769028784"></a><a name="idp2769029040"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I run <span class="application">MPlayer</span> in the background?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Use:
</p><pre class="screen">
mplayer <em class="replaceable"><code>options</code></em> <em class="replaceable"><code>filename</code></em> &lt; /dev/null &amp;
</pre><p>
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-playback"></a>8.4. Playback problems</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Q: <a href="#idp2769034192">
I cannot pinpoint the cause of some strange playback problem.
</a></dt><dt>Q: <a href="#idp2769040800">
How can I get subtitles to appear on the black margins around a movie?
</a></dt><dt>Q: <a href="#idp2769044048">
How can I select audio/subtitle tracks from a DVD, OGM, Matroska or NUT file?
</a></dt><dt>Q: <a href="#idp2769050896">
I'm trying to play a random stream off the internet but it fails.
</a></dt><dt>Q: <a href="#idp2769052976">
I downloaded a movie off a P2P network and it doesn't work!
</a></dt><dt>Q: <a href="#idp2769055520">
I'm having trouble getting my subtitles to display, help!!
</a></dt><dt>Q: <a href="#idp2769059504">
Why doesn't MPlayer work on Fedora Core?
</a></dt><dt>Q: <a href="#idp2769077200">
MPlayer dies with
MPlayer interrupted by signal 4 in module: decode_video
</a></dt><dt>Q: <a href="#idp2769081744">
When I try to grab from my tuner, it works, but colors are strange.
It's OK with other applications.
</a></dt><dt>Q: <a href="#idp2769084528">
I get very strange percentage values (way too big)
while playing files on my notebook.
</a></dt><dt>Q: <a href="#idp2769088112">
The audio/video gets totally out of sync when I run
MPlayer as
root on my notebook.
It works normal when i run it as a user.
</a></dt><dt>Q: <a href="#idp2769092960">
While playing a movie it suddenly gets jerky and I get the following message:
Badly interleaved AVI file detected - switching to -ni mode...
</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769034192"></a><a name="idp2769034448"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I cannot pinpoint the cause of some strange playback problem.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Do you have a stray <tt class="filename">codecs.conf</tt> file in
<tt class="filename">~/.mplayer/</tt>, <tt class="filename">/etc/</tt>,
<tt class="filename">/usr/local/etc/</tt> or a similar location? Remove it,
an outdated <tt class="filename">codecs.conf</tt> file can cause obscure
problems and is intended for use only by developers working on codec
support. It overrides <span class="application">MPlayer</span>'s internal
codec settings, which will wreak havoc if incompatible changes are
made in newer program versions. Unless used by experts it is a recipe
for disaster in the form of seemingly random and very hard to localize
crashes and playback problems. If you still have it somewhere on your
system, you should remove it now.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769040800"></a><a name="idp2769041056"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I get subtitles to appear on the black margins around a movie?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Use the <code class="systemitem">expand</code> video filter to increase the
area onto which the movie is rendered vertically and place the movie
at the top border, for example:
</p><pre class="screen">mplayer -vf expand=0:-100:0:0 -slang de dvd://1</pre><p>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769044048"></a><a name="idp2769044304"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I select audio/subtitle tracks from a DVD, OGM, Matroska or NUT file?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
You have to use <tt class="option">-aid</tt> (audio ID) or <tt class="option">-alang</tt>
(audio language), <tt class="option">-sid</tt>(subtitle ID) or <tt class="option">-slang</tt>
(subtitle language), for example:
</p><pre class="screen">
mplayer -alang eng -slang eng <em class="replaceable"><code>example.mkv</code></em>
mplayer -aid 1 -sid 1 <em class="replaceable"><code>example.mkv</code></em>
</pre><p>
To see which ones are available:
</p><pre class="screen">
mplayer -vo null -ao null -frames 0 -v <em class="replaceable"><code>filename</code></em> | grep sid
mplayer -vo null -ao null -frames 0 -v <em class="replaceable"><code>filename</code></em> | grep aid
</pre><p>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769050896"></a><a name="idp2769051152"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I'm trying to play a random stream off the internet but it fails.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Try playing the stream with the <tt class="option">-playlist</tt> option.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769052976"></a><a name="idp2769053232"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I downloaded a movie off a P2P network and it doesn't work!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Your file is most probably broken or a fake file. If you got it from
a friend, and he says it works, try comparing
<span class="application">md5sum</span> hashes.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769055520"></a><a name="idp2769055776"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I'm having trouble getting my subtitles to display, help!!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Make sure you have installed fonts properly. Run through the steps in the
<a class="link" href="#fonts-osd" title="2.4. Fonts and OSD">Fonts and OSD</a> part of the installation
section again. If you are using TrueType fonts, verify that you have the
<code class="systemitem">FreeType</code> library installed.
Other things include checking your subtitles in a text editor or with other
players. Also try converting them to another format.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769059504"></a><a name="idp2769059760"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Why doesn't <span class="application">MPlayer</span> work on Fedora Core?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
There is a bad interaction on Fedora between exec-shield,
prelink, and any applications which use Windows DLLs
(such as <span class="application">MPlayer</span>).
</p><p>
The problem is that exec-shield randomizes the load addresses of all the
system libraries. This randomization happens at prelink time (once every
two weeks).
</p><p>
When <span class="application">MPlayer</span> tries to load a Windows DLL it
wants to put it at a specific address (0x400000). If an important system
library happens to be there already, <span class="application">MPlayer</span>
will crash.
(A typical symptom would be a segmentation fault when trying
to play Windows Media 9 files.)
</p><p>
If you run into this problem you have two options:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Wait two weeks. It might start working again.
</p></li><li class="listitem"><p>
  Relink all the binaries on the system with different
  prelink options. Here are step by step instructions:
  </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
    Edit <tt class="filename">/etc/syconfig/prelink</tt> and change
    </p><pre class="programlisting">PRELINK_OPTS=-mR</pre><p> to
    </p><pre class="programlisting">PRELINK_OPTS="-mR --no-exec-shield"</pre><p>
  </p></li><li class="step"><p>
    <span class="command"><strong>touch /var/lib/misc/prelink.force</strong></span>
  </p></li><li class="step"><p>
    <span class="command"><strong>/etc/cron.daily/prelink</strong></span>
    (This relinks all the applications, and it takes quite a while.)
  </p></li><li class="step"><p>
    <span class="command"><strong>execstack -s <em class="replaceable"><code>/path/to/</code></em>mplayer</strong></span>
    (This turns off exec-shield for the
    <span class="application">MPlayer</span> binary.)
  </p></li></ol></div></li></ul></div><p>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769077200"></a><a name="idp2769077456"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
<span class="application">MPlayer</span> dies with
</p><pre class="screen">MPlayer interrupted by signal 4 in module: decode_video</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Don't use <span class="application">MPlayer</span> on a CPU different from the one
it was compiled on or recompile with runtime CPU detection
(<span class="command"><strong>./configure --enable-runtime-cpudetection</strong></span>).
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769081744"></a><a name="idp2769082000"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
When I try to grab from my tuner, it works, but colors are strange.
It's OK with other applications.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Your card probably reports some colorspaces as supported when in fact
it does not support them. Try with YUY2 instead of the
default YV12 (see the <a class="link" href="#tv-input" title="3.12. TV input">TV</a> section).
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769084528"></a><a name="idp2769084784"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I get very strange percentage values (way too big)
while playing files on my notebook.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
It's an effect of the power management / power saving system of your notebook
(BIOS, not kernel). Plug the external power connector in
<span class="bold"><strong>before</strong></span> you power on your notebook. You can
also try whether
<a class="ulink" href="http://www.kernel.org/pub/linux/utils/kernel/cpufreq/cpufreq.html" target="_top">cpufreq</a>
(a SpeedStep interface for Linux) helps you.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769088112"></a><a name="idp2769088368"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
The audio/video gets totally out of sync when I run
<span class="application">MPlayer</span> as
<code class="systemitem">root</code> on my notebook.
It works normal when i run it as a user.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
This is again a power management effect (see above). Plug the external power
connector in <span class="bold"><strong>before</strong></span> you power on your notebook
or make sure you do not use the <tt class="option">-rtc</tt> option.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769092960"></a><a name="idp2769093216"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
While playing a movie it suddenly gets jerky and I get the following message:
</p><pre class="screen">Badly interleaved AVI file detected - switching to -ni mode...</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Badly interleaved files and <tt class="option">-cache</tt> don't work well together.
Try <tt class="option">-nocache</tt>.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-driver"></a>8.5. Video/audio driver problems (vo/ao)</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Q: <a href="#idp2769097904">
When I go into fullscreen mode I just get black borders around the image
and no real scaling to fullscreen mode.
</a></dt><dt>Q: <a href="#idp2769104080">
I've just installed MPlayer. When I want to
open a video file it causes a fatal error:
Error opening/initializing the selected video_out (-vo) device.
How can I solve my problem?
</a></dt><dt>Q: <a href="#idp2769112032">
I have problems with [your window manager]
and fullscreen xv/xmga/sdl/x11 modes ...
</a></dt><dt>Q: <a href="#idp2769115392">
Audio goes out of sync playing an AVI file.
</a></dt><dt>Q: <a href="#idp2769118832">
How can I use dmix with
MPlayer?
</a></dt><dt>Q: <a href="#idp2769123008">
I have no sound when playing a video and get error messages similar to this one:

AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
[AO OSS] audio_setup: Can't open audio device /dev/dsp: Device or resource busy
Could not open/initialize audio device -&gt; no sound.
Audio: no sound
Starting playback...

</a></dt><dt>Q: <a href="#idp2769128176">
When starting MPlayer under KDE I just get a black
screen and nothing happens. After about one minute the video starts playing.
</a></dt><dt>Q: <a href="#idp2769132752">
I have A/V sync problems.
Some of my AVIs play fine, but some play with double speed!
</a></dt><dt>Q: <a href="#idp2769135392">
When I play this movie I get video-audio desync and/or
MPlayer crashes with the following message:

Too many (945 in 8390980 bytes) video packets in the buffer!

</a></dt><dt>Q: <a href="#idp2769146448">
How can I get rid of A/V desynchronization
while seeking through RealMedia streams?
</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769097904"></a><a name="idp2769098160"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
When I go into fullscreen mode I just get black borders around the image
and no real scaling to fullscreen mode.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Your video output driver does not support scaling in hardware and since
scaling in software can be incredibly slow <span class="application">MPlayer</span>
does not automatically enable it. Most likely you are using the
<code class="systemitem">x11</code> instead of the <code class="systemitem">xv</code>
video output driver. Try adding <tt class="option">-vo xv</tt> to the command
line or read the <a class="link" href="#video" title="Chapter 4. Video output devices">video section</a> to find out
about alternative video output drivers. The <tt class="option">-zoom</tt>
option explicitly enables software scaling.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769104080"></a><a name="idp2769104336"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I've just installed <span class="application">MPlayer</span>. When I want to
open a video file it causes a fatal error:
</p><pre class="screen">Error opening/initializing the selected video_out (-vo) device.</pre><p>
How can I solve my problem?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Just change your video output device. Issue the following command to get
a list of available video output drivers:
</p><pre class="screen">mplayer -vo help</pre><p>
After you've chosen the correct video output driver, add it to
your configuration file. Add
</p><pre class="programlisting">
vo = <em class="replaceable"><code>selected_vo</code></em>
</pre><p>
to <tt class="filename">~/.mplayer/config</tt> and/or
</p><pre class="programlisting">
vo_driver = <em class="replaceable"><code>selected_vo</code></em>
</pre><p>
to <tt class="filename">~/.mplayer/gui.conf</tt>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769112032"></a><a name="idp2769112288"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I have problems with <em class="replaceable"><code>[your window manager]</code></em>
and fullscreen xv/xmga/sdl/x11 modes ...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Read the <a class="link" href="#bugreports" title="Appendix A. How to report bugs">bug reporting guidelines</a> and send us
a proper bug report.
Also try experimenting with the <tt class="option">-fstype</tt> option.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769115392"></a><a name="idp2769115648"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Audio goes out of sync playing an AVI file.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Try the <tt class="option">-bps</tt> or <tt class="option">-nobps</tt> option. If it does not
improve, read the
<a class="link" href="#bugreports" title="Appendix A. How to report bugs">bug reporting guidelines</a>
and upload the file to FTP.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769118832"></a><a name="idp2769119088"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I use <span class="application">dmix</span> with
<span class="application">MPlayer</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
After setting up your
<a class="ulink" href="http://alsa.opensrc.org/index.php?page=DmixPlugin" target="_top">asoundrc</a>
you have to use <tt class="option">-ao alsa:device=dmix</tt>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769123008"></a><a name="idp2769123264"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I have no sound when playing a video and get error messages similar to this one:
</p><pre class="screen">
AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
[AO OSS] audio_setup: Can't open audio device /dev/dsp: Device or resource busy
Could not open/initialize audio device -&gt; no sound.
Audio: no sound
Starting playback...
</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Are you running KDE or GNOME with the aRts or ESD sound daemon? Try disabling
the sound daemon or use the <tt class="option">-ao arts</tt> or
<tt class="option">-ao esd</tt> option to make <span class="application">MPlayer</span> use
aRts or ESD.
You might also be running ALSA without OSS emulation, try loading the ALSA OSS
kernel modules or add <tt class="option">-ao alsa</tt> to your command line to
directly use the ALSA audio output driver.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769128176"></a><a name="idp2769128432"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
When starting <span class="application">MPlayer</span> under KDE I just get a black
screen and nothing happens. After about one minute the video starts playing.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
The KDE aRts sound daemon is blocking the sound device. Either wait until the
video starts or disable the aRts daemon in control center. If you want to use
aRts sound, specify audio output via our native aRts audio driver
(<tt class="option">-ao arts</tt>). If it fails or isn't compiled in, try SDL
(<tt class="option">-ao sdl</tt>) and make sure your SDL can handle aRts sound. Yet
another option is to start <span class="application">MPlayer</span> with artsdsp.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769132752"></a><a name="idp2769133008"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I have A/V sync problems.
Some of my AVIs play fine, but some play with double speed!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
You have a buggy sound card/driver. Most likely it's fixed at 44100Hz, and you
try to play a file which has 22050Hz audio. Try the
<code class="systemitem">resample</code> audio filter.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769135392"></a><a name="idp2769135648"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
When I play this movie I get video-audio desync and/or
<span class="application">MPlayer</span> crashes with the following message:
</p><pre class="screen">
Too many (945 in 8390980 bytes) video packets in the buffer!
</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
This can have multiple reasons.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Your CPU <span class="emphasis"><em>and/or</em></span> video card <span class="emphasis"><em>and/or</em></span>
  bus is too slow. <span class="application">MPlayer</span> displays a message if
  this is the case (and the dropped frames counter goes up fast).
</p></li><li class="listitem"><p>
  If it is an AVI, maybe it has bad interleaving, try the
  <tt class="option">-ni</tt> option to work around this.
  Or it may have a bad header, in this case <tt class="option">-nobps</tt>
  and/or <tt class="option">-mc 0</tt> can help.
</p></li><li class="listitem"><p>
  Many FLV files will only play correctly with <tt class="option">-correct-pts</tt>.
  Unfortunately <span class="application">MEncoder</span> does not have this option,
  but you can try setting <tt class="option">-fps</tt> to the correct value manually
  if you know it.
</p></li><li class="listitem"><p>
  Your sound driver is buggy.
</p></li></ul></div><p>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769146448"></a><a name="idp2769146704"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I get rid of A/V desynchronization
while seeking through RealMedia streams?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
<tt class="option">-mc 0.1</tt> can help.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-dvd"></a>8.6. DVD playback</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Q: <a href="#idp2769150048">
What about DVD navigation/menus?
</a></dt><dt>Q: <a href="#idp2769152384">
What about subtitles? Can MPlayer display them?
</a></dt><dt>Q: <a href="#idp2769155440">
How can I set the region code of my DVD-drive? I don't have Windows!
</a></dt><dt>Q: <a href="#idp2769157808">
I can't play a DVD, MPlayer hangs or outputs "Encrypted VOB file!" errors.
</a></dt><dt>Q: <a href="#idp2769159728">
Do I need to be (setuid) root to be able to play a DVD?
</a></dt><dt>Q: <a href="#idp2769162448">
Is it possible to play/encode only selected chapters?
</a></dt><dt>Q: <a href="#idp2769164496">
My DVD playback is sluggish!
</a></dt><dt>Q: <a href="#idp2769167376">
I copied a DVD using vobcopy. How do I play/encode it from my hard disk?
</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769150048"></a><a name="idp2769150304"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
What about DVD navigation/menus?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
<span class="application">MPlayer</span> should support DVD menus nowadays.
Your mileage may vary.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769152384"></a><a name="idp2769152640"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
What about subtitles? Can <span class="application">MPlayer</span> display them?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Yes. See the <a class="link" href="#dvd" title="3.5. DVD playback">DVD chapter</a>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769155440"></a><a name="idp2769155696"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I set the region code of my DVD-drive? I don't have Windows!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Use the
<a class="ulink" href="http://linvdr.org/projects/regionset/" target="_top">regionset tool</a>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769157808"></a><a name="idp2769158064"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I can't play a DVD, MPlayer hangs or outputs "Encrypted VOB file!" errors.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
CSS decryption code does not work with some DVD drives unless you set
the region code appropriately. See the answer to the previous question.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769159728"></a><a name="idp2769159984"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Do I need to be (setuid) root to be able to play a DVD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
No. However you must have the proper rights
on the DVD device entry (in <tt class="filename">/dev/</tt>).
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769162448"></a><a name="idp2769162704"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Is it possible to play/encode only selected chapters?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Yes, try the <tt class="option">-chapter</tt> option.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769164496"></a><a name="idp2769164752"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
My DVD playback is sluggish!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Use the <tt class="option">-cache</tt> option (described in the man page) and try
enabling DMA for the DVD drive with the <span class="command"><strong>hdparm</strong></span> tool.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769167376"></a><a name="idp2769167632"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I copied a DVD using vobcopy. How do I play/encode it from my hard disk?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Use the <tt class="option">-dvd-device</tt> option to refer to the directory
that contains the files:
</p><pre class="screen">
mplayer dvd://1 -dvd-device <em class="replaceable"><code>/path/to/directory</code></em>
</pre><p>
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-features"></a>8.7. Feature requests</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Q: <a href="#idp2769171984">
If MPlayer is paused and I try to seek or press any
key at all, MPlayer ceases to be paused.
I would like to be able to seek in the paused movie.
</a></dt><dt>Q: <a href="#idp2769175392">
I'd like to seek +/- 1 frame instead of 10 seconds.
</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769171984"></a><a name="idp2769172240"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
If <span class="application">MPlayer</span> is paused and I try to seek or press any
key at all, <span class="application">MPlayer</span> ceases to be paused.
I would like to be able to seek in the paused movie.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
This is very tricky to implement without losing A/V synchronization.
All attempts have failed so far, but patches are welcome.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769175392"></a><a name="idp2769175648"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I'd like to seek +/- 1 frame instead of 10 seconds.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
You can step forward one frame by pressing <span class="keycap"><b>.</b></span>.
If the movie was not paused it will be paused afterwards
(see the man page for details).
Stepping backwards is unlikely to be implemented anytime soon.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-encoding"></a>8.8. Encoding</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Q: <a href="#idp2769179696">
How can I encode?
</a></dt><dt>Q: <a href="#idp2769182448">
How can I dump a full DVD title into a file?
</a></dt><dt>Q: <a href="#idp2769186992">
How can I create (S)VCDs automatically?
</a></dt><dt>Q: <a href="#idp2769190432">
How can I create (S)VCDs?
</a></dt><dt>Q: <a href="#idp2769194064">
How can I join two video files?
</a></dt><dt>Q: <a href="#idp2769200912">
How can I fix AVI files with a broken index or bad interleaving?
</a></dt><dt>Q: <a href="#idp2769205424">
How can I fix the aspect ratio of an AVI file?
</a></dt><dt>Q: <a href="#idp2769210000">
How can I backup and encode a VOB file with a broken beginning?
</a></dt><dt>Q: <a href="#idp2769216960">
I can't encode DVD subtitles into the AVI!
</a></dt><dt>Q: <a href="#idp2769219008">
How can I encode only selected chapters from a DVD?
</a></dt><dt>Q: <a href="#idp2769221536">
I'm trying to work with 2GB+ files on a VFAT file system. Does it work?
</a></dt><dt>Q: <a href="#idp2769223232">
What is the meaning of the numbers on the status line
during the encoding process?
</a></dt><dt>Q: <a href="#idp2769240288">
Why is the recommended bitrate printed by MEncoder
negative?
</a></dt><dt>Q: <a href="#idp2769242800">
I can't encode an ASF file to AVI/MPEG-4 (DivX) because it uses 1000 fps.
</a></dt><dt>Q: <a href="#idp2769245056">
How can I put subtitles in the output file?
</a></dt><dt>Q: <a href="#idp2769248320">
How do I encode only sound from a music video?
</a></dt><dt>Q: <a href="#idp2769256384">
Why do third-party players fail to play MPEG-4 movies encoded by
MEncoder versions later than 1.0pre7?
</a></dt><dt>Q: <a href="#idp2769269968">
How can I encode an audio only file?
</a></dt><dt>Q: <a href="#idp2769273312">
How can I play subtitles embedded in AVI?
</a></dt><dt>Q: <a href="#idp2769277424">
MEncoder won't...
</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769179696"></a><a name="idp2769179952"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I encode?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Read the <a class="link" href="#mencoder" title="Chapter 6. Basic usage of MEncoder"><span class="application">MEncoder</span></a>
section.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769182448"></a><a name="idp2769182704"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I dump a full DVD title into a file?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Once you have selected your title, and made sure it plays fine with
<span class="application">MPlayer</span>, use the option <tt class="option">-dumpstream</tt>.
For example:
</p><pre class="screen">
mplayer dvd://5 -dumpstream -dumpfile <em class="replaceable"><code>dvd_dump.vob</code></em>
</pre><p>
will dump the 5th title of the DVD into the file
<em class="replaceable"><code>dvd_dump.vob</code></em>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769186992"></a><a name="idp2769187248"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I create (S)VCDs automatically?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Try the <tt class="filename">mencvcd.sh</tt> script from the
<tt class="filename">TOOLS</tt> subdirectory.
With it you can encode DVDs or other movies to VCD or SVCD format
and even burn them directly to CD.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769190432"></a><a name="idp2769190688"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I create (S)VCDs?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Newer versions of <span class="application">MEncoder</span> can directly
generate MPEG-2 files that can be used as a base to create a VCD or SVCD and
are likely to be playable out of the box on all platforms (for example,
to share a video from a digital camcorder with your computer-illiterate
friends).
Please read
<a class="link" href="#menc-feat-vcd-dvd" title="7.8. Using MEncoder to create VCD/SVCD/DVD-compliant files">Using MEncoder to create VCD/SVCD/DVD-compliant files</a>
for more details.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769194064"></a><a name="idp2769194320"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I join two video files?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
MPEG files can be concatenated into a single file with luck.
For AVI files, you can use <span class="application">MEncoder</span>'s
multiple file support like this:
</p><pre class="screen">
mencoder -ovc copy -oac copy -o <em class="replaceable"><code>out.avi</code></em> <em class="replaceable"><code>file1.avi</code></em> <em class="replaceable"><code>file2.avi</code></em>
</pre><p>
This will only work if the files are of the same resolution
and use the same codec.
You can also try
<a class="ulink" href="http://fixounet.free.fr/avidemux/" target="_top">avidemux</a> and
<span class="application">avimerge</span> (part of the
<a class="ulink" href="http://www.transcoding.org/" target="_top">transcode</a>
tool set).
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769200912"></a><a name="idp2769201168"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I fix AVI files with a broken index or bad interleaving?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
To avoid having to use <tt class="option">-idx</tt> to be able to seek in
AVI files with a broken index or <tt class="option">-ni</tt> to play AVI
files with bad interleaving, use the command
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -idx -ovc copy -oac copy -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
to copy the video and audio streams into a new AVI file while
regenerating the index and correctly interleaving the data.
Of course this cannot fix possible bugs in the video and/or audio streams.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769205424"></a><a name="idp2769205680"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I fix the aspect ratio of an AVI file?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
You can do such a thing thanks to <span class="application">MEncoder</span>'s
<tt class="option">-force-avi-aspect</tt> option, which overrides the aspect
stored in the AVI OpenDML vprp header option. For example:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -ovc copy -oac copy -o <em class="replaceable"><code>output.avi</code></em> -force-avi-aspect 4/3
</pre><p>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769210000"></a><a name="idp2769210256"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I backup and encode a VOB file with a broken beginning?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
The main problem when you want to encode a VOB file which is corrupted
<a href="#ftn.fn-corrupted-files-or-copy-protection" class="footnote" name="fn-corrupted-files-or-copy-protection"><sup class="footnote">[3]</sup></a>
is that it will be hard to get an encode with perfect A/V sync.
One workaround is to just shave off the corrupted part and encode just the
clean part.
First you need to find where the clean part starts:
</p><pre class="screen">
mplayer <em class="replaceable"><code>input.vob</code></em> -sb <em class="replaceable"><code>nb_of_bytes_to_skip</code></em>
</pre><p>
Then you can create a new file which contains just the clean part:
</p><pre class="screen">
dd if=<em class="replaceable"><code>input.vob</code></em> of=<em class="replaceable"><code>output_cut.vob</code></em> skip=1 ibs=<em class="replaceable"><code>nb_of_bytes_to_skip</code></em>
</pre><p>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769216960"></a><a name="idp2769217216"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I can't encode DVD subtitles into the AVI!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
You have to properly specify the <tt class="option">-sid</tt> option.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769219008"></a><a name="idp2769219264"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I encode only selected chapters from a DVD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Use the <tt class="option">-chapter</tt> option correctly,
like: <tt class="option">-chapter 5-7</tt>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769221536"></a><a name="idp2769221792"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I'm trying to work with 2GB+ files on a VFAT file system. Does it work?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
No, VFAT doesn't support 2GB+ files.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769223232"></a><a name="idp2769223488"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
What is the meaning of the numbers on the status line
during the encoding process?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Example:
</p><pre class="screen">
Pos: 264.5s   6612f ( 2%)  7.12fps Trem: 576min 2856mb  A-V:0.065 [2126:192]
</pre><p>
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="systemitem">Pos: 264.5s</code></span></dt><dd><p>time position in the encoded stream</p></dd><dt><span class="term"><code class="systemitem">6612f</code></span></dt><dd><p>number of video frames encoded</p></dd><dt><span class="term"><code class="systemitem">( 2%)</code></span></dt><dd><p>portion of the input stream encoded</p></dd><dt><span class="term"><code class="systemitem">7.12fps</code></span></dt><dd><p>encoding speed</p></dd><dt><span class="term"><code class="systemitem">Trem: 576min</code></span></dt><dd><p>estimated remaining encoding time</p></dd><dt><span class="term"><code class="systemitem">2856mb</code></span></dt><dd><p>estimated size of the final encode</p></dd><dt><span class="term"><code class="systemitem">A-V:0.065</code></span></dt><dd><p>current delay between audio and video streams</p></dd><dt><span class="term"><code class="systemitem">[2126:192]</code></span></dt><dd><p>
  average video bitrate (in kb/s) and average audio bitrate (in kb/s)
  </p></dd></dl></div><p>
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769240288"></a><a name="idp2769240544"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Why is the recommended bitrate printed by <span class="application">MEncoder</span>
negative?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Because the bitrate you encoded the audio with is too large to fit the
movie on any CD. Check if you have libmp3lame installed properly.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769242800"></a><a name="idp2769243056"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
I can't encode an ASF file to AVI/MPEG-4 (DivX) because it uses 1000 fps.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Since ASF uses variable framerate but AVI uses a fixed one, you
have to set it by hand with the <tt class="option">-ofps</tt> option.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769245056"></a><a name="idp2769245312"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I put subtitles in the output file?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Just pass the <tt class="option">-sub &lt;filename&gt;</tt> (or <tt class="option">-sid</tt>,
respectively) option to <span class="application">MEncoder</span>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769248320"></a><a name="idp2769248576"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How do I encode only sound from a music video?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
It's not possible directly, but you can try this (note the
<span class="bold"><strong>&amp;</strong></span> at the end of
<span class="command"><strong>mplayer</strong></span> command):
</p><pre class="screen">
mkfifo <em class="replaceable"><code>encode</code></em>
mplayer -ao pcm -aofile <em class="replaceable"><code>encode</code></em> dvd://1 &amp;
lame <em class="replaceable"><code>your_opts</code></em> <em class="replaceable"><code>encode</code></em> <em class="replaceable"><code>music.mp3</code></em>
rm <em class="replaceable"><code>encode</code></em>
</pre><p>
This allows you to use any encoder, not only <span class="application">LAME</span>,
just replace <span class="command"><strong>lame</strong></span> with your favorite audio encoder in the
above command.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769256384"></a><a name="idp2769256640"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
Why do third-party players fail to play MPEG-4 movies encoded by
<span class="application">MEncoder</span> versions later than 1.0pre7?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
<code class="systemitem">libavcodec</code>, the native MPEG-4
encoding library usually shipped with <span class="application">MEncoder</span>,
used to set the FourCC to 'DIVX' when encoding MPEG-4 videos
(the FourCC is an AVI tag to identify the software used to encode and
the intended software to use for decoding the video).
This led many people to think that
<code class="systemitem">libavcodec</code>
was a DivX encoding library, when in fact it is a completely different
MPEG-4 encoding library which implements the MPEG-4 standard much
better than DivX does.
Therefore, the new default FourCC used by
<code class="systemitem">libavcodec</code> is 'FMP4', but you
may override this behavior using <span class="application">MEncoder</span>'s
<tt class="option">-ffourcc</tt> option.
You may also change the FourCC of existing files in the same way:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -o <em class="replaceable"><code>output.avi</code></em> -ffourcc XVID
</pre><p>
Note that this will set the FourCC to XVID rather than DIVX.
This is recommended as DIVX FourCC means DivX4, which is a very basic
MPEG-4 codec, whereas DX50 and XVID both mean full MPEG-4 (ASP).
Therefore, if you change the FourCC to DIVX, some bad software or
hardware players may choke on some advanced features that
<code class="systemitem">libavcodec</code> supports, but DivX
doesn't; on the other hand <code class="systemitem">Xvid</code>
is closer to <code class="systemitem">libavcodec</code> in
terms of functionality, and is supported by all decent players.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769269968"></a><a name="idp2769270224"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I encode an audio only file?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Use <tt class="filename">aconvert.sh</tt> from the
<tt class="filename">TOOLS</tt>
subdirectory in the MPlayer source tree.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769273312"></a><a name="idp2769273568"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
How can I play subtitles embedded in AVI?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Use <tt class="filename">avisubdump.c</tt> from the
<tt class="filename">TOOLS</tt> subdirectory or read
<a class="ulink" href="http://xlife.zuavra.net/curse/0012/" target="_top">this document about extracting/demultiplexing subtitles embedded in OpenDML AVI files</a>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a name="idp2769277424"></a><a name="idp2769277680"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>
MEncoder won't...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>
Have a look at the <tt class="filename">TOOLS</tt>
subdirectory for a collection of random scripts and hacks.
<tt class="filename">TOOLS/README</tt> contains documentation.
</p></td></tr></tbody></table></div><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.fn-corrupted-files-or-copy-protection" class="footnote"><p><a href="#fn-corrupted-files-or-copy-protection" class="para"><sup class="para">[3] </sup></a>
To some extent, some forms of copy protection used in DVDs can be
assumed to be content corruption.
</p></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="bugreports"></a>Appendix A. How to report bugs</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect1"><a href="#bugreports_security">A.1. Report security related bugs</a></span></dt><dt><span class="sect1"><a href="#bugreports_fix">A.2. How to fix bugs</a></span></dt><dt><span class="sect1"><a href="#bugreports_regression_test">A.3. How to do regression testing using Subversion</a></span></dt><dt><span class="sect1"><a href="#bugreports_report">A.4. How to report bugs</a></span></dt><dt><span class="sect1"><a href="#bugreports_where">A.5. Where to report bugs</a></span></dt><dt><span class="sect1"><a href="#bugreports_what">A.6. What to report</a></span></dt><dd><dl><dt><span class="sect2"><a href="#bugreports_system">A.6.1. System Information</a></span></dt><dt><span class="sect2"><a href="#bugreports_hardware">A.6.2. Hardware and drivers</a></span></dt><dt><span class="sect2"><a href="#bugreports_configure">A.6.3. Configure problems</a></span></dt><dt><span class="sect2"><a href="#bugreports_compilation">A.6.4. Compilation problems</a></span></dt><dt><span class="sect2"><a href="#bugreports_playback">A.6.5. Playback problems</a></span></dt><dt><span class="sect2"><a href="#bugreports_crash">A.6.6. Crashes</a></span></dt><dd><dl><dt><span class="sect3"><a href="#bugreports_debug">A.6.6.1. How to conserve information about a reproducible crash</a></span></dt><dt><span class="sect3"><a href="#bugreports_core">A.6.6.2. How to extract meaningful information from a core dump</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#bugreports_advusers">A.7. I know what I am doing...</a></span></dt></dl></div><p>
Good bug reports are a very valuable contribution to the development of any
software project. But just like writing good software, good problem reports
involve some work. Please realize that most developers are extremely busy and
receive obscene amounts of email. So while your feedback is crucial in improving
<span class="application">MPlayer</span> and very much appreciated, please understand
that you have to provide <span class="bold"><strong>all</strong></span> of the information
we request and follow the instructions in this document closely.
</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_security"></a>A.1. Report security related bugs</h2></div></div></div><p>
In case you have found an exploitable bug and you would like to do the
right thing and let us fix it before you disclose it, we would be happy
to get your security advisory at
<a class="ulink" href="mailto:security@mplayerhq.hu" target="_top">security@mplayerhq.hu</a>.
Please add [SECURITY] or [ADVISORY] in the subject.
Be sure that your report contains complete and detailed analysis of the bug.
Sending a fix is highly appreciated.
Please don't delay your report to write proof-of-concept exploit, you can
send that one with another mail.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_fix"></a>A.2. How to fix bugs</h2></div></div></div><p>
If you feel have the necessary skills you are invited to have a go at fixing the
bug yourself. Or maybe you already did that? Please read
<a class="ulink" href="../../tech/patches.txt" target="_top">this short document</a> to find out how
to get your code included in <span class="application">MPlayer</span>. The people on
the
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dev-eng" target="_top">MPlayer-dev-eng</a>
mailing list will assist you if you have questions.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_regression_test"></a>A.3. How to do regression testing using Subversion</h2></div></div></div><p>
A problem that can happen sometimes is 'it used to work before, now it
doesn't anymore...'.
Here is a step by step procedure to try to pinpoint when the problem
occurred. This is <span class="bold"><strong>not</strong></span> for casual users.
</p><p>
First, you'd need to fetch MPlayer's source tree from Subversion.
Instructions can be found in the
<a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html#svn" target="_top">Subversion section of the download page</a>.
</p><p>
You will have now in the mplayer/ directory an image of the Subversion tree, on
the client side.
Now update this image to the date you want:
</p><pre class="screen">
cd mplayer/
svn update -r {"2004-08-23"}
</pre><p>
The date format is YYYY-MM-DD HH:MM:SS.
Using this date format ensure that you will be able to extract patches
according to the date at which they were committed, as in the
<a class="ulink" href="http://lists.mplayerhq.hu/pipermail/mplayer-cvslog/" target="_top">MPlayer-cvslog archive</a>.
</p><p>
Now proceed as for a normal update:
</p><pre class="screen">
./configure
make
</pre><p>
</p><p>
If any non-programmer reads this, the fastest method to get at the point
where the problem occurred is to use a binary search — that is,
search the date of the breakage by repeatedly dividing the search
interval in half.
For example, if the problem occurred in 2003, start at mid-year, then ask
"Is the problem already here?".
If yes, go back to the first of April; if not, go to the first of October,
and so on.
</p><p>
If you have lot of free hard disk space (a full compile currently takes
100 MB, and around 300-350 MB if debugging symbols are enabled), copy the
oldest known working version before updating it; this will save time if
you need to go back.
(It is usually necessary to run 'make distclean' before recompiling an
earlier version, so if you do not make a backup copy of your original
source tree, you will have to recompile everything in it when you come
back to the present.)
Alternatively you may use <a class="ulink" href="http://ccache.samba.org/" target="_top">ccache</a>
to speed up compilation.
</p><p>
When you have found the day where the problem happened, continue the search
using the mplayer-cvslog archive (sorted by date) and a more precise svn
update including hour, minute and second:
</p><pre class="screen">
svn update -r {"2004-08-23 15:17:25"}
</pre><p>
This will allow you to easily find the exact patch that did it.
</p><p>
If you find the patch that is the cause of the problem, you have almost won;
report about it on
<a class="ulink" href="https://trac.mplayerhq.hu/" target="_top">MPlayer's issue tracker</a> or
subscribe to
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users" target="_top">MPlayer-users</a>
and post it there.
There is a chance that the author will jump in to suggest a fix.
You may also look hard at the patch until it is coerced to reveal where
the bug is :-).
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_report"></a>A.4. How to report bugs</h2></div></div></div><p>
First of all please try the latest Subversion version of
<span class="application">MPlayer</span>
as your bug might already be fixed there. Development moves extremely fast,
most problems in official releases are reported within days or even hours,
so please use <span class="bold"><strong>only Subversion</strong></span> to report bugs.
This includes binary packages of <span class="application">MPlayer</span>.
Subversion instructions can be found at the bottom of
<a class="ulink" href="http://www.mplayerhq.hu/dload.html" target="_top">this page</a> or in
the README. If this did not help please refer to the rest of the documentation.
If your problem is not known or not solvable by our instructions,
then please report the bug.
</p><p>
Please do not send bug reports privately to individual developers. This is
community work and thus there might be several people interested in it.
Sometimes other users already experienced your troubles and know how to
circumvent a problem even if it is a bug in <span class="application">MPlayer</span>
code.
</p><p>
Please describe your problem in as much detail as possible. Do a little
detective work to narrow down the circumstances under which the problem occurs.
Does the bug only show up in certain situations? Is it specific to certain
files or file types? Does it occur with only one codec or is it codec
independent? Can you reproduce it with all output drivers? The more information
you provide the better are our chances at fixing your problem. Please do not
forget to also include the valuable information requested below, we will be
unable to properly diagnose your problem otherwise.
</p><p>
An excellent and well written guide to asking questions in public forums is
<a class="ulink" href="http://www.catb.org/~esr/faqs/smart-questions.html" target="_top">How To Ask Questions The Smart Way</a>
by <a class="ulink" href="http://www.catb.org/~esr/" target="_top">Eric S. Raymond</a>.
There is another called
<a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html" target="_top">How to Report Bugs Effectively</a>
by <a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/" target="_top">Simon Tatham</a>.
If you follow these guidelines you should be able to get help. But please
understand that we all follow the mailing lists voluntarily in our free time. We
are very busy and cannot guarantee that you will get a solution for your problem
or even an answer.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_where"></a>A.5. Where to report bugs</h2></div></div></div><p>
Subscribe to the MPlayer-users mailing list:
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users" target="_top">http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users</a>
and send your bug report to
<a class="ulink" href="mailto:mplayer-users@mplayerhq.hu" target="_top">mailto:mplayer-users@mplayerhq.hu</a> where you can discuss it.
</p><p>
If you prefer, you can report it on our
<a class="ulink" href="https://trac.mplayerhq.hu/" target="_top">issue tracker</a> instead.
</p><p>
The language of this list is <span class="bold"><strong>English</strong></span>.
Please follow the standard
<a class="ulink" href="http://www.ietf.org/rfc/rfc1855.txt" target="_top">Netiquette Guidelines</a>
and <span class="bold"><strong>do not send HTML mail</strong></span> to any of our
mailing lists. You will only get ignored or
banned. If you do not know what HTML mail is or why it is evil, read this
<a class="ulink" href="http://efn.no/html-bad.html" target="_top">fine document</a>.
It explains all the details and has instructions for turning HTML off. Also
note that we will not individually CC (carbon-copy) people so it is a good idea
to subscribe to actually receive your answer.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_what"></a>A.6. What to report</h2></div></div></div><p>
You may need to include log, configuration or sample files in your bug report.
If some of them are quite big then it is better to upload them to our
<a class="ulink" href="http://streams.videolan.org/upload/" target="_top">HTTP server</a> in a
compressed format (gzip and bzip2 preferred) and include only the path and file
name in your bug report. Our mailing lists have a message size limit of 80k, if
you have something bigger you have to compress or upload it.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_system"></a>A.6.1. System Information</h3></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Your Linux distribution or operating system and version e.g.:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Red Hat 7.1</p></li><li class="listitem"><p>Slackware 7.0 + devel packs from 7.1 ...</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  kernel version:
  </p><pre class="screen">uname -a</pre><p>
</p></li><li class="listitem"><p>
  libc version:
  </p><pre class="screen">ls -l /lib/libc[.-]*</pre><p>
</p></li><li class="listitem"><p>
  gcc and ld versions:
  </p><pre class="screen">
gcc -v
ld -v</pre><p>
</p></li><li class="listitem"><p>
  binutils version:
  </p><pre class="screen">as --version</pre><p>
</p></li><li class="listitem"><p>
  If you have problems with fullscreen mode:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Window manager type and version</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  If you have problems with XVIDIX:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
    X colour depth:
    </p><pre class="screen">xdpyinfo | grep "depth of root"</pre><p>
  </p></li></ul></div><p>
</p></li><li class="listitem"><p>
  If only the GUI is buggy:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>GTK version</p></li><li class="listitem"><p>GLIB version</p></li><li class="listitem"><p>GUI situation in which the bug occurs</p></li></ul></div><p>
</p></li></ul></div><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_hardware"></a>A.6.2. Hardware and drivers</h3></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  CPU info (this works on Linux only):
  </p><pre class="screen">cat /proc/cpuinfo</pre><p>
</p></li><li class="listitem"><p>
  Video card manufacturer and model, e.g.:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>ASUS V3800U chip: nVidia TNT2 Ultra pro 32MB SDRAM</p></li><li class="listitem"><p>Matrox G400 DH 32MB SGRAM</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Video driver type &amp; version, e.g.:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>X built-in driver</p></li><li class="listitem"><p>nVidia 0.9.623</p></li><li class="listitem"><p>Utah-GLX CVS 2001-02-17</p></li><li class="listitem"><p>DRI from X 4.0.3</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Sound card type &amp; driver, e.g.:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Creative SBLive! Gold with OSS driver from oss.creative.com</p></li><li class="listitem"><p>Creative SB16 with kernel OSS drivers</p></li><li class="listitem"><p>GUS PnP with ALSA OSS emulation</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  If in doubt include <span class="command"><strong>lspci -vv</strong></span> output on Linux systems.
</p></li></ul></div><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_configure"></a>A.6.3. Configure problems</h3></div></div></div><p>
If you get errors while running <span class="command"><strong>./configure</strong></span>, or autodetection
of something fails, read <tt class="filename">config.log</tt>. You may find the
answer there, for example multiple versions of the same library mixed on your
system, or you forgot to install the development package (those with the -dev
suffix). If you think there is a bug, include <tt class="filename">config.log</tt>
in your bug report.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_compilation"></a>A.6.4. Compilation problems</h3></div></div></div><p>
Please include these files:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>config.h</p></li><li class="listitem"><p>config.mak</p></li></ul></div><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_playback"></a>A.6.5. Playback problems</h3></div></div></div><p>
Please include the output of <span class="application">MPlayer</span> at verbosity
level 1, but remember to
<span class="bold"><strong>not truncate the output</strong></span> when
you paste it into your mail. The developers need all of the messages to properly
diagnose a problem. You can direct the output into a file like this:
</p><pre class="screen">
mplayer -v <em class="replaceable"><code>options</code></em> <em class="replaceable"><code>filename</code></em> &gt; mplayer.log 2&gt;&amp;1
</pre><p>
</p><p>
If your problem is specific to one or more files,
then please upload the offender(s) to:
<a class="ulink" href="http://streams.videolan.org/upload/" target="_top">http://streams.videolan.org/upload/</a>
</p><p>
Also upload a small text file having the same base name as your file with a .txt
extension. Describe the problem you are having with the particular file there
and include your email address as well as the output of
<span class="application">MPlayer</span> at verbosity level 1.
Usually the first 1-5 MB of a file are enough to reproduce
the problem, but to be sure we ask you to:
</p><pre class="screen">
dd if=<em class="replaceable"><code>yourfile</code></em> of=<em class="replaceable"><code>smallfile</code></em> bs=1024k count=5
</pre><p>
It will take the first five megabytes of
'<span class="bold"><strong>your-file</strong></span>' and write it to
'<span class="bold"><strong>small-file</strong></span>'. Then try again on
this small file and if the bug still shows up your sample is sufficient for us.
Please <span class="bold"><strong>do not ever</strong></span> send such files via mail!
Upload it, and send only the path/filename of the file on the FTP-server. If the
file is accessible on the net, then sending the
<span class="bold"><strong>exact</strong></span> URL is sufficient.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_crash"></a>A.6.6. Crashes</h3></div></div></div><p>
You have to run <span class="application">MPlayer</span> inside <span class="command"><strong>gdb</strong></span>
and send us the complete output or if you have a <tt class="filename">core</tt> dump
of the crash you can extract useful information from the Core file. Here's how:
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="bugreports_debug"></a>A.6.6.1. How to conserve information about a reproducible crash</h4></div></div></div><p>
Recompile <span class="application">MPlayer</span> with debugging code enabled:
</p><pre class="screen">
./configure --enable-debug=3
make
</pre><p>
and then run <span class="application">MPlayer</span> within gdb using:
</p><pre class="screen">gdb ./mplayer</pre><p>
You are now within gdb. Type:
</p><pre class="screen">
run -v <em class="replaceable"><code>options-to-mplayer</code></em> <em class="replaceable"><code>filename</code></em>
</pre><p>
and reproduce your crash. As soon as you did it, gdb will return you to the
command line prompt where you have to enter
</p><pre class="screen">
bt
disass $pc-32,$pc+32
info all-registers
</pre><p>
With older gdb versions, use disass $pc-32 $pc+32.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="bugreports_core"></a>A.6.6.2. How to extract meaningful information from a core dump</h4></div></div></div><p>
Create the following command file:
</p><pre class="screen">
bt
disass $pc-32,$pc+32
info all-registers
</pre><p>
Then simply execute this command:
</p><pre class="screen">
gdb mplayer --core=core -batch --command=command_file &gt; mplayer.bug
</pre><p>
</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_advusers"></a>A.7. I know what I am doing...</h2></div></div></div><p>
If you created a proper bug report following the steps above and you are
confident it is a bug in <span class="application">MPlayer</span>, not a compiler
problem or broken file, you have already read the documentation and you could
not find a solution, your sound drivers are OK, then you might want to
subscribe to the MPlayer-advusers list and send your bug report there to get
a better and faster answer.
</p><p>
Please be advised that if you post newbie questions or questions answered in the
manual there, you will be ignored or flamed instead of getting an appropriate
answer. So do not flame us and subscribe to -advusers only if you really know
what you are doing and feel like being an advanced
<span class="application">MPlayer</span> user or developer. If you meet these
criteria it should not be difficult to find out how to subscribe...
</p></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="skin"></a>Appendix B. <span class="application">MPlayer</span> skin format</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect1"><a href="#skin-overview">B.1. Overview</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-overview-components">B.1.1. Skin components</a></span></dt><dt><span class="sect2"><a href="#skin-overview-formats">B.1.2. Image formats</a></span></dt><dt><span class="sect2"><a href="#skin-files">B.1.3. Files</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-file">B.2. The skin file</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-file-main">B.2.1. Main window and playbar</a></span></dt><dt><span class="sect2"><a href="#skin-file-subwindow">B.2.2. Video window</a></span></dt><dt><span class="sect2"><a href="#skin-file-menu">B.2.3. Skin menu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-fonts">B.3. Fonts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-fonts-symbols">B.3.1. Symbols</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-gui">B.4. GUI messages</a></span></dt><dt><span class="sect1"><a href="#skin-quality">B.5. Creating quality skins</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-overview"></a>B.1. Overview</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="skin-overview-components"></a>B.1.1. Skin components</h3></div></div></div><p>
Skins are quite free-format (unlike the fixed-format skins of
<span class="application">Winamp</span>/<span class="application">XMMS</span>,
for example), so it is up to you to create something great.
</p><p>
Currently there are four windows to be decorated: the
<a class="link" href="#skin-file-main" title="B.2.1. Main window and playbar">main window</a>, the
<a class="link" href="#skin-file-subwindow" title="B.2.2. Video window">video window</a>, the
<a class="link" href="#skin-file-main" title="B.2.1. Main window and playbar">playbar</a>, and the
<a class="link" href="#skin-file-menu" title="B.2.3. Skin menu">skin menu</a>.

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  The <span class="bold"><strong>main window</strong></span> is where you can control
  <span class="application">MPlayer</span>. The <span class="bold"><strong>playbar</strong></span>
  shows up in fullscreen mode when moving the mouse to the bottom of
  the screen. The background of the windows is an image.
  Various items can (and must) be placed in the window:
  <span class="emphasis"><em>buttons</em></span>, <span class="emphasis"><em>potmeters</em></span> (sliders) and
  <span class="emphasis"><em>labels</em></span>.
  For every item, you must specify its position and size.
  </p><p>
  A <span class="bold"><strong>button</strong></span> has three states (pressed, released,
  disabled), thus its image must be divided into three parts placed below each other. See the
  <a class="link" href="#skin-button">button</a> item for details.
  </p><p>
  A <span class="bold"><strong>potmeter</strong></span> (mainly used for the seek bar and
  volume/balance control) can have any number of phases by dividing its image
  into different parts. See
  <a class="link" href="#skin-hpotmeter">hpotmeter</a> for details.
  </p><p>
  <span class="bold"><strong>Labels</strong></span> are a bit special: The characters
  needed to draw them are taken from an image file, and the characters in the
  image are described by a
  <a class="link" href="#skin-fonts" title="B.3. Fonts">font description file</a>.
  The latter is a plain text file which specifies the x,y position and size of
  each character in the image (the image file and its font description file
  form a font <span class="emphasis"><em>together</em></span>).
  See <a class="link" href="#skin-dlabel">dlabel</a>
  and <a class="link" href="#skin-slabel">slabel</a> for details.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
  All images can have full transparency as described in the section about
  <a class="link" href="#skin-overview-formats" title="B.1.2. Image formats">image formats</a>. If the X server
  doesn't support the XShape extension, the parts marked transparent will be
  black. If you'd like to use this feature, the width of the main window's
  background image must be dividable by 8.
  </p></div></li><li class="listitem"><p>
  The <span class="bold"><strong>video window</strong></span> is where the video appears. It
  can display a specified image if there is no movie loaded (it is quite boring
  to have an empty window :-)) <span class="bold"><strong>Note:</strong></span>
  transparency is <span class="bold"><strong>not allowed</strong></span> here.
</p></li><li class="listitem"><p>
  The <span class="bold"><strong>skin menu</strong></span> is just a way to control
  <span class="application">MPlayer</span> by means of menu entries (which can be
  activated by a middle mouse button click). Two images
  are required for the menu: one of them is the base image that shows the
  menu in its normal state, the other one is used to display the selected
  entries. When you pop up the menu, the first image is shown. If you move
  the mouse over the menu entries, the currently selected entry is copied
  from the second image over the menu entry below the mouse pointer
  (the second image is never shown as a whole).
  </p><p>
  A menu entry is defined by its position and size in the image (see the
  section about the <a class="link" href="#skin-file-menu" title="B.2.3. Skin menu">skin menu</a> for
  details).
  </p></li></ul></div><p>
</p><p>
There is an important thing not mentioned yet: For buttons, potmeters and
menu entries to work, <span class="application">MPlayer</span> must know what to
do if they are clicked. This is done by <a class="link" href="#skin-gui" title="B.4. GUI messages">messages</a>
(events). For these items you must define the messages to be generated when
they are clicked.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="skin-overview-formats"></a>B.1.2. Image formats</h3></div></div></div><p>
Images must be PNGs—either truecolor (24 or 32 bpp)
or 8 bpp with a RGBA color palette.
</p><p>
In the main window and in the playbar (see below) you can use images with
`transparency': Regions filled with the color #FF00FF (magenta) are fully
transparent when viewed by <span class="application">MPlayer</span>. This means
that you can even have shaped windows if your X server has the XShape extension.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="skin-files"></a>B.1.3. Files</h3></div></div></div><p>
You need the following files to build a skin:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  The configuration file named <a class="link" href="#skin-file" title="B.2. The skin file">skin</a> tells
  <span class="application">MPlayer</span> how to put different parts of the skin
  together and what to do if you click somewhere in the window.
</p></li><li class="listitem"><p>
  The background image for the main window.
</p></li><li class="listitem"><p>
  Images for the items in the main window (including one or more font
  description files needed to draw labels).
</p></li><li class="listitem"><p>
  The image to be displayed in the video window (optional).
</p></li><li class="listitem"><p>
  Two images for the skin menu (they are needed only if you want to create
  a menu).
</p></li></ul></div><p>
  With the exception of the skin configuration file, you can name the other
  files whatever you want (but note that font description files must have
  a <tt class="filename">.fnt</tt> extension).
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-file"></a>B.2. The skin file</h2></div></div></div><p>
As mentioned above, this is the skin configuration file. It is line oriented;
comments start with a '<code class="literal">;</code>' character and continue until
the end of the line, or start with a '<code class="literal">#</code>' character at the
beginning of the line (in that case only spaces and tabs are allowed before the
'<code class="literal">#</code>').
</p><p>
The file is made up of sections. Each section describes the skin for an
application and has the following form:
</p><pre class="programlisting">
section = <em class="replaceable"><code>section name</code></em>
.
.
.
end
</pre><p>
</p><p>
Currently there is only one application, so you need only one section: its name
is <span class="bold"><strong>movieplayer</strong></span>.
</p><p>
Within this section each window is described by a block of the following form:
</p><pre class="programlisting">
window = <em class="replaceable"><code>window name</code></em>
.
.
.
end
</pre><p>
</p><p>
where <em class="replaceable"><code>window name</code></em> can be one of these strings:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>main</strong></span> - for the main window
</p></li><li class="listitem"><p>
  <span class="bold"><strong>video</strong></span> - for the video window
</p></li><li class="listitem"><p>
  <span class="bold"><strong>playbar</strong></span> - for the playbar
</p></li><li class="listitem"><p>
  <span class="bold"><strong>menu</strong></span> - for the skin menu
</p></li></ul></div><p>
</p><p>
(The video, playbar and menu blocks are optional - you do not need to decorate
the video window, have a playbar or create a menu. A default menu is always
available by a right mouse button click.)
</p><p>
Within a window block, you can define each item for the window by a line in
this form:
</p><pre class="programlisting">item = parameter</pre><p>
Where <code class="literal">item</code> is a string that identifies the type of the GUI
item, <code class="literal">parameter</code> is a numeric or textual value (or a list of
values separated by commas).
</p><p>
Putting the above together, the whole file looks something like this:
</p><pre class="programlisting">
section = movieplayer
  window = main
  ; ... items for main window ...
  end

  window = video
  ; ... items for video window ...
  end

  window = menu
  ; ... items for menu ...
  end

  window = playbar
  ; ... items for playbar ...
  end
end
</pre><p>
</p><p>
The name of an image file must be given without leading directories - images
are searched for in the <tt class="filename">skins</tt> directory.
You may (but you need not) specify the extension of the file. If the file does
not exist, <span class="application">MPlayer</span> tries to load the file
<tt class="filename">&lt;filename&gt;.&lt;ext&gt;</tt>, where <code class="literal">png</code>
and <code class="literal">PNG</code> are tried for <tt class="filename">&lt;ext&gt;</tt>
(in this order). The first matching file will be used.
</p><p>
Finally some words about positioning. The main window and the video window can be
placed in the different corners of the screen by giving <code class="literal">X</code>
and <code class="literal">Y</code> coordinates. <code class="literal">0</code> is top or left,
<code class="literal">-1</code> is center and <code class="literal">-2</code> is right or bottom, as
shown in this illustration:
</p><div class="informalfigure"><pre class="screen">
(0, 0)----(-1, 0)----(-2, 0)
  |          |          |
  |          |          |
(0,-1)----(-1,-1)----(-2,-1)
  |          |          |
  |          |          |
(0,-2)----(-1,-2)----(-2,-2)
</pre></div><p>
</p><p>
Here is an example to make this clear. Suppose that you have an image called
<tt class="filename">main.png</tt> that you use for the main window:
</p><pre class="programlisting">base = main, -1, -1</pre><p>
<span class="application">MPlayer</span> tries to load <tt class="filename">main</tt>,
<tt class="filename">main.png</tt>, <tt class="filename">main.PNG</tt> files and centers it.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-main"></a>B.2.1. Main window and playbar</h3></div></div></div><p>
Below is the list of entries that can be used in the
'<code class="literal">window = main</code>' ... '<code class="literal">end</code>',
and the '<code class="literal">window = playbar</code>' ... '<code class="literal">end</code>'
blocks.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">
  <a name="skin-decoration"></a>decoration = enable|disable
  </code></span></dt><dd><p>
  Enable or disable window manager decoration of the main window. Default is
  <span class="bold"><strong>disable</strong></span>.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
  This isn't available for the playbar.
  </p></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-main-base"></a>base = image, X, Y
  </code></span></dt><dd><p>
  Lets you specify the background image to be used for the main window.
  The window will appear at the given <code class="literal">X,Y</code> position on
  the screen. It will have the size of the image.
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Transparent regions in the image (colored #FF00FF) appear black
  on X servers without the XShape extension. The image's width must be dividable
  by 8.</p></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-button"></a>button = image, X, Y, width, height, message
  </code></span></dt><dd><p>
  Place a button of <code class="literal">width</code> * <code class="literal">height</code> size at
  position <code class="literal">X,Y</code>. The specified <code class="literal">message</code> is
  generated when the button is clicked. The image given by
  <code class="literal">image</code> must have three parts below each other (according to
  the possible states of the button), like this:
  </p><div class="informalfigure"><pre class="screen">
+------------+
|  pressed   |
+------------+
|  released  |
+------------+
|  disabled  |
+------------+</pre></div><p>
  A special value of <code class="literal">NULL</code> can be used if you want no <code class="literal">image</code>.
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-hpotmeter"></a>hpotmeter = button, bwidth, bheight, phases, numphases, default, X, Y, width, height, message
  </code></span></dt><dd><p>
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-vpotmeter"></a>vpotmeter = button, bwidth, bheight, phases, numphases, default, X, Y, width, height, message
  </code></span></dt><dd><p>
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-rpotmeter"></a>rpotmeter = button, bwidth, bheight, phases, numphases, x<sub>0</sub>, y<sub>0</sub>, x<sub>1</sub>, y<sub>1</sub>, default, X, Y, width, height, message
  </code></span></dt><dd><p>
  Place a horizontal (<code class="literal">hpotmeter</code>), vertical (<code class="literal">vpotmeter</code>) or rotary (<code class="literal">rpotmeter</code>) potmeter of
  <code class="literal">width</code> * <code class="literal">height</code> size at position
  <code class="literal">X,Y</code>. The image can be divided into different parts for the
  different phases of the potmeter (for example, you can have a pot for volume
  control that turns from green to red while its value changes from the minimum
  to the maximum). All potentiometers can have a button that can be dragged
  with a <code class="literal">hpotmeter</code> and <code class="literal">vpotmeter</code>. A
  <code class="literal">rpotmeter</code> can be spun even without a button. The
  parameters are:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
    <code class="literal">button</code> - the image to be used for the
    button (must have three parts below each other, like in case of
    <a class="link" href="#skin-button">button</a>). A special value of
    <code class="literal">NULL</code> can be used if you want no image.
  </p></li><li class="listitem"><p>
    <code class="literal">bwidth</code>, <code class="literal">bheight</code> - size
    of the button
  </p></li><li class="listitem"><p>
    <code class="literal">phases</code> - the image to be used for the
    different phases of the potentiometer. A special value of <code class="literal">NULL</code>
    can be used if you want no such image. The image must be divided into
    <code class="literal">numphases</code> parts below each other (resp. side by side
    for <code class="literal">vpotmeter</code>) like this:
    </p><div class="informalfigure"><pre class="screen">
+------------+
|  phase #1  |                vpotmeter only:
+------------+
|  phase #2  |                +------------+------------+     +------------+
+------------+                |  phase #1  |  phase #2  | ... |  phase #n  |
     ...                      +------------+------------+     +------------+
+------------+
|  phase #n  |
+------------+</pre></div><p>
  </p></li><li class="listitem"><p>
    <code class="literal">numphases</code> - number of phases stored in the
    <code class="literal">phases</code> image
  </p></li><li class="listitem"><p>
    <code class="literal">x<sub>0</sub></code>,
    <code class="literal">y<sub>0</sub></code> and
    <code class="literal">x<sub>1</sub></code>,
    <code class="literal">y<sub>1</sub></code> - position of the 0% start
    point and 100% stop point for the potentiometer <span class="bold"><strong>(<code class="literal">rpotmeter</code> only)</strong></span></p><p>The first coordinate <code class="literal">x<sub>0</sub>,y<sub>0</sub></code>
    defines the 0% start point (on the edge of the potentiometer) in the
    image for phase #1 and the second coordinate <code class="literal">x<sub>1</sub>,y<sub>1</sub></code>
    the 100% stop point in the image for phase #n - in other words, the
    coordinates of the tip of the mark on the potentiometer in the two
    individual images.</p></li><li class="listitem"><p>
    <code class="literal">default</code> - default value for the potentiometer
    (in the range <code class="literal">0</code> to <code class="literal">100</code>)
    </p><p>
    (If message is <code class="literal">evSetVolume</code>, it's allowed to use a
    plain hyphen-minus as value. This will cause the currently set volume to
    remain unchanged.)
  </p></li><li class="listitem"><p>
    <code class="literal">X</code>, <code class="literal">Y</code> - position for the potentiometer
  </p></li><li class="listitem"><p>
    <code class="literal">width</code>, <code class="literal">height</code> - width and height
    of the potentiometer
  </p></li><li class="listitem"><p>
    <code class="literal">message</code> - the message to be generated when the
    value of the potentiometer is changed
  </p></li></ul></div><p>
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-pimage"></a>pimage = phases, numphases, default, X, Y, width, height, message
  </code></span></dt><dd><p>
  Place different phases of an image at position <code class="literal">X,Y</code>.
  This element goes nicely with potentiometers to visualize their state.
  <code class="literal">phases</code> can be <code class="literal">NULL</code>, but this is quite
  useless, since nothing will be displayed then.
  For a description of the parameters see
  <a class="link" href="#skin-hpotmeter">hpotmeter</a>. There is only a difference
  concerning the message:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <code class="literal">message</code> - the message to be reacted on, i.e. which
  shall cause a change of <code class="literal">pimage</code>.
  </p></li></ul></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-font"></a>font = fontfile
  </code></span></dt><dd><p>
  Defines a font. <code class="literal">fontfile</code> is the name of a font description
  file with a <tt class="filename">.fnt</tt> extension (do not specify the extension
  here) and is used to refer to the font
  (see <a class="link" href="#skin-dlabel">dlabel</a>
  and <a class="link" href="#skin-slabel">slabel</a>). Up to 25 fonts can be defined.
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-slabel"></a>slabel = X, Y, fontfile, "text"
  </code></span></dt><dd><p>
  Place a static label at the position <code class="literal">X,Y</code>.
  <code class="literal">text</code> is displayed using the font identified by
  <code class="literal">fontfile</code>. The text is just a raw string
  (<code class="literal">$x</code> variables do not work) that must be enclosed between
  double quotes (but the " character cannot be part of the text). The
  label is displayed using the font identified by <code class="literal">fontfile</code>.
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-dlabel"></a>dlabel = X, Y, width, align, fontfile, "text"
  </code></span></dt><dd><p>
  Place a dynamic label at the position <code class="literal">X,Y</code>. The label is
  called dynamic because its text is refreshed periodically. The maximum width
  of the label is given by <code class="literal">width</code> (its height is the height
  of a character). If the text to be displayed is wider than that, it will be
  scrolled,
  otherwise it is aligned within the specified space by the value of the
  <code class="literal">align</code> parameter: <code class="literal">0</code> is for left,
  <code class="literal">1</code> is for center, <code class="literal">2</code> is for right.
  </p><p>
  The text to be displayed is given by <code class="literal">text</code>: It must be
  written between double quotes (but the " character cannot be part of the
  text). The label is displayed using the font identified by
  <code class="literal">fontfile</code>. You can use the following variables in the text:
  </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Variable</th><th>Meaning</th></tr></thead><tbody><tr><td>$1</td><td>elapsed time in <span class="emphasis"><em>hh:mm:ss</em></span> format</td></tr><tr><td>$2</td><td>elapsed time in <span class="emphasis"><em>mmmm:ss</em></span> format</td></tr><tr><td>$3</td><td>elapsed time in <span class="emphasis"><em>hh</em></span> format (hours)</td></tr><tr><td>$4</td><td>elapsed time in <span class="emphasis"><em>mm</em></span> format (minutes)</td></tr><tr><td>$5</td><td>elapsed time in <span class="emphasis"><em>ss</em></span> format (seconds)</td></tr><tr><td>$6</td><td>running time in <span class="emphasis"><em>hh:mm:ss</em></span> format</td></tr><tr><td>$7</td><td>running time in <span class="emphasis"><em>mmmm:ss</em></span> format</td></tr><tr><td>$8</td><td>elapsed time in <span class="emphasis"><em>h:mm:ss</em></span> format</td></tr><tr><td>$v</td><td>volume in <span class="emphasis"><em>xxx.xx</em></span>% format</td></tr><tr><td>$V</td><td>volume in <span class="emphasis"><em>xxx.x</em></span> format</td></tr><tr><td>$U</td><td>volume in <span class="emphasis"><em>xxx</em></span> format</td></tr><tr><td>$b</td><td>balance in <span class="emphasis"><em>xxx.xx</em></span>% format</td></tr><tr><td>$B</td><td>balance in <span class="emphasis"><em>xxx.x</em></span> format</td></tr><tr><td>$D</td><td>balance in <span class="emphasis"><em>xxx</em></span> format</td></tr><tr><td>$$</td><td>the $ character</td></tr><tr><td>$a</td><td>a character according to the audio type (none: <span class="keycap"><b>n</b></span>,
    mono: <span class="keycap"><b>m</b></span>, stereo: <span class="keycap"><b>t</b></span>, surround: <span class="keycap"><b>r</b></span>)</td></tr><tr><td>$t</td><td>track number (DVD, VCD, CD or playlist)</td></tr><tr><td>$o</td><td>filename</td></tr><tr><td>$O</td><td>filename (if no title name available) otherwise title</td></tr><tr><td>$f</td><td>filename in lower case</td></tr><tr><td>$F</td><td>filename in upper case</td></tr><tr><td>$T</td><td>
    a character according to the stream type (file: <span class="keycap"><b>f</b></span>,
    CD: <span class="keycap"><b>a</b></span>, Video CD: <span class="keycap"><b>v</b></span>, DVD: <span class="keycap"><b>d</b></span>,
    URL: <span class="keycap"><b>u</b></span>, TV/DVB: <span class="keycap"><b>b</b></span>, CUE: <span class="keycap"><b>c</b></span>)
    </td></tr><tr><td>$P</td><td>a character according to the playback state (stopped: <span class="keycap"><b>s</b></span>, playing: <span class="keycap"><b>p</b></span>, paused: <span class="keycap"><b>e</b></span>)</td></tr><tr><td>$p</td><td>the <span class="keycap"><b>p</b></span> character (if a movie is playing)</td></tr><tr><td>$s</td><td>the <span class="keycap"><b>s</b></span> character (if the movie is stopped)</td></tr><tr><td>$e</td><td>the <span class="keycap"><b>e</b></span> character (if playback is paused)</td></tr><tr><td>$g</td><td>the <span class="keycap"><b>g</b></span> character (if ReplayGain is active)</td></tr><tr><td>$x</td><td>video width</td></tr><tr><td>$y</td><td>video height</td></tr><tr><td>$C</td><td>name of the codec used</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
  The <code class="literal">$a, $T, $P, $p, $s</code> and <code class="literal">$e</code>
  variables all return characters that should be displayed as special symbols
  (for example, <span class="keycap"><b>e</b></span> is for the pause symbol that usually looks
  something like ||). You should have a font for normal characters and
  a different font for symbols. See the section about
  <a class="link" href="#skin-fonts-symbols" title="B.3.1. Symbols">symbols</a> for more information.
  </p></div></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-subwindow"></a>B.2.2. Video window</h3></div></div></div><p>
The following entries can be used in the
'<code class="literal">window = video</code>' . . . '<code class="literal">end</code>' block.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">
  <a name="skin-sub-base"></a>base = image, X, Y, width, height
  </code></span></dt><dd><p>
  The image to be displayed in the window. The window will be as large as the image.
  <code class="literal">width</code> and <code class="literal">height</code>
  denote the size of the window; they are optional (if they are missing, the
  window is the same size as the image).
  A special value of <code class="literal">NULL</code> can be used if you want no image
  (in which case <code class="literal">width</code> and <code class="literal">height</code> are
  mandatory).
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-background"></a>background = R, G, B
  </code></span></dt><dd><p>
  Lets you set the background color. It is useful if the image is smaller than
  the window. <code class="literal">R</code>, <code class="literal">G</code> and
  <code class="literal">B</code> specifies the red, green and blue component of the color
  (each of them is a decimal number from 0 to 255).
  </p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-menu"></a>B.2.3. Skin menu</h3></div></div></div><p>
As mentioned earlier, the menu is displayed using two images. Normal menu
entries are taken from the image specified by the <code class="literal">base</code> item,
while the currently selected entry is taken from the image specified by the
<code class="literal">selected</code> item. You must define the position and size of each
menu entry through the menu item.
</p><p>
The following entries can be used in the
'<code class="literal">window = menu</code>'. . .'<code class="literal">end</code>' block.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">
  <a name="skin-menu-base"></a>base = image
  </code></span></dt><dd><p>
  The image for normal menu entries.
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-selected"></a>selected = image
  </code></span></dt><dd><p>
  The image showing the menu with all entries selected.
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-menu"></a>menu = X, Y, width, height, message
  </code></span></dt><dd><p>
  Defines the <code class="literal">X,Y</code> position and the size of a menu entry in
  the image. <code class="literal">message</code> is the message to be generated when the
  mouse button is released over the entry.
  </p></dd></dl></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-fonts"></a>B.3. Fonts</h2></div></div></div><p>
As mentioned in the section about the parts of a skin, a font is defined by an
image and a description file. You can place the characters anywhere in the
image, but make sure that their position and size is given in the description
file exactly.
</p><p>
The font description file (with <tt class="filename">.fnt</tt> extension) can have
comments like the skin configuration file starting with '<code class="literal">;</code>'
(or '<code class="literal">#</code>', but only at the beginning of the line). The file must have a line
in the form
<a name="skin-font-image"></a>
</p><pre class="programlisting">image = <em class="replaceable"><code>image</code></em></pre><p>
Where <code class="literal"><em class="replaceable"><code>image</code></em></code> is the name of the
image file to be used for the font (you do not have to specify the extension).
<a name="skin-font-char"></a>
</p><pre class="programlisting">"char" = X, Y, width, height</pre><p>
Here <code class="literal">X</code> and <code class="literal">Y</code> specify the position of the
<code class="literal">char</code> character in the image (<code class="literal">0,0</code> is the
upper left corner). <code class="literal">width</code> and <code class="literal">height</code> are
the dimensions of the character in pixels. The character <code class="literal">char</code>
shall be in UTF-8 encoding.
</p><p>
This example defines the A, B, C characters using <tt class="filename">font.png</tt>.
</p><pre class="programlisting">
; Can be "font" instead of "font.png".
image = font.png

; Three characters are enough for demonstration purposes :-)
"A" =  0,0, 7,13
"B" =  7,0, 7,13
"C" = 14,0, 7,13
</pre><p>
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="skin-fonts-symbols"></a>B.3.1. Symbols</h3></div></div></div><p>
Some characters have special meanings when returned by some of the variables
used in <a class="link" href="#skin-dlabel">dlabel</a>. These characters are meant
to be shown as symbols so that things like a nice DVD logo can be displayed
instead of the character '<code class="literal">d</code>' for a DVD stream.
</p><p>
The following table lists all the characters that can be used to display
symbols (and thus require a different font).
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Character</th><th>Symbol</th></tr></thead><tbody><tr><td><span class="keycap"><b>p</b></span></td><td>play</td></tr><tr><td><span class="keycap"><b>s</b></span></td><td>stop</td></tr><tr><td><span class="keycap"><b>e</b></span></td><td>pause</td></tr><tr><td><span class="keycap"><b>n</b></span></td><td>no sound</td></tr><tr><td><span class="keycap"><b>m</b></span></td><td>mono sound</td></tr><tr><td><span class="keycap"><b>t</b></span></td><td>stereo sound</td></tr><tr><td><span class="keycap"><b>r</b></span></td><td>surround sound</td></tr><tr><td><span class="keycap"><b>g</b></span></td><td>replay gain</td></tr><tr><td><span class="keycap"><b>space</b></span></td><td>no (known)stream</td></tr><tr><td><span class="keycap"><b>f</b></span></td><td>stream is a file</td></tr><tr><td><span class="keycap"><b>a</b></span></td><td>stream is a CD</td></tr><tr><td><span class="keycap"><b>v</b></span></td><td>stream is a Video CD</td></tr><tr><td><span class="keycap"><b>d</b></span></td><td>stream is a DVD</td></tr><tr><td><span class="keycap"><b>u</b></span></td><td>stream is a URL</td></tr><tr><td><span class="keycap"><b>b</b></span></td><td>stream is a TV/DVB broadcast</td></tr><tr><td><span class="keycap"><b>c</b></span></td><td>stream is a cue sheet</td></tr></tbody></table></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-gui"></a>B.4. GUI messages</h2></div></div></div><p>
These are the messages that can be generated by buttons, potmeters and
menu entries.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="bold"><strong>evNone</strong></span></span></dt><dd><p>
  Empty message, it has no effect.
  </p></dd></dl></div><div class="variablelist"><p class="title"><b>Playback control:</b></p><dl class="variablelist"><dt><span class="term"><span class="bold"><strong>evPlay</strong></span></span></dt><dd><p>
  Start playing.
  </p></dd><dt><span class="term"><span class="bold"><strong>evStop</strong></span></span></dt><dd><p>
  Stop playing.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPause</strong></span></span></dt><dd><p>
  Pause playing.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPrev</strong></span></span></dt><dd><p>
  Jump to previous track in the playlist.
  </p></dd><dt><span class="term"><span class="bold"><strong>evNext</strong></span></span></dt><dd><p>
  Jump to next track in the playlist.
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoad</strong></span></span></dt><dd><p>
  Load a file (by opening a file selector dialog box, where you can choose a file).
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoadPlay</strong></span></span></dt><dd><p>
  Does the same as <code class="literal">evLoad</code>, but it automatically starts
  playing after the file is loaded.
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoadAudioFile</strong></span></span></dt><dd><p>
  Loads an audio file (with the file selector).
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoadSubtitle</strong></span></span></dt><dd><p>
  Loads a subtitle file (with the file selector).
  </p></dd><dt><span class="term"><span class="bold"><strong>evDropSubtitle</strong></span></span></dt><dd><p>
  Disables the currently used subtitle.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlaylist</strong></span></span></dt><dd><p>
  Open/close the playlist window.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlayCD</strong></span></span></dt><dd><p>
  Tries to open the disc in the given CD-ROM drive.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlayVCD</strong></span></span></dt><dd><p>
  Tries to open the disc in the given CD-ROM drive.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlayDVD</strong></span></span></dt><dd><p>
  Tries to open the disc in the given DVD-ROM drive.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlayImage</strong></span></span></dt><dd><p>
  Loads an CD/(S)VCD/DVD image or DVD copy (with the file selector) and plays it
  as if it were a real disc.
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoadURL</strong></span></span></dt><dd><p>
  Displays the URL dialog window.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlayTV</strong></span></span></dt><dd><p>
  Tries to start TV/DVB broadcast.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlaySwitchToPause</strong></span></span></dt><dd><p>
  The opposite of <code class="literal">evPauseSwitchToPlay</code>. This message starts
  playing and the image for the <code class="literal">evPauseSwitchToPlay</code> button
  is displayed (to indicate that the button can be pressed to pause playing).
  </p></dd><dt><span class="term"><span class="bold"><strong>evPauseSwitchToPlay</strong></span></span></dt><dd><p>
  Forms a switch together with <code class="literal">evPlaySwitchToPause</code>. They can
  be used to have a common play/pause button. Both messages should be assigned
  to buttons displayed at the very same position in the window. This message
  pauses playing and the image for the <code class="literal">evPlaySwitchToPause</code>
  button is displayed (to indicate that the button can be pressed to continue
  playing).
  </p></dd></dl></div><div class="variablelist"><p class="title"><b>Seeking:</b></p><dl class="variablelist"><dt><span class="term"><span class="bold"><strong>evBackward10sec</strong></span></span></dt><dd><p>
  Seek backward 10 seconds.
  </p></dd><dt><span class="term"><span class="bold"><strong>evBackward1min</strong></span></span></dt><dd><p>
  Seek backward 1 minute.
  </p></dd><dt><span class="term"><span class="bold"><strong>evBackward10min</strong></span></span></dt><dd><p>
  Seek backward 10 minutes.
  </p></dd><dt><span class="term"><span class="bold"><strong>evForward10sec</strong></span></span></dt><dd><p>
  Seek forward 10 seconds.
  </p></dd><dt><span class="term"><span class="bold"><strong>evForward1min</strong></span></span></dt><dd><p>
  Seek forward 1 minute.
  </p></dd><dt><span class="term"><span class="bold"><strong>evForward10min</strong></span></span></dt><dd><p>
  Seek forward 10 minutes.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetMoviePosition</strong></span></span></dt><dd><p>
  Seek to position (can be used by a potmeter; the
  relative value (0-100%) of the potmeter is used).
  </p></dd></dl></div><div class="variablelist"><p class="title"><b>Video control:</b></p><dl class="variablelist"><dt><span class="term"><span class="bold"><strong>evHalfSize</strong></span></span></dt><dd><p>
  Set the video window to half size.
  </p></dd><dt><span class="term"><span class="bold"><strong>evDoubleSize</strong></span></span></dt><dd><p>
  Set the video window to double size.
  </p></dd><dt><span class="term"><span class="bold"><strong>evFullScreen</strong></span></span></dt><dd><p>
  Switch fullscreen mode on/off.
  </p></dd><dt><span class="term"><span class="bold"><strong>evNormalSize</strong></span></span></dt><dd><p>
  Set the video window to its normal size.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetAspect</strong></span></span></dt><dd><p>
  Set the video window to its original aspect ratio.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetRotation</strong></span></span></dt><dd><p>
  Set the video to its original orientation.
  </p></dd></dl></div><div class="variablelist"><p class="title"><b>Audio control:</b></p><dl class="variablelist"><dt><span class="term"><span class="bold"><strong>evDecVolume</strong></span></span></dt><dd><p>
  Decrease volume.
  </p></dd><dt><span class="term"><span class="bold"><strong>evIncVolume</strong></span></span></dt><dd><p>
  Increase volume.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetVolume</strong></span></span></dt><dd><p>
  Set volume (can be used by a potmeter; the relative
  value (0-100%) of the potmeter is used).
  </p></dd><dt><span class="term"><span class="bold"><strong>evMute</strong></span></span></dt><dd><p>
  Mute/unmute the sound.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetBalance</strong></span></span></dt><dd><p>
  Set balance (can be used by a potmeter; the
  relative value (0-100%) of the potmeter is used).
  </p></dd><dt><span class="term"><span class="bold"><strong>evEqualizer</strong></span></span></dt><dd><p>
  Turn the equalizer on/off.
  </p></dd></dl></div><div class="variablelist"><p class="title"><b>Miscellaneous:</b></p><dl class="variablelist"><dt><span class="term"><span class="bold"><strong>evAbout</strong></span></span></dt><dd><p>
  Open the about window.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPreferences</strong></span></span></dt><dd><p>
  Open the preferences window.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSkinBrowser</strong></span></span></dt><dd><p>
  Open the skin browser window.
  </p></dd><dt><span class="term"><span class="bold"><strong>evMenu</strong></span></span></dt><dd><p>
  Open the (default) menu.
  </p></dd><dt><span class="term"><span class="bold"><strong>evIconify</strong></span></span></dt><dd><p>
  Iconify the window.
  </p></dd><dt><span class="term"><span class="bold"><strong>evExit</strong></span></span></dt><dd><p>
  Quit the program.
  </p></dd></dl></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-quality"></a>B.5. Creating quality skins</h2></div></div></div><p>
So you have read up on creating skins for the
<span class="application">MPlayer</span> GUI, done your best with the
<span class="application">Gimp</span> and wish to submit your skin to us?
Read on for some guidelines to avoid common mistakes and produce
a high quality skin.
</p><p>
We want skins that we add to our repository to conform to certain
quality standards. There are also a number of things that you can do
to make our lives easier.
</p><p>
As an example you can look at the <code class="systemitem">Blue</code> skin,
it satisfies all the criteria listed below since version 1.5.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Each skin should come with a
  <tt class="filename">README</tt> file that contains information about
  you, the author, copyright and license notices and anything else
  you wish to add. If you wish to have a changelog, this file is a
  good place.
</p></li><li class="listitem"><p>
  There must be a file <tt class="filename">VERSION</tt>
  with nothing more than the version number of the skin on a single
  line (e.g. 1.0).
</p></li><li class="listitem"><p>
  Horizontal and vertical controls (sliders like volume
  or position) should have the center of the knob properly centered on
  the middle of the slider. It should be possible to move the knob to
  both ends of the slider, but not past it.
</p></li><li class="listitem"><p>
  Skin elements shall have the right sizes declared
  in the skin file. If this is not the case you can click outside of
  e.g. a button and still trigger it or click inside its area and not
  trigger it.
</p></li><li class="listitem"><p>
  The <tt class="filename">skin</tt> file should be
  prettyprinted and not contain tabs. Prettyprinted means that the
  numbers should line up neatly in columns
  and definitions should be indented appropriately.
</p></li></ul></div></div></div></div></body></html>
